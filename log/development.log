~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (39.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (616.9ms)[0m   [0mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (174.3ms)[0m   [0;1mCREATE UNIQUE INDEX `unique_schema_migrations` ON `schema_migrations` (`version`)[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateUsers (20080815014337)
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (114.0ms)[0m   [0;1mCREATE TABLE `users` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `login` varchar(40), `first_name` varchar(40), `last_name` varchar(40), `email` varchar(40), `crypted_password` varchar(40), `salt` varchar(40), `created_at` datetime, `updated_at` datetime, `expires_at` datetime, `remember_token` varchar(40), `remember_token_expires_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (146.4ms)[0m   [0mCREATE UNIQUE INDEX `index_users_on_login` ON `users` (`login`)[0m
  [4;36;1mSQL (10.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080815014337')[0m
Migrating to CreateDynamicViews (20080815014733)
  [4;35;1mSQL (127.5ms)[0m   [0mCREATE TABLE `dynamic_views` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `version` int(11), `lock_version` int(11) DEFAULT 0, `type` varchar(255), `name` varchar(255), `format` varchar(255), `handler` varchar(255), `body` text, `created_at` datetime, `updated_at` datetime, `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `created_by_id` int(11), `updated_by_id` int(11)) [0m
  [4;36;1mSQL (79.3ms)[0m   [0;1mCREATE TABLE `dynamic_view_versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `dynamic_view_id` int(11), `version` int(11), `type` varchar(255), `name` varchar(255), `format` varchar(255), `handler` varchar(255), `body` text, `created_at` datetime, `updated_at` datetime, `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `version_comment` varchar(255), `created_by_id` int(11), `updated_by_id` int(11)) [0m
  [4;35;1mSQL (0.9ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20080815014733')[0m
Migrating to CreatePages (20080815014735)
  [4;36;1mSQL (140.1ms)[0m   [0;1mCREATE TABLE `pages` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `version` int(11), `lock_version` int(11) DEFAULT 0, `name` varchar(255), `title` varchar(255), `path` varchar(255), `template_file_name` varchar(255), `description` text, `keywords` text, `language` varchar(255), `cacheable` tinyint(1) DEFAULT 0, `hidden` tinyint(1) DEFAULT 0, `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) [0m
  [4;35;1mSQL (87.7ms)[0m   [0mCREATE TABLE `page_versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `page_id` int(11), `version` int(11), `name` varchar(255), `title` varchar(255), `path` varchar(255), `template_file_name` varchar(255), `description` text, `keywords` text, `language` varchar(255), `cacheable` tinyint(1) DEFAULT 0, `hidden` tinyint(1) DEFAULT 0, `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `version_comment` varchar(255), `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) [0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080815014735')[0m
Migrating to CreateContentTypeGroups (20080815014736)
  [4;35;1mSQL (97.7ms)[0m   [0mCREATE TABLE `content_type_groups` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mContentTypeGroup Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `content_type_groups`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mContentTypeGroup Create (0.6ms)[0m   [0;1mINSERT INTO `content_type_groups` (`name`, `updated_at`, `created_at`) VALUES('Core', '2009-05-16 11:55:44', '2009-05-16 11:55:44')[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080815014736')[0m
Migrating to CreateContentTypes (20080815014737)
  [4;35;1mSQL (138.6ms)[0m   [0mCREATE TABLE `content_types` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `content_type_group_id` int(11), `priority` int(11) DEFAULT 2, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080815014737')[0m
Migrating to CreateCategoryTypes (20080815014738)
  [4;35;1mSQL (132.3ms)[0m   [0mCREATE TABLE `category_types` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mContentType Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `content_types`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mContentTypeGroup Load (0.7ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`name` = 'Categorization') LIMIT 1[0m
  [4;35;1mContentTypeGroup Create (0.2ms)[0m   [0mINSERT INTO `content_type_groups` (`name`, `updated_at`, `created_at`) VALUES('Categorization', '2009-05-16 11:55:44', '2009-05-16 11:55:44')[0m
  [4;36;1mContentType Create (0.2ms)[0m   [0;1mINSERT INTO `content_types` (`name`, `updated_at`, `priority`, `content_type_group_id`, `created_at`) VALUES('CategoryType', '2009-05-16 11:55:44', 2, 2, '2009-05-16 11:55:44')[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080815014738')[0m
Migrating to CreateCategories (20080815014739)
  [4;35;1mSQL (124.2ms)[0m   [0mCREATE TABLE `categories` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `category_type_id` int(11), `parent_id` int(11), `name` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`name` = 'Categorization') LIMIT 1[0m
  [4;36;1mContentType Create (0.2ms)[0m   [0;1mINSERT INTO `content_types` (`name`, `updated_at`, `priority`, `content_type_group_id`, `created_at`) VALUES('Category', '2009-05-16 11:55:45', 2, 2, '2009-05-16 11:55:45')[0m
  [4;35;1mSQL (1.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080815014739')[0m
Migrating to CreateConnectors (20080815214539)
  [4;35;1mSQL (180.6ms)[0m   [0mCREATE TABLE `connectors` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `page_id` int(11), `page_version` int(11), `connectable_id` int(11), `connectable_type` varchar(255), `connectable_version` int(11), `container` varchar(255), `position` int(11), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080815214539')[0m
Migrating to CreateHtmlBlocks (20080815220350)
  [4;35;1mSQL (133.2ms)[0m   [0mCREATE TABLE `html_blocks` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `version` int(11), `lock_version` int(11) DEFAULT 0, `name` varchar(255), `content` varchar(65537), `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) [0m
  [4;36;1mSQL (110.7ms)[0m   [0;1mCREATE TABLE `html_block_versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `html_block_id` int(11), `version` int(11), `name` varchar(255), `content` varchar(65537), `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `version_comment` varchar(255), `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`name` = 'Core') LIMIT 1[0m
  [4;35;1mContentType Create (0.2ms)[0m   [0mINSERT INTO `content_types` (`name`, `updated_at`, `priority`, `content_type_group_id`, `created_at`) VALUES('HtmlBlock', '2009-05-16 11:55:45', 1, 1, '2009-05-16 11:55:45')[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20080815220350')[0m
Migrating to CreateSections (20080819193254)
  [4;36;1mSQL (115.0ms)[0m   [0;1mCREATE TABLE `sections` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `path` varchar(255), `root` tinyint(1) DEFAULT 0, `hidden` tinyint(1) DEFAULT 0, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20080819193254')[0m
Migrating to CreatePortlets (20080819213733)
  [4;36;1mSQL (105.9ms)[0m   [0;1mCREATE TABLE `portlets` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `type` varchar(255), `name` varchar(255), `archived` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (100.0ms)[0m   [0mCREATE TABLE `portlet_attributes` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `portlet_id` int(11), `name` varchar(255), `value` text) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`name` = 'Core') LIMIT 1[0m
  [4;36;1mContentType Create (0.2ms)[0m   [0;1mINSERT INTO `content_types` (`name`, `updated_at`, `priority`, `content_type_group_id`, `created_at`) VALUES('Portlet', '2009-05-16 11:55:45', 1, 1, '2009-05-16 11:55:45')[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080819213733')[0m
Migrating to CreateRedirects (20080917222336)
  [4;35;1mSQL (93.2ms)[0m   [0mCREATE TABLE `redirects` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `from_path` varchar(255), `to_path` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080917222336')[0m
Migrating to CreateAttachments (20080922203815)
  [4;35;1mSQL (107.8ms)[0m   [0mCREATE TABLE `attachments` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `version` int(11), `lock_version` int(11) DEFAULT 0, `file_path` varchar(255), `file_location` varchar(255), `file_extension` varchar(255), `file_type` varchar(255), `file_size` int(11), `created_at` datetime, `updated_at` datetime, `name` varchar(255), `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `created_by_id` int(11), `updated_by_id` int(11)) [0m
  [4;36;1mSQL (108.3ms)[0m   [0;1mCREATE TABLE `attachment_versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `attachment_id` int(11), `version` int(11), `file_path` varchar(255), `file_location` varchar(255), `file_extension` varchar(255), `file_type` varchar(255), `file_size` int(11), `created_at` datetime, `updated_at` datetime, `name` varchar(255), `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `version_comment` varchar(255), `created_by_id` int(11), `updated_by_id` int(11)) [0m
  [4;35;1mSQL (1.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20080922203815')[0m
Migrating to CreateFileBlocks (20080922215729)
  [4;36;1mSQL (117.8ms)[0m   [0;1mCREATE TABLE `file_blocks` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `version` int(11), `lock_version` int(11) DEFAULT 0, `type` varchar(255), `name` varchar(255), `attachment_id` int(11), `attachment_version` int(11), `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) [0m
  [4;35;1mSQL (109.4ms)[0m   [0mCREATE TABLE `file_block_versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `file_block_id` int(11), `version` int(11), `type` varchar(255), `name` varchar(255), `attachment_id` int(11), `attachment_version` int(11), `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `version_comment` varchar(255), `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`name` = 'Core') LIMIT 1[0m
  [4;36;1mContentType Create (0.2ms)[0m   [0;1mINSERT INTO `content_types` (`name`, `updated_at`, `priority`, `content_type_group_id`, `created_at`) VALUES('FileBlock', '2009-05-16 11:55:46', 2, 1, '2009-05-16 11:55:46')[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`name` = 'Core') LIMIT 1[0m
  [4;36;1mContentType Create (0.2ms)[0m   [0;1mINSERT INTO `content_types` (`name`, `updated_at`, `priority`, `content_type_group_id`, `created_at`) VALUES('ImageBlock', '2009-05-16 11:55:46', 2, 1, '2009-05-16 11:55:46')[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20080922215729')[0m
Migrating to CreateGroupTypes (20081007190155)
  [4;35;1mSQL (112.7ms)[0m   [0mCREATE TABLE `group_types` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `guest` tinyint(1) DEFAULT 0, `cms_access` tinyint(1) DEFAULT 0, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20081007190155')[0m
Migrating to CreateGroups (20081007190156)
  [4;35;1mSQL (145.4ms)[0m   [0mCREATE TABLE `groups` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `code` varchar(255), `group_type_id` int(11), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (116.0ms)[0m   [0;1mCREATE TABLE `user_group_memberships` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `group_id` int(11)) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20081007190156')[0m
Migrating to CreatePermissions (20081008182341)
  [4;36;1mSQL (108.2ms)[0m   [0;1mCREATE TABLE `permissions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `full_name` varchar(255), `description` varchar(255), `for_module` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (110.5ms)[0m   [0mCREATE TABLE `group_permissions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `group_id` int(11), `permission_id` int(11)) ENGINE=InnoDB[0m
  [4;36;1mSQL (122.1ms)[0m   [0;1mCREATE TABLE `group_type_permissions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `group_type_id` int(11), `permission_id` int(11)) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20081008182341')[0m
Migrating to CreateGroupSections (20081009202349)
  [4;36;1mSQL (118.5ms)[0m   [0;1mCREATE TABLE `group_sections` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `group_id` int(11), `section_id` int(11)) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20081009202349')[0m
Migrating to CreateSites (20081013181547)
  [4;36;1mSQL (149.5ms)[0m   [0;1mCREATE TABLE `sites` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `domain` varchar(255), `the_default` tinyint(1), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (1.0ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20081013181547')[0m
Migrating to CreateSectionNodes (20081020152051)
  [4;36;1mSQL (86.2ms)[0m   [0;1mCREATE TABLE `section_nodes` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `section_id` int(11), `node_type` varchar(255), `node_id` int(11), `position` int(11), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20081020152051')[0m
Migrating to CreateLinks (20081031140510)
  [4;36;1mSQL (42.7ms)[0m   [0;1mCREATE TABLE `links` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `version` int(11), `lock_version` int(11) DEFAULT 0, `name` varchar(255), `url` varchar(255), `new_window` tinyint(1) DEFAULT 0, `created_at` datetime, `updated_at` datetime, `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `created_by_id` int(11), `updated_by_id` int(11)) [0m
  [4;35;1mSQL (66.5ms)[0m   [0mCREATE TABLE `link_versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `link_id` int(11), `version` int(11), `name` varchar(255), `url` varchar(255), `new_window` tinyint(1) DEFAULT 0, `created_at` datetime, `updated_at` datetime, `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `version_comment` varchar(255), `created_by_id` int(11), `updated_by_id` int(11)) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20081031140510')[0m
Migrating to CreateTags (20081031140511)
  [4;35;1mSQL (107.7ms)[0m   [0mCREATE TABLE `tags` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`name` = 'Categorization') LIMIT 1[0m
  [4;36;1mContentType Create (0.3ms)[0m   [0;1mINSERT INTO `content_types` (`name`, `updated_at`, `priority`, `content_type_group_id`, `created_at`) VALUES('Tag', '2009-05-16 11:55:47', 2, 2, '2009-05-16 11:55:47')[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20081031140511')[0m
Migrating to CreateTaggings (20081031140512)
  [4;35;1mSQL (102.1ms)[0m   [0mCREATE TABLE `taggings` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `tag_id` int(11), `taggable_id` int(11), `taggable_type` varchar(255), `taggable_version` int(11), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20081031140512')[0m
Migrating to LoadSeedData (20081114172307)
  [4;35;1mUser Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Exists (13.8ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'cmsadmin') LIMIT 1[0m
  [4;36;1mUser Create (0.3ms)[0m   [0;1mINSERT INTO `users` (`salt`, `updated_at`, `expires_at`, `crypted_password`, `remember_token_expires_at`, `remember_token`, `first_name`, `login`, `last_name`, `email`, `created_at`) VALUES('5748dc619d0cd0b927e5f97fb825638766729171', '2009-05-16 11:55:47', NULL, '519cfd57fb1a91b52caa1908c49f7dda02833226', NULL, NULL, 'CMS', 'cmsadmin', 'Administrator', 'cmsadmin@example.com', '2009-05-16 11:55:47')[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mPermission Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPermission Exists (0.2ms)[0m   [0;1mSELECT `permissions`.id FROM `permissions` WHERE (`permissions`.`name` = BINARY 'administrate') LIMIT 1[0m
  [4;35;1mPermission Create (0.2ms)[0m   [0mINSERT INTO `permissions` (`name`, `updated_at`, `description`, `for_module`, `full_name`, `created_at`) VALUES('administrate', '2009-05-16 11:55:47', 'Allows users to administer the CMS, including adding users and groups.', NULL, 'Administer CMS', '2009-05-16 11:55:47')[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPermission Exists (0.2ms)[0m   [0;1mSELECT `permissions`.id FROM `permissions` WHERE (`permissions`.`name` = BINARY 'edit_content') LIMIT 1[0m
  [4;35;1mPermission Create (0.2ms)[0m   [0mINSERT INTO `permissions` (`name`, `updated_at`, `description`, `for_module`, `full_name`, `created_at`) VALUES('edit_content', '2009-05-16 11:55:47', 'Allows users to Add, Edit and Delete both Pages and Blocks. Can Save (but not Publish) and Assign them as well.', NULL, 'Edit Content', '2009-05-16 11:55:47')[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPermission Exists (0.2ms)[0m   [0;1mSELECT `permissions`.id FROM `permissions` WHERE (`permissions`.`name` = BINARY 'publish_content') LIMIT 1[0m
  [4;35;1mPermission Create (0.2ms)[0m   [0mINSERT INTO `permissions` (`name`, `updated_at`, `description`, `for_module`, `full_name`, `created_at`) VALUES('publish_content', '2009-05-16 11:55:47', 'Allows users to Save and Publish, Hide and Archive both Pages and Blocks.', NULL, 'Publish Content', '2009-05-16 11:55:47')[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mGroupType Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `group_types`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGroupType Create (0.2ms)[0m   [0mINSERT INTO `group_types` (`name`, `updated_at`, `cms_access`, `guest`, `created_at`) VALUES('Guest', '2009-05-16 11:55:47', 0, 1, '2009-05-16 11:55:47')[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGroupType Create (0.2ms)[0m   [0;1mINSERT INTO `group_types` (`name`, `updated_at`, `cms_access`, `guest`, `created_at`) VALUES('Registered Public User', '2009-05-16 11:55:48', 0, 0, '2009-05-16 11:55:48')[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGroupType Create (0.2ms)[0m   [0mINSERT INTO `group_types` (`name`, `updated_at`, `cms_access`, `guest`, `created_at`) VALUES('CMS User', '2009-05-16 11:55:48', 1, 0, '2009-05-16 11:55:48')[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mGroupType Load (0.3ms)[0m   [0mSELECT * FROM `group_types` WHERE (`group_types`.`id` = 3) [0m
  [4;36;1mPermission Load (0.3ms)[0m   [0;1mSELECT * FROM `permissions` WHERE (`permissions`.`id` = 2) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGroupTypePermission Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `group_type_permissions`[0m
  [4;35;1mGroupTypePermission Create (0.2ms)[0m   [0mINSERT INTO `group_type_permissions` (`group_type_id`, `permission_id`) VALUES(3, 2)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mGroupType Load (0.2ms)[0m   [0mSELECT * FROM `group_types` WHERE (`group_types`.`id` = 3) [0m
  [4;36;1mPermission Load (0.2ms)[0m   [0;1mSELECT * FROM `permissions` WHERE (`permissions`.`id` = 3) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGroupTypePermission Create (0.3ms)[0m   [0;1mINSERT INTO `group_type_permissions` (`group_type_id`, `permission_id`) VALUES(3, 3)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mGroupType Load (0.2ms)[0m   [0;1mSELECT * FROM `group_types` WHERE (`group_types`.`id` = 1) [0m
  [4;35;1mGroup Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `groups`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGroup Create (0.2ms)[0m   [0mINSERT INTO `groups` (`name`, `group_type_id`, `updated_at`, `code`, `created_at`) VALUES('Guest', 1, '2009-05-16 11:55:48', 'guest', '2009-05-16 11:55:48')[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mGroupType Load (0.3ms)[0m   [0mSELECT * FROM `group_types` WHERE (`group_types`.`id` = 3) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGroup Create (0.2ms)[0m   [0mINSERT INTO `groups` (`name`, `group_type_id`, `updated_at`, `code`, `created_at`) VALUES('Cms Administrators', 3, '2009-05-16 11:55:48', 'cms-admin', '2009-05-16 11:55:48')[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mGroupType Load (0.3ms)[0m   [0mSELECT * FROM `group_types` WHERE (`group_types`.`id` = 3) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGroup Create (0.2ms)[0m   [0mINSERT INTO `groups` (`name`, `group_type_id`, `updated_at`, `code`, `created_at`) VALUES('Content Editors', 3, '2009-05-16 11:55:48', 'content-editor', '2009-05-16 11:55:48')[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) [0m
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `groups` WHERE (`groups`.`id` = 2) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mUserGroupMembership Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `user_group_memberships`[0m
  [4;35;1mUserGroupMembership Create (0.2ms)[0m   [0mINSERT INTO `user_group_memberships` (`group_id`, `user_id`) VALUES(2, 1)[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) [0m
  [4;36;1mGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `groups` WHERE (`groups`.`id` = 3) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mUserGroupMembership Create (0.2ms)[0m   [0;1mINSERT INTO `user_group_memberships` (`group_id`, `user_id`) VALUES(3, 1)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `groups` WHERE (`groups`.`id` = 2) [0m
  [4;35;1mPermission Load (0.3ms)[0m   [0mSELECT * FROM `permissions` WHERE (`permissions`.`id` = 1) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGroupPermission Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `group_permissions`[0m
  [4;36;1mGroupPermission Exists (0.3ms)[0m   [0;1mSELECT `group_permissions`.id FROM `group_permissions` WHERE (`group_permissions`.`permission_id` = 1 AND `group_permissions`.group_id = 2) LIMIT 1[0m
  [4;35;1mGroupPermission Create (0.2ms)[0m   [0mINSERT INTO `group_permissions` (`permission_id`, `group_id`) VALUES(1, 2)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mGroup Load (0.2ms)[0m   [0mSELECT * FROM `groups` WHERE (`groups`.`id` = 3) [0m
  [4;36;1mPermission Load (0.2ms)[0m   [0;1mSELECT * FROM `permissions` WHERE (`permissions`.`id` = 2) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGroupPermission Exists (0.2ms)[0m   [0;1mSELECT `group_permissions`.id FROM `group_permissions` WHERE (`group_permissions`.`permission_id` = 2 AND `group_permissions`.group_id = 3) LIMIT 1[0m
  [4;35;1mGroupPermission Create (0.1ms)[0m   [0mINSERT INTO `group_permissions` (`permission_id`, `group_id`) VALUES(2, 3)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mGroup Load (0.2ms)[0m   [0mSELECT * FROM `groups` WHERE (`groups`.`id` = 3) [0m
  [4;36;1mPermission Load (0.2ms)[0m   [0;1mSELECT * FROM `permissions` WHERE (`permissions`.`id` = 3) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGroupPermission Exists (0.2ms)[0m   [0;1mSELECT `group_permissions`.id FROM `group_permissions` WHERE (`group_permissions`.`permission_id` = 3 AND `group_permissions`.group_id = 3) LIMIT 1[0m
  [4;35;1mGroupPermission Create (0.1ms)[0m   [0mINSERT INTO `group_permissions` (`permission_id`, `group_id`) VALUES(3, 3)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSite Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `sites`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSite Exists (0.2ms)[0m   [0mSELECT `sites`.id FROM `sites` WHERE (`sites`.`domain` = BINARY 'example.com') LIMIT 1[0m
  [4;36;1mSite Create (0.2ms)[0m   [0;1mINSERT INTO `sites` (`name`, `the_default`, `updated_at`, `domain`, `created_at`) VALUES('Default', NULL, '2009-05-16 11:55:48', 'example.com', '2009-05-16 11:55:48')[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM `sites` WHERE (`sites`.`the_default` = 1) [0m
  [4;36;1mSite Update (0.2ms)[0m   [0;1mUPDATE `sites` SET the_default = 0 [0m
  [4;35;1mSite Update (0.2ms)[0m   [0mUPDATE `sites` SET `created_at` = '2009-05-16 11:55:48', `domain` = 'example.com', `the_default` = 1, `updated_at` = '2009-05-16 11:55:48', `name` = 'Default' WHERE `id` = 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM `sites` WHERE (`sites`.`the_default` = 1) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSection Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `sections`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSection Create (0.2ms)[0m   [0;1mINSERT INTO `sections` (`name`, `updated_at`, `root`, `path`, `hidden`, `created_at`) VALUES('My Site', '2009-05-16 11:55:48', 1, '/', 0, '2009-05-16 11:55:48')[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSectionNode Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `section_nodes`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSection Create (0.2ms)[0m   [0mINSERT INTO `sections` (`name`, `updated_at`, `root`, `path`, `hidden`, `created_at`) VALUES('system', '2009-05-16 11:55:48', 0, '/system', 1, '2009-05-16 11:55:48')[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (section_id = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mSectionNode Create (0.1ms)[0m   [0mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Section', '2009-05-16 11:55:48', 1, 2, 1, '2009-05-16 11:55:48')[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mGroup Load (0.2ms)[0m   [0mSELECT * FROM `groups` [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` [0m
  [4;35;1mSection Load (0.6ms)[0m   [0mSELECT `sections`.* FROM `sections` INNER JOIN `group_sections` ON `sections`.id = `group_sections`.section_id WHERE ((`group_sections`.group_id = 1)) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGroupSection Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `group_sections`[0m
  [4;36;1mGroupSection Create (0.7ms)[0m   [0;1mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(1, 1)[0m
  [4;35;1mGroupSection Create (0.1ms)[0m   [0mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(2, 1)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT `sections`.* FROM `sections` INNER JOIN `group_sections` ON `sections`.id = `group_sections`.section_id WHERE ((`group_sections`.group_id = 2)) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGroupSection Create (0.2ms)[0m   [0;1mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(1, 2)[0m
  [4;35;1mGroupSection Create (0.2ms)[0m   [0mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(2, 2)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT `sections`.* FROM `sections` INNER JOIN `group_sections` ON `sections`.id = `group_sections`.section_id WHERE ((`group_sections`.group_id = 3)) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGroupSection Create (0.2ms)[0m   [0;1mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(1, 3)[0m
  [4;35;1mGroupSection Create (0.1ms)[0m   [0mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(2, 3)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSection Load (0.3ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mPage Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `pages`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/') AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `page_versions`[0m
  [4;36;1mConnector Load (0.5ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 0) AND (`connectors`.page_id = NULL)) AND (`connectors`.page_id = NULL)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mPage Create (20.2ms)[0m   [0mINSERT INTO `pages` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `description`, `archived`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 0, 0, 1, 1, NULL, 0, 0, '/', NULL, 1, 0, '2009-05-16 11:55:48')[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = NULL) [0m
  [4;35;1mPage::Version Create (0.2ms)[0m   [0mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 0, 1, 1, 1, NULL, 0, 'Created', 0, '/', NULL, 1, 0, '2009-05-16 11:55:48')[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = NULL) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mSectionNode Load (8.6ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (section_id = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mSectionNode Create (16.6ms)[0m   [0;1mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Page', '2009-05-16 11:55:48', 1, 1, 2, '2009-05-16 11:55:48')[0m
  [4;35;1mSQL (1.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/system/not_found') AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 0) AND (`connectors`.page_id = NULL)) AND (`connectors`.page_id = NULL)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage Create (0.2ms)[0m   [0;1mINSERT INTO `pages` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `description`, `archived`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Page Not Found', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 0, 0, 1, 1, NULL, 0, 0, '/system/not_found', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = NULL) [0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Page Not Found', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 0, 2, 1, 1, NULL, 0, 'Created', 0, '/system/not_found', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;35;1mConnector Load (0.2ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = NULL) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (section_id = 2) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mSectionNode Create (0.2ms)[0m   [0mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Page', '2009-05-16 11:55:48', 2, 2, 1, '2009-05-16 11:55:48')[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Update (0.2ms)[0m   [0mUPDATE `page_versions` SET `published` = 1, `updated_at` = '2009-05-16 11:55:48' WHERE `id` = 2[0m
  [4;36;1mPage Publish (0.2ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 1, `deleted` = 0, `version` = 1, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 1, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/system/not_found', `name` = 'Page Not Found' WHERE `id` = 2[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 2)) AND (`connectors`.page_id = 2)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/system/access_denied') AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 0) AND (`connectors`.page_id = NULL)) AND (`connectors`.page_id = NULL)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage Create (0.2ms)[0m   [0;1mINSERT INTO `pages` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `description`, `archived`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Access Denied', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 0, 0, 1, 1, NULL, 0, 0, '/system/access_denied', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = NULL) [0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Access Denied', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 0, 3, 1, 1, NULL, 0, 'Created', 0, '/system/access_denied', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = NULL) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (section_id = 2) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mSectionNode Create (0.2ms)[0m   [0mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Page', '2009-05-16 11:55:48', 2, 3, 2, '2009-05-16 11:55:48')[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Update (0.2ms)[0m   [0mUPDATE `page_versions` SET `published` = 1, `updated_at` = '2009-05-16 11:55:48' WHERE `id` = 3[0m
  [4;36;1mPage Publish (0.2ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 1, `deleted` = 0, `version` = 1, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 1, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/system/access_denied', `name` = 'Access Denied' WHERE `id` = 3[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.2ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 3)) AND (`connectors`.page_id = 3)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/system/server_error') AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 0) AND (`connectors`.page_id = NULL)) AND (`connectors`.page_id = NULL)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage Create (0.2ms)[0m   [0;1mINSERT INTO `pages` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `description`, `archived`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Server Error', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 0, 0, 1, 1, NULL, 0, 0, '/system/server_error', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = NULL) [0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Server Error', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 0, 4, 1, 1, NULL, 0, 'Created', 0, '/system/server_error', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = NULL) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (section_id = 2) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mSectionNode Create (0.2ms)[0m   [0mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Page', '2009-05-16 11:55:48', 2, 4, 3, '2009-05-16 11:55:48')[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Update (0.2ms)[0m   [0mUPDATE `page_versions` SET `published` = 1, `updated_at` = '2009-05-16 11:55:48' WHERE `id` = 4[0m
  [4;36;1mPage Publish (0.2ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 1, `deleted` = 0, `version` = 1, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 1, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/system/server_error', `name` = 'Server Error' WHERE `id` = 4[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.2ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 4)) AND (`connectors`.page_id = 4)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mHtmlBlock Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `html_blocks`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mHtmlBlock::Version Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `html_block_versions`[0m
  [4;35;1mHtmlBlock Create (0.3ms)[0m   [0mINSERT INTO `html_blocks` (`name`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `archived`, `content`, `deleted`, `created_at`) VALUES('Page Not Found', '2009-05-16 11:55:48', 1, 0, 0, 1, 1, 0, '<p>The page you tried to access does not exist on this server.</p>', 0, '2009-05-16 11:55:48')[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = NULL) [0m
  [4;35;1mHtmlBlock::Version Create (0.2ms)[0m   [0mINSERT INTO `html_block_versions` (`name`, `html_block_id`, `updated_at`, `updated_by_id`, `published`, `created_by_id`, `version`, `archived`, `version_comment`, `content`, `deleted`, `created_at`) VALUES('Page Not Found', 1, '2009-05-16 11:55:48', 1, 0, 1, 1, 0, 'Created', '<p>The page you tried to access does not exist on this server.</p>', 0, '2009-05-16 11:55:48')[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `connectors`[0m
  [4;36;1mPage Load Including Associations (0.4ms)[0m   [0;1mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0)) [0m
  [4;35;1mTagging Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `taggings`[0m
  [4;36;1mTag Load (0.5ms)[0m   [0;1mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.id = `taggings`.tag_id WHERE ((`taggings`.taggable_type = 'HtmlBlock') AND (`taggings`.taggable_id = 1)) ORDER BY tags.name[0m
  [4;35;1mTagging Load (0.2ms)[0m   [0mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 1 AND `taggings`.taggable_type = 'HtmlBlock') [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Update (0.2ms)[0m   [0mUPDATE `html_block_versions` SET `published` = 1, `updated_at` = '2009-05-16 11:55:48' WHERE `id` = 1[0m
  [4;36;1mHtmlBlock Publish (0.2ms)[0m   [0;1mUPDATE `html_blocks` SET `deleted` = 0, `content` = '<p>The page you tried to access does not exist on this server.</p>', `version` = 1, `published` = 1, `archived` = 0, `name` = 'Page Not Found' WHERE `id` = 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/system/not_found' AND `pages`.id <> 2) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 2)) AND (`connectors`.page_id = 2)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mPage::Version Create (0.2ms)[0m   [0mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Page Not Found', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 1, 2, 1, 2, NULL, 0, 'Html Block \'Page Not Found\' was added to the \'main\' container', 0, '/system/not_found', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 2 and connectors.page_version = 2 and connectors.container = 'main') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 2, 'main', '2009-05-16 11:55:48', 2, 1, 1, 'HtmlBlock', '2009-05-16 11:55:48')[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Publish (0.3ms)[0m   [0mUPDATE `pages` SET `hidden` = 1, `deleted` = 0, `version` = 2, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 1, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/system/not_found', `name` = 'Page Not Found' WHERE `id` = 2[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 2)) AND (`connectors`.page_id = 2)) ORDER BY position, connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mHtmlBlock Create (0.2ms)[0m   [0;1mINSERT INTO `html_blocks` (`name`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `archived`, `content`, `deleted`, `created_at`) VALUES('Access Denied', '2009-05-16 11:55:48', 1, 0, 0, 1, 1, 0, '<p>You have tried to reach a resource or page which you do not have permission to view.</p>', 0, '2009-05-16 11:55:48')[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = NULL) [0m
  [4;36;1mHtmlBlock::Version Create (0.2ms)[0m   [0;1mINSERT INTO `html_block_versions` (`name`, `html_block_id`, `updated_at`, `updated_by_id`, `published`, `created_by_id`, `version`, `archived`, `version_comment`, `content`, `deleted`, `created_at`) VALUES('Access Denied', 2, '2009-05-16 11:55:48', 1, 0, 1, 1, 0, 'Created', '<p>You have tried to reach a resource or page which you do not have permission to view.</p>', 0, '2009-05-16 11:55:48')[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage Load Including Associations (0.4ms)[0m   [0;1mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0)) [0m
  [4;35;1mTag Load (0.3ms)[0m   [0mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.id = `taggings`.tag_id WHERE ((`taggings`.taggable_type = 'HtmlBlock') AND (`taggings`.taggable_id = 2)) ORDER BY tags.name[0m
  [4;36;1mTagging Load (0.2ms)[0m   [0;1mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 2 AND `taggings`.taggable_type = 'HtmlBlock') [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Update (0.3ms)[0m   [0;1mUPDATE `html_block_versions` SET `published` = 1, `updated_at` = '2009-05-16 11:55:48' WHERE `id` = 2[0m
  [4;35;1mHtmlBlock Publish (0.2ms)[0m   [0mUPDATE `html_blocks` SET `deleted` = 0, `content` = '<p>You have tried to reach a resource or page which you do not have permission to view.</p>', `version` = 1, `published` = 1, `archived` = 0, `name` = 'Access Denied' WHERE `id` = 2[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/system/access_denied' AND `pages`.id <> 3) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 3)) AND (`connectors`.page_id = 3)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Access Denied', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 1, 3, 1, 2, NULL, 0, 'Html Block \'Access Denied\' was added to the \'main\' container', 0, '/system/access_denied', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.2ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 3 and connectors.page_version = 2 and connectors.container = 'main') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(2, 2, 'main', '2009-05-16 11:55:48', 3, 1, 1, 'HtmlBlock', '2009-05-16 11:55:48')[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage Publish (0.2ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 1, `deleted` = 0, `version` = 2, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 1, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/system/access_denied', `name` = 'Access Denied' WHERE `id` = 3[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 3)) AND (`connectors`.page_id = 3)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mHtmlBlock Create (0.2ms)[0m   [0mINSERT INTO `html_blocks` (`name`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `archived`, `content`, `deleted`, `created_at`) VALUES('Server Error', '2009-05-16 11:55:48', 1, 0, 0, 1, 1, 0, '<p>The server encountered an unexpected condition that prevented it from fulfilling the request.</p>', 0, '2009-05-16 11:55:48')[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = NULL) [0m
  [4;35;1mHtmlBlock::Version Create (0.2ms)[0m   [0mINSERT INTO `html_block_versions` (`name`, `html_block_id`, `updated_at`, `updated_by_id`, `published`, `created_by_id`, `version`, `archived`, `version_comment`, `content`, `deleted`, `created_at`) VALUES('Server Error', 3, '2009-05-16 11:55:48', 1, 0, 1, 1, 0, 'Created', '<p>The server encountered an unexpected condition that prevented it from fulfilling the request.</p>', 0, '2009-05-16 11:55:48')[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Load Including Associations (0.4ms)[0m   [0mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0)) [0m
  [4;36;1mTag Load (0.3ms)[0m   [0;1mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.id = `taggings`.tag_id WHERE ((`taggings`.taggable_type = 'HtmlBlock') AND (`taggings`.taggable_id = 3)) ORDER BY tags.name[0m
  [4;35;1mTagging Load (0.2ms)[0m   [0mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 3 AND `taggings`.taggable_type = 'HtmlBlock') [0m
  [4;36;1mHtmlBlock::Version Load (1.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Update (0.2ms)[0m   [0mUPDATE `html_block_versions` SET `published` = 1, `updated_at` = '2009-05-16 11:55:48' WHERE `id` = 3[0m
  [4;36;1mHtmlBlock Publish (0.2ms)[0m   [0;1mUPDATE `html_blocks` SET `deleted` = 0, `content` = '<p>The server encountered an unexpected condition that prevented it from fulfilling the request.</p>', `version` = 1, `published` = 1, `archived` = 0, `name` = 'Server Error' WHERE `id` = 3[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/system/server_error' AND `pages`.id <> 4) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 4)) AND (`connectors`.page_id = 4)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mPage::Version Create (0.2ms)[0m   [0mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Server Error', '2009-05-16 11:55:48', NULL, 'default.html.erb', NULL, 1, 1, 4, 1, 2, NULL, 0, 'Html Block \'Server Error\' was added to the \'main\' container', 0, '/system/server_error', NULL, 1, 1, '2009-05-16 11:55:48')[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 4 and connectors.page_version = 2 and connectors.container = 'main') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(3, 2, 'main', '2009-05-16 11:55:48', 4, 1, 1, 'HtmlBlock', '2009-05-16 11:55:48')[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Publish (0.2ms)[0m   [0mUPDATE `pages` SET `hidden` = 1, `deleted` = 0, `version` = 2, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 1, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/system/server_error', `name` = 'Server Error' WHERE `id` = 4[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 4)) AND (`connectors`.page_id = 4)) ORDER BY position, connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPageTemplate Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `dynamic_views` WHERE (`dynamic_views`.`name` = BINARY 'default' AND `dynamic_views`.format = 'html' AND `dynamic_views`.handler = 'erb') AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;36;1mPageTemplate::Version Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_view_versions`[0m
  [4;35;1mPageTemplate Create (0.8ms)[0m   [0mINSERT INTO `dynamic_views` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `handler`, `published`, `lock_version`, `type`, `created_by_id`, `version`, `archived`, `deleted`, `created_at`) VALUES('default', 'html', '2009-05-16 11:55:48', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n <head>\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\n <title><%= page_title %></title>\n <%= yield :html_head %>\n </head>\n <body style=\"margin: 0; padding: 0; text-align: center;\">\n <%= cms_toolbar %>\n <div id=\"wrapper\" style=\"width: 700px; margin: 0 auto; text-align: left; padding: 30px\">\n Breadcrumbs: <%= render_breadcrumbs %>\n Main Menu: <%= render_menu %>\n <h1><%= @page_title %></h1>\n <p>BrowserCMS has been installed successfully.</p> \n\n <h2>Getting Started</h2>\n <p>To start building your site, you can either <%= link_to \"alter this template\", edit_cms_page_template_path(PageTemplate.find_by_file_name(\"default.html.erb\")) %> or <%= link_to \"create a new one\", new_cms_page_template_path %>. You will be prompted to login with the credentials provided during the install process. To change which template the pages use, you can click the \'Edit Properties\' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>\n\n <%= container :main %>\n </div>\n </body>\n</html>\n', 1, 'erb', 0, 0, 'PageTemplate', 1, 1, 0, 0, '2009-05-16 11:55:48')[0m
  [4;36;1mPageTemplate::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = NULL) [0m
  [4;35;1mPageTemplate::Version Create (0.3ms)[0m   [0mINSERT INTO `dynamic_view_versions` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `dynamic_view_id`, `handler`, `published`, `type`, `created_by_id`, `version`, `archived`, `version_comment`, `deleted`, `created_at`) VALUES('default', 'html', '2009-05-16 11:55:48', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n <head>\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\n <title><%= page_title %></title>\n <%= yield :html_head %>\n </head>\n <body style=\"margin: 0; padding: 0; text-align: center;\">\n <%= cms_toolbar %>\n <div id=\"wrapper\" style=\"width: 700px; margin: 0 auto; text-align: left; padding: 30px\">\n Breadcrumbs: <%= render_breadcrumbs %>\n Main Menu: <%= render_menu %>\n <h1><%= @page_title %></h1>\n <p>BrowserCMS has been installed successfully.</p> \n\n <h2>Getting Started</h2>\n <p>To start building your site, you can either <%= link_to \"alter this template\", edit_cms_page_template_path(PageTemplate.find_by_file_name(\"default.html.erb\")) %> or <%= link_to \"create a new one\", new_cms_page_template_path %>. You will be prompted to login with the credentials provided during the install process. To change which template the pages use, you can click the \'Edit Properties\' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>\n\n <%= container :main %>\n </div>\n </body>\n</html>\n', 1, 1, 'erb', 0, NULL, 1, 1, 0, 'Created', 0, '2009-05-16 11:55:48')[0m
  [4;36;1mPageTemplate::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate::Version Update (0.2ms)[0m   [0mUPDATE `dynamic_view_versions` SET `published` = 1, `updated_at` = '2009-05-16 11:55:48' WHERE `id` = 1[0m
  [4;36;1mPageTemplate Publish (0.2ms)[0m   [0;1mUPDATE `dynamic_views` SET `deleted` = 0, `handler` = 'erb', `version` = 1, `body` = '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n <head>\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\n <title><%= page_title %></title>\n <%= yield :html_head %>\n </head>\n <body style=\"margin: 0; padding: 0; text-align: center;\">\n <%= cms_toolbar %>\n <div id=\"wrapper\" style=\"width: 700px; margin: 0 auto; text-align: left; padding: 30px\">\n Breadcrumbs: <%= render_breadcrumbs %>\n Main Menu: <%= render_menu %>\n <h1><%= @page_title %></h1>\n <p>BrowserCMS has been installed successfully.</p> \n\n <h2>Getting Started</h2>\n <p>To start building your site, you can either <%= link_to \"alter this template\", edit_cms_page_template_path(PageTemplate.find_by_file_name(\"default.html.erb\")) %> or <%= link_to \"create a new one\", new_cms_page_template_path %>. You will be prompted to login with the credentials provided during the install process. To change which template the pages use, you can click the \'Edit Properties\' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>\n\n <%= container :main %>\n </div>\n </body>\n</html>\n', `published` = 1, `archived` = 0, `format` = 'html', `name` = 'default' WHERE `id` = 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Update (0.3ms)[0m   [0mUPDATE `page_versions` SET `published` = 1, `updated_at` = '2009-05-16 11:55:48' WHERE `id` = 1[0m
  [4;36;1mPage Publish (0.2ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 1, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 1, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/', `name` = 'Home' WHERE `id` = 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20081114172307')[0m
Migrating to CreateEmailMessages (20090130171546)
  [4;35;1mSQL (59.5ms)[0m   [0mCREATE TABLE `email_messages` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `sender` varchar(255), `recipients` text, `subject` text, `cc` text, `bcc` text, `body` text, `content_type` varchar(255), `delivered_at` datetime, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090130171546')[0m
Migrating to CreateTasks (20090212164201)
  [4;35;1mSQL (125.8ms)[0m   [0mCREATE TABLE `tasks` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `assigned_by_id` int(11), `assigned_to_id` int(11), `page_id` int(11), `comment` text, `due_date` date, `completed_at` datetime, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090212164201')[0m
Migrating to CreatePageRoutes (20090410193133)
  [4;35;1mSQL (96.3ms)[0m   [0mCREATE TABLE `page_routes` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `pattern` varchar(255), `page_id` int(11), `code` text, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090410193133')[0m
Migrating to CreatePageRouteOptions (20090410193312)
  [4;35;1mSQL (106.6ms)[0m   [0mCREATE TABLE `page_route_options` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `page_route_id` int(11), `type` varchar(255), `name` varchar(255), `value` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090410193312')[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (1.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mSHOW FIELDS FROM `attachment_versions`[0m
  [4;35;1mSQL (2.5ms)[0m   [0mdescribe `attachment_versions`[0m
  [4;36;1mSQL (18.7ms)[0m   [0;1mSHOW KEYS FROM `attachment_versions`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW FIELDS FROM `attachments`[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mdescribe `attachments`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `attachments`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `categories`[0m
  [4;35;1mSQL (1.6ms)[0m   [0mdescribe `categories`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW KEYS FROM `categories`[0m
  [4;35;1mSQL (1.4ms)[0m   [0mSHOW FIELDS FROM `category_types`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mdescribe `category_types`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `category_types`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `connectors`[0m
  [4;35;1mSQL (2.1ms)[0m   [0mdescribe `connectors`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `connectors`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `content_type_groups`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mdescribe `content_type_groups`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `content_type_groups`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `content_types`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mdescribe `content_types`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `content_types`[0m
  [4;35;1mSQL (1.4ms)[0m   [0mSHOW FIELDS FROM `dynamic_view_versions`[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mdescribe `dynamic_view_versions`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW KEYS FROM `dynamic_view_versions`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mSQL (2.5ms)[0m   [0mdescribe `dynamic_views`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `dynamic_views`[0m
  [4;35;1mSQL (1.8ms)[0m   [0mSHOW FIELDS FROM `email_messages`[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mdescribe `email_messages`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `email_messages`[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mSHOW FIELDS FROM `file_block_versions`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mdescribe `file_block_versions`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `file_block_versions`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mSHOW FIELDS FROM `file_blocks`[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mdescribe `file_blocks`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `file_blocks`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `group_permissions`[0m
  [4;35;1mSQL (1.6ms)[0m   [0mdescribe `group_permissions`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `group_permissions`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `group_sections`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mdescribe `group_sections`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW KEYS FROM `group_sections`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `group_type_permissions`[0m
  [4;35;1mSQL (1.6ms)[0m   [0mdescribe `group_type_permissions`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW KEYS FROM `group_type_permissions`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `group_types`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mdescribe `group_types`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW KEYS FROM `group_types`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `groups`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mdescribe `groups`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW KEYS FROM `groups`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mSHOW FIELDS FROM `html_block_versions`[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mdescribe `html_block_versions`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW KEYS FROM `html_block_versions`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `html_blocks`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mdescribe `html_blocks`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `html_blocks`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW FIELDS FROM `link_versions`[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mdescribe `link_versions`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW KEYS FROM `link_versions`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW FIELDS FROM `links`[0m
  [4;35;1mSQL (2.9ms)[0m   [0mdescribe `links`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW KEYS FROM `links`[0m
  [4;35;1mSQL (1.6ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mdescribe `page_route_options`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW KEYS FROM `page_route_options`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW FIELDS FROM `page_routes`[0m
  [4;35;1mSQL (2.5ms)[0m   [0mdescribe `page_routes`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW KEYS FROM `page_routes`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW FIELDS FROM `page_versions`[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mdescribe `page_versions`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW KEYS FROM `page_versions`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW FIELDS FROM `pages`[0m
  [4;35;1mSQL (3.4ms)[0m   [0mdescribe `pages`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW KEYS FROM `pages`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mdescribe `permissions`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `permissions`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `portlet_attributes`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mdescribe `portlet_attributes`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW KEYS FROM `portlet_attributes`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mdescribe `portlets`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `portlets`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `redirects`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mdescribe `redirects`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `redirects`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `section_nodes`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mdescribe `section_nodes`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `section_nodes`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `sections`[0m
  [4;35;1mSQL (1.8ms)[0m   [0mdescribe `sections`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW KEYS FROM `sections`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `sites`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mdescribe `sites`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW KEYS FROM `sites`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `taggings`[0m
  [4;35;1mSQL (2.2ms)[0m   [0mdescribe `taggings`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW KEYS FROM `taggings`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `tags`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mdescribe `tags`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `tags`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW FIELDS FROM `tasks`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mdescribe `tasks`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW KEYS FROM `tasks`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `user_group_memberships`[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mdescribe `user_group_memberships`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `user_group_memberships`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mSQL (2.8ms)[0m   [0mdescribe `users`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW KEYS FROM `users`[0m
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (29.1ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (0.2ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (0.2ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 15:56:53) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mGuestUser Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `groups`[0m
  [4;36;1mGroup Load (0.4ms)[0m   [0;1mSELECT * FROM `groups` WHERE (`groups`.`code` = 'guest') LIMIT 1[0m
  [4;35;1mPermission Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (31.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
  [4;35;1mRedirect Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `redirects`[0m
  [4;36;1mRedirect Load (0.5ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
..... Displaying live version of page
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND ((((`pages`.`published` = 1 AND `pages`.`archived` = 0)) AND (pages.deleted = 0)) AND ((`pages`.`published` = 1 AND `pages`.`archived` = 0))) LIMIT 1[0m
  [4;35;1mPage Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `pages`[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSectionNode Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `section_nodes`[0m
  [4;36;1mSection Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `sections`[0m
  [4;35;1mSection Load (0.4ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Exists (0.2ms)[0m   [0;1mSELECT `sections`.id FROM `sections` INNER JOIN `group_sections` ON `sections`.id = `group_sections`.section_id WHERE (`sections`.`id` = 1) AND ((`group_sections`.group_id = 1)) LIMIT 1[0m
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (((`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb') AND (dynamic_views.deleted = 0)) AND (`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb')) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) LIMIT 1[0m
Completed in 262ms (View: 20, DB: 47) | 200 OK [http://localhost.dev/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 15:56:58) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT * FROM `groups` WHERE (`groups`.`code` = 'guest') LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
  [4;35;1mRedirect Load (0.1ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
..... Displaying live version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND ((((`pages`.`published` = 1 AND `pages`.`archived` = 0)) AND (pages.deleted = 0)) AND ((`pages`.`published` = 1 AND `pages`.`archived` = 0))) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Exists (0.2ms)[0m   [0;1mSELECT `sections`.id FROM `sections` INNER JOIN `group_sections` ON `sections`.id = `group_sections`.section_id WHERE (`sections`.`id` = 1) AND ((`group_sections`.group_id = 1)) LIMIT 1[0m
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.1ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (((`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb') AND (dynamic_views.deleted = 0)) AND (`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb')) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) LIMIT 1[0m
Completed in 15ms (View: 7, DB: 3) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HomeController#index (for 127.0.0.1 at 2009-05-16 15:57:11) [GET]
Redirected to http://localhost:3000/cms/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 1ms (DB: 0) | 302 Found [http://localhost/cms]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SessionsController#new (for 127.0.0.1 at 2009-05-16 15:57:11) [GET]
Rendering template within layouts/cms/login
Rendering cms/sessions/new
Rendered layouts/cms/_footer (0.6ms)
Completed in 20ms (View: 16, DB: 0) | 200 OK [http://localhost/cms/login]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SessionsController#create (for 127.0.0.1 at 2009-05-16 15:57:22) [POST]
  Parameters: {"commit"=>"LOGIN", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "login"=>"cmsadmin", "password"=>"cmsadmin"}
  [4;35;1mUser Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`login` = 'cmsadmin') LIMIT 1[0m
Redirected to http://localhost:3000/cms
Completed in 7ms (DB: 3) | 302 Found [http://localhost/cms/login]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HomeController#index (for 127.0.0.1 at 2009-05-16 15:57:22) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (24.8ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Redirected to http://localhost:3000/
Completed in 38ms (DB: 25) | 302 Found [http://localhost/cms]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 15:57:22) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `page_versions`[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.4ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPageTemplate Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (((`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb') AND (dynamic_views.deleted = 0)) AND (`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb')) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) LIMIT 1[0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 159ms (View: 77, DB: 7) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 15:57:22) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.5ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (2.3ms)
Rendered layouts/_cms_toolbar (2.7ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 15:57:23) [GET]
  Parameters: {"page_version"=>"1", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '1')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.5ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (34.1ms)
Completed in 61ms (View: 48, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::UsersController#index (for 127.0.0.1 at 2009-05-16 15:57:29) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mUser Load (32.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ((expires_at IS NULL OR expires_at >= '2009-05-16 13:57:29')) ORDER BY first_name, last_name, email LIMIT 0, 10[0m
  [4;35;1mUserGroupMembership Load (0.3ms)[0m   [0mSELECT `user_group_memberships`.* FROM `user_group_memberships` WHERE (`user_group_memberships`.user_id = 1) [0m
  [4;36;1mUserGroupMembership Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `user_group_memberships`[0m
Rendering template within layouts/cms/administration
Rendering cms/users/index
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT * FROM `groups` [0m
WARNING: Can't mass-assign these protected attributes: id
Rendered cms/users/_toolbar (3.2ms)
  [4;36;1mGroup Load (0.4ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `user_group_memberships` ON `groups`.id = `user_group_memberships`.group_id WHERE ((`user_group_memberships`.user_id = 1)) ORDER BY groups.name[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (1.8ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 73ms (View: 27, DB: 36) | 200 OK [http://localhost/cms/administration]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 15:57:29) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `content_types`[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 19ms (View: 4, DB: 3) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-16 15:57:33) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 40ms (View: 32, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 15:57:33) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#destroy (for 127.0.0.1 at 2009-05-16 15:57:41) [DELETE]
  Parameters: {"authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.5ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`id` = 1) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `dynamic_views` WHERE (`dynamic_views`.`name` = BINARY 'default' AND `dynamic_views`.format = 'html' AND `dynamic_views`.handler = 'erb' AND `dynamic_views`.id <> 1) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;36;1mPageTemplate::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate::Version Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `dynamic_view_versions`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate::Version Create (0.4ms)[0m   [0mINSERT INTO `dynamic_view_versions` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `dynamic_view_id`, `handler`, `published`, `type`, `created_by_id`, `version`, `archived`, `version_comment`, `deleted`, `created_at`) VALUES('default', 'html', '2009-05-16 13:57:41', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n <head>\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\n <title><%= page_title %></title>\n <%= yield :html_head %>\n </head>\n <body style=\"margin: 0; padding: 0; text-align: center;\">\n <%= cms_toolbar %>\n <div id=\"wrapper\" style=\"width: 700px; margin: 0 auto; text-align: left; padding: 30px\">\n Breadcrumbs: <%= render_breadcrumbs %>\n Main Menu: <%= render_menu %>\n <h1><%= @page_title %></h1>\n <p>BrowserCMS has been installed successfully.</p> \n\n <h2>Getting Started</h2>\n <p>To start building your site, you can either <%= link_to \"alter this template\", edit_cms_page_template_path(PageTemplate.find_by_file_name(\"default.html.erb\")) %> or <%= link_to \"create a new one\", new_cms_page_template_path %>. You will be prompted to login with the credentials provided during the install process. To change which template the pages use, you can click the \'Edit Properties\' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>\n\n <%= container :main %>\n </div>\n </body>\n</html>\n', 1, 1, 'erb', 1, NULL, 1, 2, 0, 'Changed deleted', 1, '2009-05-16 13:57:41')[0m
  [4;36;1mPageTemplate::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate Publish (0.4ms)[0m   [0mUPDATE `dynamic_views` SET `deleted` = 1, `handler` = 'erb', `version` = 2, `body` = '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n <head>\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\n <title><%= page_title %></title>\n <%= yield :html_head %>\n </head>\n <body style=\"margin: 0; padding: 0; text-align: center;\">\n <%= cms_toolbar %>\n <div id=\"wrapper\" style=\"width: 700px; margin: 0 auto; text-align: left; padding: 30px\">\n Breadcrumbs: <%= render_breadcrumbs %>\n Main Menu: <%= render_menu %>\n <h1><%= @page_title %></h1>\n <p>BrowserCMS has been installed successfully.</p> \n\n <h2>Getting Started</h2>\n <p>To start building your site, you can either <%= link_to \"alter this template\", edit_cms_page_template_path(PageTemplate.find_by_file_name(\"default.html.erb\")) %> or <%= link_to \"create a new one\", new_cms_page_template_path %>. You will be prompted to login with the credentials provided during the install process. To change which template the pages use, you can click the \'Edit Properties\' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>\n\n <%= container :main %>\n </div>\n </body>\n</html>\n', `published` = 1, `archived` = 0, `format` = 'html', `name` = 'default' WHERE `id` = 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/cms/page_templates
Completed in 55ms (DB: 5) | 302 Found [http://localhost/cms/page_templates/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-16 15:57:41) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.2ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.8ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 11ms (View: 6, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 15:57:41) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#new (for 127.0.0.1 at 2009-05-16 15:57:42) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/new
Rendered cms/form_builder/_cms_text_field (1.3ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_drop_down (2.3ms)
Rendered cms/form_builder/_cms_text_area (1.3ms)
Rendered cms/dynamic_views/_form (91.9ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 147ms (View: 143, DB: 1) | 200 OK [http://localhost/cms/page_templates/new]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 15:57:43) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#create (for 127.0.0.1 at 2009-05-16 15:59:21) [POST]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "page_template"=>{"name"=>"home", "format"=>"html", "body"=>"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n  <head>\r\n    <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n  <%= stylesheet_link_tag 'compiled/screen.css', :media => 'screen, projection' %>\r\n  <%= stylesheet_link_tag 'compiled/print.css', :media => 'print' %>\r\n\r\n\r\n    <title>Smile-Effect</title>\r\n    <%= yield :html_head %>\r\n  </head>\r\n  <body id=\"home\" class=\"home-page\">\r\n    <%= cms_toolbar %>\t\t\t\r\n  <div id=\"branding-container\">\r\n  \t<div id=\"header\">\r\n  \t\t<h1>Smile-Effect</h1>\r\n      \r\n<%= render_menu %>\r\n  \t</div>\r\n\r\n  \t<div id=\"content\">\r\n<%= container :content %>\r\n  \t</div>\r\n\r\n\r\n  \t<div id=\"quote\">\t\t\r\n<%= container :quote %>\r\n  \t</div>\r\n\t\r\n  \t<div id=\"footer\">\r\n  \t<%= container :footer %>\t\r\n  \t</div>\r\n\r\n  </div>\r\n   \r\n  </body>\r\n</html>\r\n", "handler"=>"erb"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `dynamic_views` WHERE (`dynamic_views`.`name` = BINARY 'home' AND `dynamic_views`.format = 'html' AND `dynamic_views`.handler = 'erb') AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;36;1mPageTemplate Create (0.2ms)[0m   [0;1mINSERT INTO `dynamic_views` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `handler`, `published`, `lock_version`, `type`, `created_by_id`, `version`, `archived`, `deleted`, `created_at`) VALUES('home', 'html', '2009-05-16 13:59:21', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n <head>\r\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n <%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n <%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n <title>Smile-Effect</title>\r\n <%= yield :html_head %>\r\n </head>\r\n <body id=\"home\" class=\"home-page\">\r\n <%= cms_toolbar %>			\r\n <div id=\"branding-container\">\r\n 	<div id=\"header\">\r\n 		<h1>Smile-Effect</h1>\r\n \r\n<%= render_menu %>\r\n 	</div>\r\n\r\n 	<div id=\"content\">\r\n<%= container :content %>\r\n 	</div>\r\n\r\n\r\n 	<div id=\"quote\">		\r\n<%= container :quote %>\r\n 	</div>\r\n	\r\n 	<div id=\"footer\">\r\n 	<%= container :footer %>	\r\n 	</div>\r\n\r\n </div>\r\n \r\n </body>\r\n</html>\r\n', 1, 'erb', 0, 0, 'PageTemplate', 1, 1, 0, 0, '2009-05-16 13:59:21')[0m
  [4;35;1mPageTemplate::Version Load (0.2ms)[0m   [0mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = NULL) [0m
  [4;36;1mPageTemplate::Version Create (0.2ms)[0m   [0;1mINSERT INTO `dynamic_view_versions` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `dynamic_view_id`, `handler`, `published`, `type`, `created_by_id`, `version`, `archived`, `version_comment`, `deleted`, `created_at`) VALUES('home', 'html', '2009-05-16 13:59:21', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n <head>\r\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n <%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n <%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n <title>Smile-Effect</title>\r\n <%= yield :html_head %>\r\n </head>\r\n <body id=\"home\" class=\"home-page\">\r\n <%= cms_toolbar %>			\r\n <div id=\"branding-container\">\r\n 	<div id=\"header\">\r\n 		<h1>Smile-Effect</h1>\r\n \r\n<%= render_menu %>\r\n 	</div>\r\n\r\n 	<div id=\"content\">\r\n<%= container :content %>\r\n 	</div>\r\n\r\n\r\n 	<div id=\"quote\">		\r\n<%= container :quote %>\r\n 	</div>\r\n	\r\n 	<div id=\"footer\">\r\n 	<%= container :footer %>	\r\n 	</div>\r\n\r\n </div>\r\n \r\n </body>\r\n</html>\r\n', 1, 2, 'erb', 0, NULL, 1, 1, 0, 'Created', 0, '2009-05-16 13:59:21')[0m
  [4;35;1mPageTemplate::Version Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPageTemplate::Version Update (0.2ms)[0m   [0;1mUPDATE `dynamic_view_versions` SET `published` = 1, `updated_at` = '2009-05-16 13:59:21' WHERE `id` = 3[0m
  [4;35;1mPageTemplate Publish (0.2ms)[0m   [0mUPDATE `dynamic_views` SET `deleted` = 0, `handler` = 'erb', `version` = 1, `body` = '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n <head>\r\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n <%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n <%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n <title>Smile-Effect</title>\r\n <%= yield :html_head %>\r\n </head>\r\n <body id=\"home\" class=\"home-page\">\r\n <%= cms_toolbar %>			\r\n <div id=\"branding-container\">\r\n 	<div id=\"header\">\r\n 		<h1>Smile-Effect</h1>\r\n \r\n<%= render_menu %>\r\n 	</div>\r\n\r\n 	<div id=\"content\">\r\n<%= container :content %>\r\n 	</div>\r\n\r\n\r\n 	<div id=\"quote\">		\r\n<%= container :quote %>\r\n 	</div>\r\n	\r\n 	<div id=\"footer\">\r\n 	<%= container :footer %>	\r\n 	</div>\r\n\r\n </div>\r\n \r\n </body>\r\n</html>\r\n', `published` = 1, `archived` = 0, `format` = 'html', `name` = 'home' WHERE `id` = 2[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/cms/page_templates
Completed in 15ms (DB: 3) | 302 Found [http://localhost/cms/page_templates]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-16 15:59:21) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 13ms (View: 8, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 15:59:21) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DashboardController#index (for 127.0.0.1 at 2009-05-16 15:59:39) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (((`pages`.`published` = 0) AND (pages.deleted = 0)) AND (`pages`.`published` = 0)) ORDER BY updated_at desc[0m
  [4;35;1mTask Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `tasks`[0m
  [4;36;1mTask Load Including Associations (1.5ms)[0m   [0;1mSELECT `tasks`.`id` AS t0_r0, `tasks`.`assigned_by_id` AS t0_r1, `tasks`.`assigned_to_id` AS t0_r2, `tasks`.`page_id` AS t0_r3, `tasks`.`comment` AS t0_r4, `tasks`.`due_date` AS t0_r5, `tasks`.`completed_at` AS t0_r6, `tasks`.`created_at` AS t0_r7, `tasks`.`updated_at` AS t0_r8, `pages`.`id` AS t1_r0, `pages`.`version` AS t1_r1, `pages`.`lock_version` AS t1_r2, `pages`.`name` AS t1_r3, `pages`.`title` AS t1_r4, `pages`.`path` AS t1_r5, `pages`.`template_file_name` AS t1_r6, `pages`.`description` AS t1_r7, `pages`.`keywords` AS t1_r8, `pages`.`language` AS t1_r9, `pages`.`cacheable` AS t1_r10, `pages`.`hidden` AS t1_r11, `pages`.`published` AS t1_r12, `pages`.`deleted` AS t1_r13, `pages`.`archived` AS t1_r14, `pages`.`created_by_id` AS t1_r15, `pages`.`updated_by_id` AS t1_r16, `pages`.`created_at` AS t1_r17, `pages`.`updated_at` AS t1_r18 FROM `tasks` LEFT OUTER JOIN `pages` ON `pages`.id = `tasks`.page_id WHERE (((completed_at is null) AND (`tasks`.assigned_to_id = 1)) AND (`tasks`.assigned_to_id = 1)) ORDER BY tasks.due_date desc, pages.name[0m
Rendering template within layouts/cms/dashboard
Rendering cms/dashboard/index
Rendered cms/dashboard/_page_drafts (2.8ms)
Rendered cms/dashboard/_tasks (3.1ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 39ms (View: 25, DB: 5) | 200 OK [http://localhost/cms/dashboard]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 15:59:39) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 15:59:42) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;36;1mConnector Load (0.5ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPageTemplate Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (((`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb') AND (dynamic_views.deleted = 0)) AND (`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb')) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) LIMIT 1[0m
Exception: edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}
On line #17 of tmp/views/layouts/templates/default.html.erb

    14:       <p>BrowserCMS has been installed successfully.</p> 
    15: 
    16:       <h2>Getting Started</h2>
    17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
    18: 
    19:       <%= container :main %>
    20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'
Handling Exception: 
ActionView::TemplateError (edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}) on line #17 of tmp/views/layouts/templates/default.html.erb:
14:       <p>BrowserCMS has been installed successfully.</p> 
15: 
16:       <h2>Getting Started</h2>
17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
18: 
19:       <%= container :main %>
20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'

Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 15:59:42) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DashboardController#index (for 127.0.0.1 at 2009-05-16 16:00:19) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (((`pages`.`published` = 0) AND (pages.deleted = 0)) AND (`pages`.`published` = 0)) ORDER BY updated_at desc[0m
  [4;35;1mTask Load Including Associations (2.1ms)[0m   [0mSELECT `tasks`.`id` AS t0_r0, `tasks`.`assigned_by_id` AS t0_r1, `tasks`.`assigned_to_id` AS t0_r2, `tasks`.`page_id` AS t0_r3, `tasks`.`comment` AS t0_r4, `tasks`.`due_date` AS t0_r5, `tasks`.`completed_at` AS t0_r6, `tasks`.`created_at` AS t0_r7, `tasks`.`updated_at` AS t0_r8, `pages`.`id` AS t1_r0, `pages`.`version` AS t1_r1, `pages`.`lock_version` AS t1_r2, `pages`.`name` AS t1_r3, `pages`.`title` AS t1_r4, `pages`.`path` AS t1_r5, `pages`.`template_file_name` AS t1_r6, `pages`.`description` AS t1_r7, `pages`.`keywords` AS t1_r8, `pages`.`language` AS t1_r9, `pages`.`cacheable` AS t1_r10, `pages`.`hidden` AS t1_r11, `pages`.`published` AS t1_r12, `pages`.`deleted` AS t1_r13, `pages`.`archived` AS t1_r14, `pages`.`created_by_id` AS t1_r15, `pages`.`updated_by_id` AS t1_r16, `pages`.`created_at` AS t1_r17, `pages`.`updated_at` AS t1_r18 FROM `tasks` LEFT OUTER JOIN `pages` ON `pages`.id = `tasks`.page_id WHERE (((completed_at is null) AND (`tasks`.assigned_to_id = 1)) AND (`tasks`.assigned_to_id = 1)) ORDER BY tasks.due_date desc, pages.name[0m
Rendering template within layouts/cms/dashboard
Rendering cms/dashboard/index
Rendered cms/dashboard/_page_drafts (0.4ms)
Rendered cms/dashboard/_tasks (0.4ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 6, DB: 3) | 200 OK [http://localhost/cms/dashboard]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:00:19) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SectionNodesController#index (for 127.0.0.1 at 2009-05-16 16:00:25) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (root = 1) LIMIT 1[0m
Rendering template within layouts/cms/section_nodes
Rendering cms/section_nodes/index
Rendered cms/section_nodes/_node (2.4ms)
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) ORDER BY position[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) [0m
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (2.1ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) ORDER BY position[0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (2.1ms)
Rendered cms/section_nodes/_page (7.8ms)
Rendered cms/section_nodes/_section_node (11.6ms)
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.6ms)
Rendered cms/section_nodes/_section_node (5.6ms)
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 4 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.5ms)
Rendered cms/section_nodes/_section_node (5.6ms)
Rendered cms/section_nodes/_section (30.6ms)
Rendered cms/section_nodes/_section_node (34.6ms)
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 1)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.2ms)
Rendered cms/section_nodes/_page (4.4ms)
Rendered cms/section_nodes/_section_node (5.3ms)
Rendered layouts/cms/_head (76.6ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 226ms (View: 213, DB: 8) | 200 OK [http://localhost/cms/sitemap]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:00:26) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#show (for 127.0.0.1 at 2009-05-16 16:00:35) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
Redirected to http://localhost:3000/
Completed in 8ms (DB: 1) | 302 Found [http://localhost/cms/pages/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:00:35) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.6ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPageTemplate Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (((`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb') AND (dynamic_views.deleted = 0)) AND (`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb')) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) LIMIT 1[0m
Exception: edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}
On line #17 of tmp/views/layouts/templates/default.html.erb

    14:       <p>BrowserCMS has been installed successfully.</p> 
    15: 
    16:       <h2>Getting Started</h2>
    17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
    18: 
    19:       <%= container :main %>
    20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'
Handling Exception: 
ActionView::TemplateError (edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}) on line #17 of tmp/views/layouts/templates/default.html.erb:
14:       <p>BrowserCMS has been installed successfully.</p> 
15: 
16:       <h2>Getting Started</h2>
17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
18: 
19:       <%= container :main %>
20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'

Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:00:35) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SectionNodesController#index (for 127.0.0.1 at 2009-05-16 16:00:41) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (root = 1) LIMIT 1[0m
Rendering template within layouts/cms/section_nodes
Rendering cms/section_nodes/index
Rendered cms/section_nodes/_node (0.2ms)
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) ORDER BY position[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) [0m
  [4;36;1mGroup Load (0.2ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) ORDER BY position[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.0ms)
Rendered cms/section_nodes/_section_node (5.1ms)
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (3.9ms)
Rendered cms/section_nodes/_section_node (4.8ms)
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 4 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (3.8ms)
Rendered cms/section_nodes/_section_node (4.7ms)
Rendered cms/section_nodes/_section (18.7ms)
Rendered cms/section_nodes/_section_node (19.6ms)
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mGroup Load (0.2ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 1)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.2ms)
Rendered cms/section_nodes/_page (4.2ms)
Rendered cms/section_nodes/_section_node (5.1ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 36ms (View: 27, DB: 6) | 200 OK [http://localhost/cms/sitemap]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:00:42) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#edit (for 127.0.0.1 at 2009-05-16 16:00:46) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
Rendering template within layouts/cms/application
Rendering cms/pages/edit
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
  [4;35;1mPageTemplate Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendered cms/form_builder/_cms_drop_down (0.9ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
Rendered cms/pages/_form (8.2ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 28ms (View: 22, DB: 2) | 200 OK [http://localhost/cms/pages/1/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:00:47) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#update (for 127.0.0.1 at 2009-05-16 16:00:53) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"1", "page"=>{"name"=>"Home", "language"=>"", "template_file_name"=>"home.html.erb", "title"=>"", "lock_version"=>"0", "description"=>"", "archived"=>"0", "path"=>"/", "keywords"=>"", "hidden"=>"0", "cacheable"=>"1"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-16 14:00:53', '', 'home.html.erb', '', 1, 1, 1, 1, 2, '', 0, 'Changed description, keywords, language, template_file_name, title', 0, '/', '', 1, 0, '2009-05-16 14:00:53')[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/cms/pages/1
Completed in 15ms (DB: 3) | 302 Found [http://localhost/cms/pages/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#show (for 127.0.0.1 at 2009-05-16 16:00:53) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
Redirected to http://localhost:3000/
Completed in 4ms (DB: 1) | 302 Found [http://localhost/cms/pages/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:00:53) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 21ms (View: 10, DB: 4) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:00:53) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:00:53) [GET]
  Parameters: {"page_version"=>"2", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '2')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (19.7ms)
Completed in 33ms (View: 23, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:01:00) [GET]
  Parameters: {"mode"=>"edit", "path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (6.7ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.5ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.7ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 37ms (View: 24, DB: 5) | 200 OK [http://localhost/?mode=edit]
  [4;35;1mSQL (0.6ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:01:00) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (2.5ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:01:00) [GET]
  Parameters: {"page_version"=>"2", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '2')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (1.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (96.4ms)
Completed in 108ms (View: 98, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:01:22) [GET]
  Parameters: {"mode"=>"edit", "path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (97.7ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 126ms (View: 114, DB: 5) | 200 OK [http://localhost/?mode=edit]
  [4;35;1mSQL (0.6ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:01:23) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:01:23) [GET]
  Parameters: {"page_version"=>"2", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (17.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '2')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (2.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (1.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.4ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (20.6ms)
Completed in 53ms (View: 26, DB: 21) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:01:23) [GET]
  Parameters: {"path"=>["images", "smile-effect-logo_web_300px.png"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (12.1ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/images/smile-effect-logo_web_300px.png') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/images/smile-effect-logo_web_300px.png') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/images/smile-effect-logo_web_300px.png') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:02:58) [GET]
  Parameters: {"mode"=>"edit", "path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.5ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.9ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 35ms (View: 22, DB: 5) | 200 OK [http://localhost/?mode=edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:02:58) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (2.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:02:58) [GET]
  Parameters: {"page_version"=>"2", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '2')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (18.8ms)
Completed in 31ms (View: 22, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=2]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::UsersController#index (for 127.0.0.1 at 2009-05-16 16:03:10) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ((expires_at IS NULL OR expires_at >= '2009-05-16 14:03:10')) ORDER BY first_name, last_name, email LIMIT 0, 10[0m
  [4;35;1mUserGroupMembership Load (0.1ms)[0m   [0mSELECT `user_group_memberships`.* FROM `user_group_memberships` WHERE (`user_group_memberships`.user_id = 1) [0m
Rendering template within layouts/cms/administration
Rendering cms/users/index
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `groups` [0m
WARNING: Can't mass-assign these protected attributes: id
Rendered cms/users/_toolbar (76.8ms)
  [4;35;1mGroup Load (0.4ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `user_group_memberships` ON `groups`.id = `user_group_memberships`.group_id WHERE ((`user_group_memberships`.user_id = 1)) ORDER BY groups.name[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (1.3ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 90ms (View: 84, DB: 2) | 200 OK [http://localhost/cms/administration]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:03:10) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-16 16:03:13) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:03:13) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#edit (for 127.0.0.1 at 2009-05-16 16:03:15) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`id` = 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/edit
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_drop_down (1.1ms)
Rendered cms/form_builder/_cms_text_area (0.4ms)
Rendered cms/dynamic_views/_form (3.9ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 17ms (View: 12, DB: 1) | 200 OK [http://localhost/cms/page_templates/2/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:03:15) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:03:56) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.4ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.0ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 33ms (View: 20, DB: 5) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:03:57) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:03:57) [GET]
  Parameters: {"page_version"=>"2", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '2')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (20.5ms)
Completed in 34ms (View: 24, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=2]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-16 16:04:05) [GET]
  Parameters: {"connect_to_container"=>"content", "connect_to_page_id"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;35;1mContentTypeGroup Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `content_type_groups`[0m
  [4;36;1mContentType Load Including Associations (0.5ms)[0m   [0;1mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 53ms (View: 43, DB: 3) | 200 OK [http://localhost/cms/content_types?connect_to_container=content&connect_to_page_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:04:05) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#new (for 127.0.0.1 at 2009-05-16 16:04:14) [GET]
  Parameters: {"html_block"=>{"connect_to_container"=>"content", "connect_to_page_id"=>"1"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mHtmlBlock Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `html_blocks`[0m
  [4;35;1mHtmlBlock Load (83.1ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (html_blocks.deleted = 0) ORDER BY html_blocks.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (2.0ms)
Rendered cms/blocks/_toolbar (5.7ms)
Rendered cms/blocks/_hidden_fields (1.5ms)
Rendered cms/form_builder/_cms_text_field (0.5ms)
Rendered cms/form_builder/_cms_text_editor (2.8ms)
  [4;36;1mTagging Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `taggings`[0m
Rendered cms/form_builder/_cms_tag_list (17.7ms)
Rendered cms/html_blocks/_form (27.4ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 244ms (View: 143, DB: 89) | 200 OK [http://localhost/cms/html_blocks/new?html_block%5Bconnect_to_container%5D=content&html_block%5Bconnect_to_page_id%5D=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:04:15) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#create (for 127.0.0.1 at 2009-05-16 16:05:52) [POST]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "html_block"=>{"name"=>"Wilkommensgruß", "connect_to_container"=>"content", "lock_version"=>"0", "tag_list"=>"", "content"=>"<p style=\"text-align: center;\"><big>Willkommen auf unseren wundersch&ouml;nen Smile-Effect Seite !</big></p>", "connect_to_page_id"=>"1"}, "dhtml_selector"=>""}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mHtmlBlock::Version Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `html_block_versions`[0m
  [4;36;1mHtmlBlock Create (0.2ms)[0m   [0;1mINSERT INTO `html_blocks` (`name`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `archived`, `content`, `deleted`, `created_at`) VALUES('Wilkommensgruß', '2009-05-16 14:05:52', 1, 0, 0, 1, 1, 0, '<p style=\"text-align: center;\"><big>Willkommen auf unseren wundersch&ouml;nen Smile-Effect Seite !</big></p>', 0, '2009-05-16 14:05:52')[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-16 14:05:52', '', 'home.html.erb', '', 1, 1, 1, 1, 3, '', 0, 'Html Block \'Wilkommensgruß\' was added to the \'content\' container', 0, '/', '', 1, 0, '2009-05-16 14:05:52')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `connectors`[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 3 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(4, 3, 'content', '2009-05-16 14:05:52', 1, 1, 1, 'HtmlBlock', '2009-05-16 14:05:52')[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = NULL) [0m
  [4;36;1mHtmlBlock::Version Create (0.2ms)[0m   [0;1mINSERT INTO `html_block_versions` (`name`, `html_block_id`, `updated_at`, `updated_by_id`, `published`, `created_by_id`, `version`, `archived`, `version_comment`, `content`, `deleted`, `created_at`) VALUES('Wilkommensgruß', 4, '2009-05-16 14:05:52', 1, 0, 1, 1, 0, 'Created', '<p style=\"text-align: center;\"><big>Willkommen auf unseren wundersch&ouml;nen Smile-Effect Seite !</big></p>', 0, '2009-05-16 14:05:52')[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage Load Including Associations (0.4ms)[0m   [0;1mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0)) [0m
  [4;35;1mTagging Load (0.2ms)[0m   [0mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 4 AND `taggings`.taggable_type = 'HtmlBlock') [0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Redirected to http://localhost:3000/
Completed in 36ms (DB: 9) | 302 Found [http://localhost/cms/html_blocks]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:05:53) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 3)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 3) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 3 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (29.1ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 3 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 3 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 3 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 3 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 3 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 3 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.5ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 73ms (View: 58, DB: 6) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:05:53) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:05:53) [GET]
  Parameters: {"page_version"=>"3", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '3')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (22.8ms)
Completed in 35ms (View: 26, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=3]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-16 16:05:59) [GET]
  Parameters: {"connect_to_container"=>"quote", "connect_to_page_id"=>"1"}
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.4ms)[0m   [0mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;36;1mContentType Load Including Associations (0.6ms)[0m   [0;1mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 9, DB: 2) | 200 OK [http://localhost/cms/content_types?connect_to_container=quote&connect_to_page_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:05:59) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ImageBlocksController#new (for 127.0.0.1 at 2009-05-16 16:06:02) [GET]
  Parameters: {"image_block"=>{"connect_to_container"=>"quote", "connect_to_page_id"=>"1"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'ImageBlock') LIMIT 1[0m
  [4;36;1mImageBlock Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `file_blocks`[0m
  [4;35;1mImageBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (file_blocks.deleted = 0) AND ( (`file_blocks`.`type` = 'ImageBlock' ) ) ORDER BY file_blocks.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.2ms)
Rendered cms/blocks/_hidden_fields (0.4ms)
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (root = 1) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1 AND (node_type = 'Section')) ORDER BY section_nodes.position[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 2 AND (node_type = 'Section')) ORDER BY section_nodes.position[0m
Rendered cms/form_builder/_cms_text_field (0.7ms)
Rendered cms/form_builder/_cms_file_field (3.2ms)
Rendered cms/form_builder/_cms_drop_down (1.0ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_tag_list (1.3ms)
Rendered cms/image_blocks/_form (15.5ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (root = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1 AND (node_type = 'Section')) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 2 AND (node_type = 'Section')) ORDER BY section_nodes.position[0m
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 51ms (View: 38, DB: 5) | 200 OK [http://localhost/cms/image_blocks/new?image_block%5Bconnect_to_container%5D=quote&image_block%5Bconnect_to_page_id%5D=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:06:03) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 9ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ImageBlocksController#create (for 127.0.0.1 at 2009-05-16 16:06:51) [POST]
  Parameters: {"commit"=>"Save", "image_block"=>{"name"=>"tier", "connect_to_container"=>"quote", "attachment_file_path"=>"/Doggie.gif", "attachment_file"=>#<File:/var/folders/+F/+FImNZTsHz84KmlQ0pHPu++++TI/-Tmp-/RackMultipart.8748.1>, "lock_version"=>"0", "tag_list"=>"", "attachment_section_id"=>"1", "connect_to_page_id"=>"1"}, "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "temp"=>"Doggie.gif"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'ImageBlock') LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mAttachment Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `attachments`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM `attachments` WHERE (`attachments`.`file_path` = BINARY '/Doggie.gif') AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM `attachments` WHERE (`attachments`.`file_path` = BINARY '/Doggie.gif') AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `attachment_versions`[0m
  [4;36;1mAttachment Create (0.3ms)[0m   [0;1mINSERT INTO `attachments` (`file_type`, `name`, `file_path`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `file_size`, `created_by_id`, `version`, `file_location`, `file_extension`, `archived`, `deleted`, `created_at`) VALUES('image/gif', NULL, '/Doggie.gif', '2009-05-16 14:06:51', 1, 0, 0, 2038, 1, 1, '2009/05/16/885451a0e9ee8f3cfa574eb4a5dd337617d6e1a0', 'gif', 0, 0, '2009-05-16 14:06:51')[0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = NULL) [0m
  [4;36;1mAttachment::Version Create (0.2ms)[0m   [0;1mINSERT INTO `attachment_versions` (`file_type`, `name`, `attachment_id`, `file_path`, `updated_at`, `updated_by_id`, `published`, `file_size`, `created_by_id`, `version`, `file_location`, `file_extension`, `archived`, `version_comment`, `deleted`, `created_at`) VALUES('image/gif', 'Doggie.gif', 1, '/Doggie.gif', '2009-05-16 14:06:51', 1, 0, 2038, 1, 1, '2009/05/16/885451a0e9ee8f3cfa574eb4a5dd337617d6e1a0', 'gif', 0, 'Created', 0, '2009-05-16 14:06:51')[0m
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (section_id = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mSectionNode Create (0.2ms)[0m   [0;1mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Attachment', '2009-05-16 14:06:51', 1, 1, 3, '2009-05-16 14:06:51')[0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mImageBlock::Version Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `file_block_versions`[0m
  [4;35;1mImageBlock Create (0.5ms)[0m   [0mINSERT INTO `file_blocks` (`name`, `attachment_id`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `type`, `created_by_id`, `version`, `attachment_version`, `archived`, `deleted`, `created_at`) VALUES('tier', 1, '2009-05-16 14:06:51', 1, 0, 0, 'ImageBlock', 1, 1, 1, 0, 0, '2009-05-16 14:06:51')[0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 3) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Create (0.3ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-16 14:06:51', '', 'home.html.erb', '', 1, 1, 1, 1, 4, '', 0, 'Image Block \'tier\' was added to the \'quote\' container', 0, '/', '', 1, 0, '2009-05-16 14:06:51')[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 4 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(4, 4, 'content', '2009-05-16 14:06:51', 1, 1, 1, 'HtmlBlock', '2009-05-16 14:06:51')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.2ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 4 and connectors.container = 'quote') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 4, 'quote', '2009-05-16 14:06:51', 1, 1, 1, 'AbstractFileBlock', '2009-05-16 14:06:51')[0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = NULL) [0m
  [4;35;1mImageBlock::Version Create (0.2ms)[0m   [0mINSERT INTO `file_block_versions` (`name`, `attachment_id`, `updated_at`, `updated_by_id`, `published`, `type`, `created_by_id`, `version`, `attachment_version`, `archived`, `version_comment`, `deleted`, `file_block_id`, `created_at`) VALUES('tier', 1, '2009-05-16 14:06:51', 1, 0, NULL, 1, 1, 1, 0, 'Created', 0, 1, '2009-05-16 14:06:51')[0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Load Including Associations (0.4ms)[0m   [0mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'AbstractFileBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'AbstractFileBlock' and connectors.connectable_version = 0)) [0m
  [4;36;1mTagging Load (0.1ms)[0m   [0;1mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 1 AND `taggings`.taggable_type = 'AbstractFileBlock') [0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
Redirected to http://localhost:3000/
Completed in 63ms (DB: 14) | 302 Found [http://localhost/cms/image_blocks]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:06:51) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (1.3ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.6ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 4) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (11.0ms)
  [4;36;1mAbstractFileBlock Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `file_blocks`[0m
  [4;35;1mAbstractFileBlock Load (1.3ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (23.8ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (84.1ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 171ms (View: 148, DB: 13) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:06:51) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.3ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:06:51) [GET]
  Parameters: {"page_version"=>"4", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '4')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (21.8ms)
Completed in 34ms (View: 25, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::AttachmentsController#show (for 127.0.0.1 at 2009-05-16 16:06:52) [GET]
  Parameters: {"id"=>"1", "version"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mAttachment Load (0.6ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = '1')) LIMIT 1[0m
Completed in 12ms (View: 1, DB: 2) | 200 OK [http://localhost/cms/attachments/1?version=1]
Streaming file /Users/andrebruehl/Projekte/WebApps/smile-effect/tmp/uploads/2009/05/16/885451a0e9ee8f3cfa574eb4a5dd337617d6e1a0
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#publish (for 127.0.0.1 at 2009-05-16 16:07:13) [PUT]
  Parameters: {"authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Publish (0.3ms)[0m   [0mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 4, `title` = '', `template_file_name` = 'home.html.erb', `keywords` = '', `published` = 1, `cacheable` = 1, `description` = '', `archived` = 0, `language` = '', `path` = '/', `name` = 'Home' WHERE `id` = 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 4) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY position, connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Update (0.2ms)[0m   [0;1mUPDATE `html_block_versions` SET `published` = 1, `updated_at` = '2009-05-16 14:07:13' WHERE `id` = 4[0m
  [4;35;1mHtmlBlock Publish (0.2ms)[0m   [0mUPDATE `html_blocks` SET `deleted` = 0, `content` = '<p style=\"text-align: center;\"><big>Willkommen auf unseren wundersch&ouml;nen Smile-Effect Seite !</big></p>', `version` = 1, `published` = 1, `archived` = 0, `name` = 'Wilkommensgruß' WHERE `id` = 4[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 91ms (DB: 3) | 302 Found [http://localhost/cms/pages/1/publish]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:07:13) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.4ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.5ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.5ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 4) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (8.6ms)
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.8ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 4 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.5ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 68ms (View: 50, DB: 8) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.6ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:07:13) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.8ms)
Rendered layouts/_cms_toolbar (1.3ms)
Rendered layouts/cms/_footer (0.2ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:07:13) [GET]
  Parameters: {"page_version"=>"4", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '4')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.5ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (104.2ms)
Completed in 116ms (View: 107, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::AttachmentsController#show (for 127.0.0.1 at 2009-05-16 16:07:14) [GET]
  Parameters: {"id"=>"1", "version"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = '1')) LIMIT 1[0m
Completed in 8ms (View: 1, DB: 1) | 200 OK [http://localhost/cms/attachments/1?version=1]
Streaming file /Users/andrebruehl/Projekte/WebApps/smile-effect/tmp/uploads/2009/05/16/885451a0e9ee8f3cfa574eb4a5dd337617d6e1a0
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-16 16:07:28) [GET]
  Parameters: {"connect_to_container"=>"footer", "connect_to_page_id"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;35;1mContentType Load Including Associations (0.4ms)[0m   [0mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://localhost/cms/content_types?connect_to_container=footer&connect_to_page_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:07:28) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#new (for 127.0.0.1 at 2009-05-16 16:07:29) [GET]
  Parameters: {"html_block"=>{"connect_to_container"=>"footer", "connect_to_page_id"=>"1"}}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (html_blocks.deleted = 0) ORDER BY html_blocks.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.2ms)
Rendered cms/blocks/_hidden_fields (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_editor (1.0ms)
Rendered cms/form_builder/_cms_tag_list (1.1ms)
Rendered cms/html_blocks/_form (3.2ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (79.1ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 103ms (View: 97, DB: 2) | 200 OK [http://localhost/cms/html_blocks/new?html_block%5Bconnect_to_container%5D=footer&html_block%5Bconnect_to_page_id%5D=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:07:30) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#create (for 127.0.0.1 at 2009-05-16 16:08:07) [POST]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "html_block"=>{"name"=>"Footer", "connect_to_container"=>"footer", "lock_version"=>"0", "tag_list"=>"", "content"=>"<p style=\"text-align: center;\"><em><strong>Hier kommt der footer!</strong></em></p>", "connect_to_page_id"=>"1"}, "dhtml_selector"=>""}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mHtmlBlock Create (0.2ms)[0m   [0;1mINSERT INTO `html_blocks` (`name`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `archived`, `content`, `deleted`, `created_at`) VALUES('Footer', '2009-05-16 14:08:07', 1, 0, 0, 1, 1, 0, '<p style=\"text-align: center;\"><em><strong>Hier kommt der footer!</strong></em></p>', 0, '2009-05-16 14:08:07')[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 4) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Create (0.2ms)[0m   [0mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-16 14:08:07', '', 'home.html.erb', '', 1, 1, 1, 1, 5, '', 0, 'Html Block \'Footer\' was added to the \'footer\' container', 0, '/', '', 1, 0, '2009-05-16 14:08:07')[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 5 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(4, 5, 'content', '2009-05-16 14:08:07', 1, 1, 1, 'HtmlBlock', '2009-05-16 14:08:07')[0m
  [4;36;1mConnector Load (0.2ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 5 and connectors.container = 'quote') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.1ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 5, 'quote', '2009-05-16 14:08:07', 1, 1, 1, 'AbstractFileBlock', '2009-05-16 14:08:07')[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 5 and connectors.container = 'footer') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(5, 5, 'footer', '2009-05-16 14:08:07', 1, 1, 1, 'HtmlBlock', '2009-05-16 14:08:07')[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = NULL) [0m
  [4;36;1mHtmlBlock::Version Create (0.2ms)[0m   [0;1mINSERT INTO `html_block_versions` (`name`, `html_block_id`, `updated_at`, `updated_by_id`, `published`, `created_by_id`, `version`, `archived`, `version_comment`, `content`, `deleted`, `created_at`) VALUES('Footer', 5, '2009-05-16 14:08:07', 1, 0, 1, 1, 0, 'Created', '<p style=\"text-align: center;\"><em><strong>Hier kommt der footer!</strong></em></p>', 0, '2009-05-16 14:08:07')[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage Load Including Associations (0.4ms)[0m   [0;1mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0)) [0m
  [4;35;1mTagging Load (0.2ms)[0m   [0mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 5 AND `taggings`.taggable_type = 'HtmlBlock') [0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Redirected to http://localhost:3000/
Completed in 36ms (DB: 7) | 302 Found [http://localhost/cms/html_blocks]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:08:07) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.4ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.0ms)
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.2ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.5ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (85.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.9ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 159ms (View: 140, DB: 10) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:08:07) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.4ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (2.4ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:08:08) [GET]
  Parameters: {"page_version"=>"5", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (1.5ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '5')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 4)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (19.0ms)
Completed in 34ms (View: 22, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=5]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::AttachmentsController#show (for 127.0.0.1 at 2009-05-16 16:08:08) [GET]
  Parameters: {"id"=>"1", "version"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = '1')) LIMIT 1[0m
Completed in 8ms (View: 1, DB: 1) | 200 OK [http://localhost/cms/attachments/1?version=1]
Streaming file /Users/andrebruehl/Projekte/WebApps/smile-effect/tmp/uploads/2009/05/16/885451a0e9ee8f3cfa574eb4a5dd337617d6e1a0
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#publish (for 127.0.0.1 at 2009-05-16 16:08:11) [PUT]
  Parameters: {"authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage Publish (0.2ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 5, `title` = '', `template_file_name` = 'home.html.erb', `keywords` = '', `published` = 1, `cacheable` = 1, `description` = '', `archived` = 0, `language` = '', `path` = '/', `name` = 'Home' WHERE `id` = 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Update (0.2ms)[0m   [0mUPDATE `html_block_versions` SET `published` = 1, `updated_at` = '2009-05-16 14:08:11' WHERE `id` = 5[0m
  [4;36;1mHtmlBlock Publish (0.2ms)[0m   [0;1mUPDATE `html_blocks` SET `deleted` = 0, `content` = '<p style=\"text-align: center;\"><em><strong>Hier kommt der footer!</strong></em></p>', `version` = 1, `published` = 1, `archived` = 0, `name` = 'Footer' WHERE `id` = 5[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 15ms (DB: 4) | 302 Found [http://localhost/cms/pages/1/publish]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:08:11) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.8ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.3ms)
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.0ms)
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.7ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.7ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.3ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 80ms (View: 58, DB: 10) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.6ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 16:08:12) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (2.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 16:08:12) [GET]
  Parameters: {"page_version"=>"5", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '5')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (22.7ms)
Completed in 36ms (View: 26, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=5]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::AttachmentsController#show (for 127.0.0.1 at 2009-05-16 16:08:12) [GET]
  Parameters: {"id"=>"1", "version"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = '1')) LIMIT 1[0m
Completed in 9ms (View: 1, DB: 2) | 200 OK [http://localhost/cms/attachments/1?version=1]
Streaming file /Users/andrebruehl/Projekte/WebApps/smile-effect/tmp/uploads/2009/05/16/885451a0e9ee8f3cfa574eb4a5dd337617d6e1a0
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::UsersController#index (for 127.0.0.1 at 2009-05-16 16:39:04) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ((expires_at IS NULL OR expires_at >= '2009-05-16 14:39:04')) ORDER BY first_name, last_name, email LIMIT 0, 10[0m
  [4;35;1mUserGroupMembership Load (0.2ms)[0m   [0mSELECT `user_group_memberships`.* FROM `user_group_memberships` WHERE (`user_group_memberships`.user_id = 1) [0m
Rendering template within layouts/cms/administration
Rendering cms/users/index
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `groups` [0m
WARNING: Can't mass-assign these protected attributes: id
Rendered cms/users/_toolbar (3.0ms)
  [4;35;1mGroup Load (0.5ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `user_group_memberships` ON `groups`.id = `user_group_memberships`.group_id WHERE ((`user_group_memberships`.user_id = 1)) ORDER BY groups.name[0m
Rendered layouts/cms/_head (1.7ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 18ms (View: 11, DB: 2) | 200 OK [http://localhost/cms/administration]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:39:04) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-16 16:39:09) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 13ms (View: 7, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:39:09) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#edit (for 127.0.0.1 at 2009-05-16 16:39:12) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`id` = 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/edit
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_drop_down (1.0ms)
Rendered cms/form_builder/_cms_text_area (0.4ms)
Rendered cms/dynamic_views/_form (4.0ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 10, DB: 1) | 200 OK [http://localhost/cms/page_templates/2/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 16:39:12) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#update (for 127.0.0.1 at 2009-05-16 17:05:39) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"2", "page_template"=>{"name"=>"home", "format"=>"html", "body"=>"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n\t<%= stylesheet_link_tag 'compiled/screen.css', :media => 'screen, projection' %>\r\n\t<%= stylesheet_link_tag 'compiled/print.css', :media => 'print' %>\r\n\r\n\r\n\t<title>Smile-Effect</title>\r\n\t<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n\t<%= cms_toolbar %>\t\t\t\r\n\t<div id=\"branding-container\">\r\n\t\t<div id=\"header\">\r\n\t\t\t<h1>Smile-Effect</h1>\r\n\t\t\t<%= render_menu %>\r\n\t\t</div>\r\n\t\t<div id=\"teaser\">\r\n\t\t\t<%= container :teaser %>\r\n\t\t</div>\r\n\t\t<div id=\"content\">\r\n\t\t\t<%= container :content %>\r\n\t\t</div>\r\n\t\t<div id=\"related\">\t\t\r\n\t\t\t<%= container :related %>\r\n\t\t</div>\r\n\t\t<div id=\"footer\">\r\n\t\t\t<%= container :footer %>\t\r\n\t\t</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n", "handler"=>"erb"}}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`id` = 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `dynamic_views` WHERE (`dynamic_views`.`name` = BINARY 'home' AND `dynamic_views`.format = 'html' AND `dynamic_views`.handler = 'erb' AND `dynamic_views`.id <> 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;35;1mPageTemplate::Version Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate::Version Create (0.3ms)[0m   [0mINSERT INTO `dynamic_view_versions` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `dynamic_view_id`, `handler`, `published`, `type`, `created_by_id`, `version`, `archived`, `version_comment`, `deleted`, `created_at`) VALUES('home', 'html', '2009-05-16 15:05:39', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n	<%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n	<%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n	<title>Smile-Effect</title>\r\n	<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n	<%= cms_toolbar %>			\r\n	<div id=\"branding-container\">\r\n		<div id=\"header\">\r\n			<h1>Smile-Effect</h1>\r\n			<%= render_menu %>\r\n		</div>\r\n		<div id=\"teaser\">\r\n			<%= container :teaser %>\r\n		</div>\r\n		<div id=\"content\">\r\n			<%= container :content %>\r\n		</div>\r\n		<div id=\"related\">		\r\n			<%= container :related %>\r\n		</div>\r\n		<div id=\"footer\">\r\n			<%= container :footer %>	\r\n		</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n', 1, 2, 'erb', 1, NULL, 1, 2, 0, 'Changed body', 0, '2009-05-16 15:05:39')[0m
  [4;36;1mPageTemplate::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate Publish (0.3ms)[0m   [0mUPDATE `dynamic_views` SET `deleted` = 0, `handler` = 'erb', `version` = 2, `body` = '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n	<%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n	<%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n	<title>Smile-Effect</title>\r\n	<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n	<%= cms_toolbar %>			\r\n	<div id=\"branding-container\">\r\n		<div id=\"header\">\r\n			<h1>Smile-Effect</h1>\r\n			<%= render_menu %>\r\n		</div>\r\n		<div id=\"teaser\">\r\n			<%= container :teaser %>\r\n		</div>\r\n		<div id=\"content\">\r\n			<%= container :content %>\r\n		</div>\r\n		<div id=\"related\">		\r\n			<%= container :related %>\r\n		</div>\r\n		<div id=\"footer\">\r\n			<%= container :footer %>	\r\n		</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n', `published` = 1, `archived` = 0, `format` = 'html', `name` = 'home' WHERE `id` = 2[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/cms/page_templates
Completed in 17ms (DB: 3) | 302 Found [http://localhost/cms/page_templates/2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-16 17:05:39) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.5ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 13ms (View: 8, DB: 2) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-16 17:05:40) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.4ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 17:05:42) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (9.2ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.0ms)
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.4ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.1ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 165ms (View: 147, DB: 10) | 200 OK [http://localhost/]
  [4;35;1mSQL (1.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 17:05:42) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (1.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 17:05:43) [GET]
  Parameters: {"page_version"=>"5", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '5')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (21.1ms)
Completed in 35ms (View: 25, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=5]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 17:06:34) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.6ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.9ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.5ms)
  [4;36;1mAbstractFileBlock Load (0.4ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.5ms)
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.7ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.7ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.7ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 83ms (View: 63, DB: 11) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 17:06:34) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 17:06:34) [GET]
  Parameters: {"page_version"=>"5", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '5')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mPage::Version Load (1.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (104.8ms)
Completed in 117ms (View: 107, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=5]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 17:07:27) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.5ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.7ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.5ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.5ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 176ms (View: 159, DB: 9) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 17:07:27) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 17:07:27) [GET]
  Parameters: {"page_version"=>"5", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '5')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (25.0ms)
Completed in 37ms (View: 28, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=5]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 17:22:04) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.4ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.2ms)
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.4ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (103.6ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 176ms (View: 158, DB: 9) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-16 17:22:04) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-16 17:22:04) [GET]
  Parameters: {"page_version"=>"5", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '5')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.4ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (20.9ms)
Completed in 36ms (View: 24, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=5]
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (71.8ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (0.4ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (0.2ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (72.5ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (0.2ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (0.3ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateUsers (20080815014337)
Migrating to CreateDynamicViews (20080815014733)
Migrating to CreatePages (20080815014735)
Migrating to CreateContentTypeGroups (20080815014736)
Migrating to CreateContentTypes (20080815014737)
Migrating to CreateCategoryTypes (20080815014738)
Migrating to CreateCategories (20080815014739)
Migrating to CreateConnectors (20080815214539)
Migrating to CreateHtmlBlocks (20080815220350)
Migrating to CreateSections (20080819193254)
Migrating to CreatePortlets (20080819213733)
Migrating to CreateRedirects (20080917222336)
Migrating to CreateAttachments (20080922203815)
Migrating to CreateFileBlocks (20080922215729)
Migrating to CreateGroupTypes (20081007190155)
Migrating to CreateGroups (20081007190156)
Migrating to CreatePermissions (20081008182341)
Migrating to CreateGroupSections (20081009202349)
Migrating to CreateSites (20081013181547)
Migrating to CreateSectionNodes (20081020152051)
Migrating to CreateLinks (20081031140510)
Migrating to CreateTags (20081031140511)
Migrating to CreateTaggings (20081031140512)
Migrating to LoadSeedData (20081114172307)
Migrating to CreateEmailMessages (20090130171546)
Migrating to CreateTasks (20090212164201)
Migrating to CreatePageRoutes (20090410193133)
Migrating to CreatePageRouteOptions (20090410193312)
Migrating to CreateNewsArticles (20090410193313)
  [4;36;1mSQL (80.5ms)[0m   [0;1mCREATE TABLE `news_articles` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `version` int(11), `lock_version` int(11) DEFAULT 0, `name` varchar(255), `slug` varchar(255), `release_date` datetime, `category_id` int(11), `attachment_id` int(11), `attachment_version` int(11), `summary` text, `body` text, `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) [0m
  [4;35;1mSQL (245.1ms)[0m   [0mCREATE TABLE `news_article_versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `news_article_id` int(11), `version` int(11), `name` varchar(255), `slug` varchar(255), `release_date` datetime, `category_id` int(11), `attachment_id` int(11), `attachment_version` int(11), `summary` text, `body` text, `published` tinyint(1) DEFAULT 0, `deleted` tinyint(1) DEFAULT 0, `archived` tinyint(1) DEFAULT 0, `version_comment` varchar(255), `created_by_id` int(11), `updated_by_id` int(11), `created_at` datetime, `updated_at` datetime) [0m
  [4;36;1mContentType Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `content_types`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mBEGIN[0m
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`name` = 'News') LIMIT 1[0m
  [4;35;1mContentTypeGroup Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `content_type_groups`[0m
  [4;36;1mContentTypeGroup Create (0.2ms)[0m   [0;1mINSERT INTO `content_type_groups` (`name`, `updated_at`, `created_at`) VALUES('News', '2009-05-17 16:02:56', '2009-05-17 16:02:56')[0m
  [4;35;1mContentType Create (0.1ms)[0m   [0mINSERT INTO `content_types` (`name`, `updated_at`, `priority`, `content_type_group_id`, `created_at`) VALUES('NewsArticle', '2009-05-17 16:02:56', 2, 3, '2009-05-17 16:02:56')[0m
  [4;36;1mSQL (10.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCategoryType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `category_types`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCategoryType Exists (0.2ms)[0m   [0mSELECT `category_types`.id FROM `category_types` WHERE (`category_types`.`name` = BINARY 'News Article') LIMIT 1[0m
  [4;36;1mCategoryType Create (0.2ms)[0m   [0;1mINSERT INTO `category_types` (`name`, `updated_at`, `created_at`) VALUES('News Article', '2009-05-17 16:02:56', '2009-05-17 16:02:56')[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (root = 1) LIMIT 1[0m
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT * FROM `groups` [0m
  [4;36;1mSection Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `sections`[0m
  [4;35;1mGroup Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `groups`[0m
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `groups` WHERE (`groups`.`id` IN (1,2,3)) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSectionNode Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `section_nodes`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSection Create (0.2ms)[0m   [0mINSERT INTO `sections` (`name`, `updated_at`, `root`, `path`, `hidden`, `created_at`) VALUES('News', '2009-05-17 16:02:56', 0, '/news', 0, '2009-05-17 16:02:56')[0m
  [4;36;1mGroupSection Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `group_sections`[0m
  [4;35;1mGroupSection Create (0.2ms)[0m   [0mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(3, 1)[0m
  [4;36;1mGroupSection Create (0.1ms)[0m   [0;1mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(3, 2)[0m
  [4;35;1mGroupSection Create (0.1ms)[0m   [0mINSERT INTO `group_sections` (`section_id`, `group_id`) VALUES(3, 3)[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (section_id = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mSectionNode Create (0.2ms)[0m   [0mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Section', '2009-05-17 16:02:56', 1, 3, 4, '2009-05-17 16:02:56')[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPage Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `pages`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/articles') AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `page_versions`[0m
  [4;35;1mConnector Load (0.5ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 0) AND (`connectors`.page_id = NULL)) AND (`connectors`.page_id = NULL)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage Create (0.2ms)[0m   [0;1mINSERT INTO `pages` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `description`, `archived`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Overview', '2009-05-17 16:02:56', NULL, 'default.html.erb', NULL, NULL, 0, 0, NULL, 1, NULL, 0, 0, '/news/articles', NULL, 0, 0, '2009-05-17 16:02:56')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = NULL) [0m
  [4;36;1mPage::Version Create (0.3ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Overview', '2009-05-17 16:02:56', NULL, 'default.html.erb', NULL, NULL, 0, 5, NULL, 1, NULL, 0, 'Created', 0, '/news/articles', NULL, 0, 0, '2009-05-17 16:02:56')[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = NULL) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.5ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (section_id = 3) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mSectionNode Create (0.2ms)[0m   [0mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Page', '2009-05-17 16:02:57', 3, 5, 1, '2009-05-17 16:02:57')[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Update (0.3ms)[0m   [0mUPDATE `page_versions` SET `published` = 1, `updated_at` = '2009-05-17 16:02:57' WHERE `id` = 12[0m
  [4;36;1mPage Publish (0.3ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 1, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 0, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/news/articles', `name` = 'Overview' WHERE `id` = 5[0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mRecentNewsPortlet Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `portlets`[0m
  [4;35;1mPortletAttribute Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `portlet_attributes`[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mBEGIN[0m
  [4;35;1mRecentNewsPortlet Create (0.3ms)[0m   [0mINSERT INTO `portlets` (`name`, `updated_at`, `updated_by_id`, `type`, `created_by_id`, `archived`, `deleted`, `created_at`) VALUES('Recent News Portlet', '2009-05-17 16:02:57', NULL, 'RecentNewsPortlet', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;36;1mPortletAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `portlet_attributes` (`portlet_id`, `name`, `value`) VALUES(1, 'publish_on_save', 1)[0m
  [4;35;1mPortletAttribute Create (0.2ms)[0m   [0mINSERT INTO `portlet_attributes` (`portlet_id`, `name`, `value`) VALUES(1, 'template', '<% content_for :html_head do %>\n <%= auto_discovery_link_tag :rss, news_articles_url, \"RSS Feed for News Articles\" %>\n<% end %>\n<b>Latest News</b>\n<br/>\n<br/>\n\n<% for article in @articles %>\n <div class=\"news-item-browser\">\n <% if article.release_date -%>\n <b><%= article.release_date.to_date.to_s(:long) %></b>\n <br/>\n <% end %>\n \n <%= link_to h(article.name), news_article_path(article.route_params) %>\n \n </div>\n<% end %>\n\n<% unless @portlet.more_link.blank? -%>\n <div class=\"news-item-browser\">\n <%= link_to \"MORE\", @portlet.more_link %>\n </div>\n<% end %>\n')[0m
  [4;36;1mPortletAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `portlet_attributes` (`portlet_id`, `name`, `value`) VALUES(1, 'more_link', '/news/archive')[0m
  [4;35;1mPortletAttribute Create (0.2ms)[0m   [0mINSERT INTO `portlet_attributes` (`portlet_id`, `name`, `value`) VALUES(1, 'limit', 5)[0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/articles' AND `pages`.id <> 5) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mPage::Version Create (0.3ms)[0m   [0mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Overview', '2009-05-17 16:02:57', NULL, 'default.html.erb', NULL, NULL, 1, 5, NULL, 2, NULL, 0, 'Recent News Portlet \'Recent News Portlet\' was added to the \'main\' container', 0, '/news/articles', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Publish (0.3ms)[0m   [0mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 2, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 0, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/news/articles', `name` = 'Overview' WHERE `id` = 5[0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) ORDER BY position, connectors.container, connectors.position[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `connectors`[0m
  [4;36;1mConnector Load (2.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 5 and connectors.page_version = 2 and connectors.container = 'main') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 2, 'main', '2009-05-17 16:02:57', 5, NULL, 1, 'Portlet', '2009-05-17 16:02:57')[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/archive') AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 0) AND (`connectors`.page_id = NULL)) AND (`connectors`.page_id = NULL)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage Create (0.2ms)[0m   [0;1mINSERT INTO `pages` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `description`, `archived`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Archive', '2009-05-17 16:02:57', NULL, 'default.html.erb', NULL, NULL, 0, 0, NULL, 1, NULL, 0, 0, '/news/archive', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = NULL) [0m
  [4;36;1mPage::Version Create (0.3ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Archive', '2009-05-17 16:02:57', NULL, 'default.html.erb', NULL, NULL, 0, 6, NULL, 1, NULL, 0, 'Created', 0, '/news/archive', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = NULL) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (section_id = 3) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mSectionNode Create (0.2ms)[0m   [0mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Page', '2009-05-17 16:02:57', 3, 6, 2, '2009-05-17 16:02:57')[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Update (0.3ms)[0m   [0mUPDATE `page_versions` SET `published` = 1, `updated_at` = '2009-05-17 16:02:57' WHERE `id` = 14[0m
  [4;36;1mPage Publish (0.2ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 1, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 0, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/news/archive', `name` = 'Archive' WHERE `id` = 6[0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.6ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 6)) AND (`connectors`.page_id = 6)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mNewsArchivePortlet Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `portlets`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mNewsArchivePortlet Create (0.3ms)[0m   [0;1mINSERT INTO `portlets` (`name`, `updated_at`, `updated_by_id`, `type`, `created_by_id`, `archived`, `deleted`, `created_at`) VALUES('News Archive Portlet', '2009-05-17 16:02:57', NULL, 'NewsArchivePortlet', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;35;1mPortletAttribute Create (0.2ms)[0m   [0mINSERT INTO `portlet_attributes` (`portlet_id`, `name`, `value`) VALUES(2, 'publish_on_save', 1)[0m
  [4;36;1mPortletAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `portlet_attributes` (`portlet_id`, `name`, `value`) VALUES(2, 'template', '<% content_for :html_head do %>\n <%= auto_discovery_link_tag :rss, news_articles_url, \"RSS Feed for News Articles\" %>\n<% end %>\n<div>\n <% @articles.group_by(&:year).sort_by(&:first).reverse.each do |year, year_articles| %>\n <!-- <%= year %> -->\n <% year_articles.group_by(&:month).sort_by(&:first).reverse.each do |month, month_articles| %>\n <b class=\"month\"><%= Date::MONTHNAMES[month] %></b>\n <% for article in month_articles.sort_by(&:release_date).reverse %>\n <div class=\"news-item\">\n <% unless article.release_date.blank? -%>\n <span class=\"release-date\"><b><%= article.release_date.to_s(:long) %></b></span><br/>\n <% end %>\n\n <%= link_to \"<b>#{h(article.name)}</b>\", news_article_path(article.route_params) %><br/>\n <% unless article.summary.blank? -%>\n <p><%=h article.summary %></p>\n <% end %>\n </div>\n <% end %>\n <% end %>\n <% end %>\n</div>\n')[0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/archive' AND `pages`.id <> 6) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 6)) AND (`connectors`.page_id = 6)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage::Version Create (0.3ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Archive', '2009-05-17 16:02:57', NULL, 'default.html.erb', NULL, NULL, 1, 6, NULL, 2, NULL, 0, 'News Archive Portlet \'News Archive Portlet\' was added to the \'main\' container', 0, '/news/archive', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage Publish (0.3ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 2, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 0, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/news/archive', `name` = 'Archive' WHERE `id` = 6[0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 6)) AND (`connectors`.page_id = 6)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 6 and connectors.page_version = 2 and connectors.container = 'main') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(2, 2, 'main', '2009-05-17 16:02:57', 6, NULL, 1, 'Portlet', '2009-05-17 16:02:57')[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/article') AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 0) AND (`connectors`.page_id = NULL)) AND (`connectors`.page_id = NULL)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage Create (0.2ms)[0m   [0;1mINSERT INTO `pages` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `description`, `archived`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Article', '2009-05-17 16:02:57', NULL, 'default.html.erb', NULL, NULL, 0, 0, NULL, 1, NULL, 0, 0, '/news/article', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = NULL) [0m
  [4;36;1mPage::Version Create (0.3ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Article', '2009-05-17 16:02:57', NULL, 'default.html.erb', NULL, NULL, 0, 7, NULL, 1, NULL, 0, 'Created', 0, '/news/article', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = NULL) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mSectionNode Load (0.4ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (section_id = 3) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mSectionNode Create (0.2ms)[0m   [0mINSERT INTO `section_nodes` (`node_type`, `updated_at`, `section_id`, `node_id`, `position`, `created_at`) VALUES('Page', '2009-05-17 16:02:57', 3, 7, 3, '2009-05-17 16:02:57')[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Update (0.3ms)[0m   [0mUPDATE `page_versions` SET `published` = 1, `updated_at` = '2009-05-17 16:02:57' WHERE `id` = 16[0m
  [4;36;1mPage Publish (0.3ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 1, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 0, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/news/article', `name` = 'Article' WHERE `id` = 7[0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 7)) AND (`connectors`.page_id = 7)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mNewsArticlePortlet Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `portlets`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mNewsArticlePortlet Create (0.3ms)[0m   [0;1mINSERT INTO `portlets` (`name`, `updated_at`, `updated_by_id`, `type`, `created_by_id`, `archived`, `deleted`, `created_at`) VALUES('News Article Portlet', '2009-05-17 16:02:57', NULL, 'NewsArticlePortlet', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;35;1mPortletAttribute Create (0.4ms)[0m   [0mINSERT INTO `portlet_attributes` (`portlet_id`, `name`, `value`) VALUES(3, 'publish_on_save', 1)[0m
  [4;36;1mPortletAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `portlet_attributes` (`portlet_id`, `name`, `value`) VALUES(3, 'template', '<% if @news_article -%>\n <% page_title @news_article.name %>\n <h2><%=h @news_article.name %></h2>\n <p><%= @news_article.body %></p>\n<% else -%>\n <b>Missing required parameter</b><br/>\n This portlet expects a request parameter \'news_article_id\'. Be sure the calling page provides it.\n<% end -%>')[0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/article' AND `pages`.id <> 7) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 1) AND (`connectors`.page_id = 7)) AND (`connectors`.page_id = 7)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPage::Version Create (0.3ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Article', '2009-05-17 16:02:57', NULL, 'default.html.erb', NULL, NULL, 1, 7, NULL, 2, NULL, 0, 'News Article Portlet \'News Article Portlet\' was added to the \'main\' container', 0, '/news/article', NULL, 0, 0, '2009-05-17 16:02:57')[0m
  [4;35;1mPage::Version Load (0.5ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage Publish (0.3ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 2, `title` = NULL, `template_file_name` = 'default.html.erb', `keywords` = NULL, `published` = 1, `cacheable` = 0, `description` = NULL, `archived` = 0, `language` = NULL, `path` = '/news/article', `name` = 'Article' WHERE `id` = 7[0m
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 7)) AND (`connectors`.page_id = 7)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 7 and connectors.page_version = 2 and connectors.container = 'main') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(3, 2, 'main', '2009-05-17 16:02:57', 7, NULL, 1, 'Portlet', '2009-05-17 16:02:57')[0m
  [4;36;1mSQL (12.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPageRoute Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `page_routes`[0m
  [4;36;1mPageRouteCondition Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `page_route_options`[0m
  [4;35;1mPageRouteRequirement Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPageRoute Exists (0.2ms)[0m   [0mSELECT `page_routes`.id FROM `page_routes` WHERE (`page_routes`.`pattern` = BINARY '/news/articles/:year/:month/:day/:slug') LIMIT 1[0m
  [4;36;1mPageRoute Create (0.2ms)[0m   [0;1mINSERT INTO `page_routes` (`name`, `updated_at`, `code`, `page_id`, `pattern`, `created_at`) VALUES('News Article', '2009-05-17 16:02:57', '@news_article = NewsArticle.released_on(params).with_slug(params[:slug]).first', 7, '/news/articles/:year/:month/:day/:slug', '2009-05-17 16:02:57')[0m
  [4;35;1mPageRouteCondition Create (0.1ms)[0m   [0mINSERT INTO `page_route_options` (`name`, `updated_at`, `type`, `page_route_id`, `value`, `created_at`) VALUES('method', '2009-05-17 16:02:57', 'PageRouteCondition', 1, 'get', '2009-05-17 16:02:57')[0m
  [4;36;1mPageRouteRequirement Create (0.1ms)[0m   [0;1mINSERT INTO `page_route_options` (`name`, `updated_at`, `type`, `page_route_id`, `value`, `created_at`) VALUES('year', '2009-05-17 16:02:57', 'PageRouteRequirement', 1, '\\d{4,}', '2009-05-17 16:02:57')[0m
  [4;35;1mPageRouteRequirement Create (0.1ms)[0m   [0mINSERT INTO `page_route_options` (`name`, `updated_at`, `type`, `page_route_id`, `value`, `created_at`) VALUES('month', '2009-05-17 16:02:57', 'PageRouteRequirement', 1, '\\d{2,}', '2009-05-17 16:02:57')[0m
  [4;36;1mPageRouteRequirement Create (0.1ms)[0m   [0;1mINSERT INTO `page_route_options` (`name`, `updated_at`, `type`, `page_route_id`, `value`, `created_at`) VALUES('day', '2009-05-17 16:02:57', 'PageRouteRequirement', 1, '\\d{2,}', '2009-05-17 16:02:57')[0m
  [4;35;1mSQL (1.7ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mPageRoute Load (0.3ms)[0m   [0;1mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
  [4;35;1mPageRouteRequirement Load (0.2ms)[0m   [0mSELECT * FROM `page_route_options` WHERE (`page_route_options`.page_route_id = 1) AND ( (`page_route_options`.`type` = 'PageRouteRequirement' ) ) [0m
  [4;36;1mPageRouteCondition Load (0.2ms)[0m   [0;1mSELECT * FROM `page_route_options` WHERE (`page_route_options`.page_route_id = 1) AND ( (`page_route_options`.`type` = 'PageRouteCondition' ) ) [0m
  [4;35;1mSQL (1.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090410193313')[0m
  [4;35;1mSQL (1.8ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (4.1ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW FIELDS FROM `attachment_versions`[0m
  [4;35;1mSQL (2.7ms)[0m   [0mdescribe `attachment_versions`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW KEYS FROM `attachment_versions`[0m
  [4;35;1mSQL (1.4ms)[0m   [0mSHOW FIELDS FROM `attachments`[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mdescribe `attachments`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `attachments`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `categories`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mdescribe `categories`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW KEYS FROM `categories`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mSHOW FIELDS FROM `category_types`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mdescribe `category_types`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `category_types`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `connectors`[0m
  [4;35;1mSQL (2.1ms)[0m   [0mdescribe `connectors`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW KEYS FROM `connectors`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `content_type_groups`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mdescribe `content_type_groups`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `content_type_groups`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `content_types`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mdescribe `content_types`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `content_types`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mSHOW FIELDS FROM `dynamic_view_versions`[0m
  [4;36;1mSQL (3.0ms)[0m   [0;1mdescribe `dynamic_view_versions`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `dynamic_view_versions`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mdescribe `dynamic_views`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW KEYS FROM `dynamic_views`[0m
  [4;35;1mSQL (1.4ms)[0m   [0mSHOW FIELDS FROM `email_messages`[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mdescribe `email_messages`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `email_messages`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW FIELDS FROM `file_block_versions`[0m
  [4;35;1mSQL (2.3ms)[0m   [0mdescribe `file_block_versions`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW KEYS FROM `file_block_versions`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mSHOW FIELDS FROM `file_blocks`[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mdescribe `file_blocks`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW KEYS FROM `file_blocks`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `group_permissions`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mdescribe `group_permissions`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW KEYS FROM `group_permissions`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `group_sections`[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mdescribe `group_sections`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `group_sections`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `group_type_permissions`[0m
  [4;35;1mSQL (2.3ms)[0m   [0mdescribe `group_type_permissions`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW KEYS FROM `group_type_permissions`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `group_types`[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mdescribe `group_types`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW KEYS FROM `group_types`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `groups`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mdescribe `groups`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `groups`[0m
  [4;35;1mSQL (1.4ms)[0m   [0mSHOW FIELDS FROM `html_block_versions`[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mdescribe `html_block_versions`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW KEYS FROM `html_block_versions`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW FIELDS FROM `html_blocks`[0m
  [4;35;1mSQL (2.8ms)[0m   [0mdescribe `html_blocks`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW KEYS FROM `html_blocks`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW FIELDS FROM `link_versions`[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mdescribe `link_versions`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `link_versions`[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW FIELDS FROM `links`[0m
  [4;35;1mSQL (2.7ms)[0m   [0mdescribe `links`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW KEYS FROM `links`[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW FIELDS FROM `news_article_versions`[0m
  [4;36;1mSQL (2.8ms)[0m   [0;1mdescribe `news_article_versions`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW KEYS FROM `news_article_versions`[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW FIELDS FROM `news_articles`[0m
  [4;35;1mSQL (2.2ms)[0m   [0mdescribe `news_articles`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW KEYS FROM `news_articles`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mdescribe `page_route_options`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW KEYS FROM `page_route_options`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `page_routes`[0m
  [4;35;1mSQL (2.1ms)[0m   [0mdescribe `page_routes`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW KEYS FROM `page_routes`[0m
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW FIELDS FROM `page_versions`[0m
  [4;36;1mSQL (3.0ms)[0m   [0;1mdescribe `page_versions`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `page_versions`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW FIELDS FROM `pages`[0m
  [4;35;1mSQL (3.0ms)[0m   [0mdescribe `pages`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW KEYS FROM `pages`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mdescribe `permissions`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW KEYS FROM `permissions`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `portlet_attributes`[0m
  [4;35;1mSQL (1.8ms)[0m   [0mdescribe `portlet_attributes`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW KEYS FROM `portlet_attributes`[0m
  [4;35;1mSQL (1.4ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mdescribe `portlets`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW KEYS FROM `portlets`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `redirects`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mdescribe `redirects`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `redirects`[0m
  [4;35;1mSQL (1.3ms)[0m   [0mSHOW FIELDS FROM `section_nodes`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mdescribe `section_nodes`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW KEYS FROM `section_nodes`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW FIELDS FROM `sections`[0m
  [4;35;1mSQL (2.3ms)[0m   [0mdescribe `sections`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `sections`[0m
  [4;35;1mSQL (1.3ms)[0m   [0mSHOW FIELDS FROM `sites`[0m
  [4;36;1mSQL (3.0ms)[0m   [0;1mdescribe `sites`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `sites`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `taggings`[0m
  [4;35;1mSQL (2.3ms)[0m   [0mdescribe `taggings`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW KEYS FROM `taggings`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `tags`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mdescribe `tags`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW KEYS FROM `tags`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `tasks`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mdescribe `tasks`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW KEYS FROM `tasks`[0m
  [4;35;1mSQL (1.3ms)[0m   [0mSHOW FIELDS FROM `user_group_memberships`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mdescribe `user_group_memberships`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW KEYS FROM `user_group_memberships`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mdescribe `users`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW KEYS FROM `users`[0m
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (0.3ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
  [4;36;1mPageRoute Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `page_routes`[0m
  [4;35;1mPageRouteRequirement Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mPageRouteRequirement Load (0.4ms)[0m   [0;1mSELECT * FROM `page_route_options` WHERE (`page_route_options`.page_route_id = 1) AND ( (`page_route_options`.`type` = 'PageRouteRequirement' ) ) [0m
  [4;35;1mPageRouteCondition Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mPageRouteCondition Load (0.6ms)[0m   [0;1mSELECT * FROM `page_route_options` WHERE (`page_route_options`.page_route_id = 1) AND ( (`page_route_options`.`type` = 'PageRouteCondition' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:03:43) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mGroup Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `groups`[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `redirects`[0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.5ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `pages`[0m
  [4;36;1mPage::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `page_versions`[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSectionNode Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `section_nodes`[0m
  [4;35;1mSection Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `sections`[0m
  [4;36;1mSection Load (0.4ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.7ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.5ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mConnector Columns (20.5ms)[0m   [0mSHOW FIELDS FROM `connectors`[0m
  [4;36;1mHtmlBlock Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `html_blocks`[0m
  [4;35;1mHtmlBlock Load (1.1ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `html_block_versions`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (15.2ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.9ms)
  [4;36;1mAbstractFileBlock Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `file_blocks`[0m
  [4;35;1mAbstractFileBlock Load (0.4ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `file_blocks`[0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mImageBlock::Version Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `file_block_versions`[0m
  [4;35;1mAttachment Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `attachments`[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.3ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment::Version Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `attachment_versions`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (10.2ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (7.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.7ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.5ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (77.7ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 669ms (View: 272, DB: 59) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:03:44) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (2.7ms)
Rendered layouts/_cms_toolbar (4.7ms)
Rendered layouts/cms/_footer (1.0ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:03:44) [GET]
  Parameters: {"page_version"=>"5", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.7ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '5')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (34.7ms)
Completed in 68ms (View: 53, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=5]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-17 18:03:58) [GET]
  Parameters: {"connect_to_container"=>"teaser", "connect_to_page_id"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.4ms)[0m   [0mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;36;1mContentType Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `content_types`[0m
  [4;35;1mContentTypeGroup Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `content_type_groups`[0m
  [4;36;1mContentType Load Including Associations (0.7ms)[0m   [0;1mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.8ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 109ms (View: 91, DB: 6) | 200 OK [http://localhost/cms/content_types?connect_to_container=teaser&connect_to_page_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:03:59) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 30ms (View: 21, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#new (for 127.0.0.1 at 2009-05-17 18:04:02) [GET]
  Parameters: {"news_article"=>{"connect_to_container"=>"teaser", "connect_to_page_id"=>"1"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `news_articles`[0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (news_articles.deleted = 0) ORDER BY news_articles.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (2.3ms)
Rendered cms/blocks/_toolbar (6.1ms)
Rendered cms/blocks/_hidden_fields (27.9ms)
Rendered cms/form_builder/_cms_text_field (1.7ms)
Rendered cms/form_builder/_cms_date_picker (1.5ms)
  [4;36;1mCategoryType Load (0.3ms)[0m   [0;1mSELECT * FROM `category_types` WHERE (category_types.name = 'News Article') LIMIT 1[0m
  [4;35;1mCategoryType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `category_types`[0m
  [4;36;1mCategory Load (0.3ms)[0m   [0;1mSELECT * FROM `categories` WHERE (((categories.parent_id is null) AND (`categories`.category_type_id = 1)) AND (`categories`.category_type_id = 1)) ORDER BY name[0m
Rendered cms/form_builder/_cms_drop_down (2.4ms)
Rendered cms/form_builder/_cms_text_area (1.6ms)
Rendered cms/form_builder/_cms_text_editor (2.7ms)
Rendered cms/form_builder/_cms_file_field (3.4ms)
  [4;35;1mTagging Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `taggings`[0m
Rendered cms/form_builder/_cms_tag_list (8.8ms)
Rendered cms/news_articles/_form (44.0ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 132ms (View: 114, DB: 8) | 200 OK [http://localhost/cms/news_articles/new?news_article%5Bconnect_to_container%5D=teaser&news_article%5Bconnect_to_page_id%5D=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:04:02) [GET]
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#index (for 127.0.0.1 at 2009-05-17 18:04:22) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (((html_blocks.deleted = 0))) ORDER BY html_blocks.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.4ms)
  [4;36;1mHtmlBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.4ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 138ms (View: 122, DB: 9) | 200 OK [http://localhost/cms/html_blocks]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:04:22) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::CategoryTypesController#index (for 127.0.0.1 at 2009-05-17 18:04:25) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'CategoryType') LIMIT 1[0m
  [4;36;1mCategoryType Load (0.2ms)[0m   [0;1mSELECT * FROM `category_types` ORDER BY category_types.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.3ms)
  [4;35;1mCategory Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `categories`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM `categories` WHERE (`categories`.category_type_id = 1) [0m
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.1ms)
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.1ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 2) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 31ms (View: 20, DB: 4) | 200 OK [http://localhost/cms/category_types]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:04:26) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 9ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#index (for 127.0.0.1 at 2009-05-17 18:04:31) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (((news_articles.deleted = 0))) ORDER BY news_articles.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.3ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 22ms (View: 16, DB: 2) | 200 OK [http://localhost/cms/news_articles]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:04:32) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#index (for 127.0.0.1 at 2009-05-17 18:04:35) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (((news_articles.deleted = 0))) ORDER BY news_articles.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.4ms)
Rendered layouts/cms/_head (1.5ms)
Rendered layouts/_cms_toolbar (1.1ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 24ms (View: 17, DB: 3) | 200 OK [http://localhost/cms/news_articles]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:04:36) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#index (for 127.0.0.1 at 2009-05-17 18:04:39) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (((news_articles.deleted = 0))) ORDER BY news_articles.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.2ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 22ms (View: 15, DB: 2) | 200 OK [http://localhost/cms/news_articles]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:04:39) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:04:47) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.6ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.4ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.4ms)
  [4;35;1mAbstractFileBlock Load (0.3ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (84.8ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.4ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.5ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.4ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 5 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.4ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 164ms (View: 146, DB: 10) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:04:48) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:04:48) [GET]
  Parameters: {"page_version"=>"5", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '5')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.9ms)
Completed in 36ms (View: 27, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=5]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-17 18:04:50) [GET]
  Parameters: {"connect_to_container"=>"teaser", "connect_to_page_id"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;36;1mContentType Load Including Associations (0.5ms)[0m   [0;1mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 94ms (View: 8, DB: 2) | 200 OK [http://localhost/cms/content_types?connect_to_container=teaser&connect_to_page_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:04:50) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#new (for 127.0.0.1 at 2009-05-17 18:04:52) [GET]
  Parameters: {"news_article"=>{"connect_to_container"=>"teaser", "connect_to_page_id"=>"1"}}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (news_articles.deleted = 0) ORDER BY news_articles.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.3ms)
Rendered cms/blocks/_hidden_fields (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_date_picker (0.3ms)
  [4;35;1mCategoryType Load (0.3ms)[0m   [0mSELECT * FROM `category_types` WHERE (category_types.name = 'News Article') LIMIT 1[0m
  [4;36;1mCategory Load (0.2ms)[0m   [0;1mSELECT * FROM `categories` WHERE (((categories.parent_id is null) AND (`categories`.category_type_id = 1)) AND (`categories`.category_type_id = 1)) ORDER BY name[0m
Rendered cms/form_builder/_cms_drop_down (1.0ms)
Rendered cms/form_builder/_cms_text_area (0.3ms)
Rendered cms/form_builder/_cms_text_editor (0.9ms)
Rendered cms/form_builder/_cms_file_field (1.0ms)
Rendered cms/form_builder/_cms_tag_list (1.2ms)
Rendered cms/news_articles/_form (8.9ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 31ms (View: 24, DB: 3) | 200 OK [http://localhost/cms/news_articles/new?news_article%5Bconnect_to_container%5D=teaser&news_article%5Bconnect_to_page_id%5D=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:04:52) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#create (for 127.0.0.1 at 2009-05-17 18:06:10) [POST]
  Parameters: {"commit"=>"Save", "news_article"=>{"name"=>"Neue Homepage", "connect_to_container"=>"teaser", "body"=>"<div id=\"preamble\">\r\n<div class=\"sectionbody\">\r\n<div class=\"paragraph\">\r\n<p>This guide covers how to download and install a module for BrowserCMS. With BrowserCMS, modules are packaged as Ruby Gems, which contain the code to add new behavior to a BrowserCMS project. Installing a module consists of several steps, including:</p>\r\n</div>\r\n<div class=\"olist arabic\">\r\n<ol class=\"arabic\">\r\n    <li>\r\n    <p>Getting the Gem installed</p>\r\n    </li>\r\n    <li>\r\n    <p>Telling BrowserCMS to use that Gem</p>\r\n    </li>\r\n    <li>\r\n    <p>Pulling the module specific code into your project (like migrations)</p>\r\n    </li>\r\n    <li>\r\n    <p>Running migrations</p>\r\n    </li>\r\n</ol>\r\n</div>\r\n<div class=\"paragraph\">\r\n<p>Once you have done the above steps, you should have access to the Content blocks and portlets that each module provides, and you can add them to your pages.</p>\r\n</div>\r\n</div>\r\n</div>\r\n<h2 id=\"_installation\">1. Installation</h2>\r\n<div class=\"paragraph\">\r\n<p>This module assumes you are going to be building the module from source code, and installing to a project locally to your computer. Let&rsquo;s assume you want to install the News module, who&rsquo;s project name (and gem name) is <em>bcms_news</em>. If you want to install other modules, just substitute the name of the module you want for <em>bcms_news</em>.</p>\r\n</div>", "lock_version"=>"0", "summary"=>"Neue Homepage ist bald online", "tag_list"=>"", "release_date"=>"05/17/2009", "connect_to_page_id"=>"1"}, "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "dhtml_selector"=>"", "temp"=>""}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mNewsArticle::Version Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `news_article_versions`[0m
  [4;36;1mNewsArticle Create (0.4ms)[0m   [0;1mINSERT INTO `news_articles` (`name`, `slug`, `attachment_id`, `updated_at`, `body`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `category_id`, `attachment_version`, `summary`, `archived`, `deleted`, `release_date`, `created_at`) VALUES('Neue Homepage', 'neue-homepage', NULL, '2009-05-17 16:06:10', '<div id=\"preamble\">\r\n<div class=\"sectionbody\">\r\n<div class=\"paragraph\">\r\n<p>This guide covers how to download and install a module for BrowserCMS. With BrowserCMS, modules are packaged as Ruby Gems, which contain the code to add new behavior to a BrowserCMS project. Installing a module consists of several steps, including:</p>\r\n</div>\r\n<div class=\"olist arabic\">\r\n<ol class=\"arabic\">\r\n <li>\r\n <p>Getting the Gem installed</p>\r\n </li>\r\n <li>\r\n <p>Telling BrowserCMS to use that Gem</p>\r\n </li>\r\n <li>\r\n <p>Pulling the module specific code into your project (like migrations)</p>\r\n </li>\r\n <li>\r\n <p>Running migrations</p>\r\n </li>\r\n</ol>\r\n</div>\r\n<div class=\"paragraph\">\r\n<p>Once you have done the above steps, you should have access to the Content blocks and portlets that each module provides, and you can add them to your pages.</p>\r\n</div>\r\n</div>\r\n</div>\r\n<h2 id=\"_installation\">1. Installation</h2>\r\n<div class=\"paragraph\">\r\n<p>This module assumes you are going to be building the module from source code, and installing to a project locally to your computer. Let&rsquo;s assume you want to install the News module, who&rsquo;s project name (and gem name) is <em>bcms_news</em>. If you want to install other modules, just substitute the name of the module you want for <em>bcms_news</em>.</p>\r\n</div>', 1, 0, 0, 1, 1, NULL, NULL, 'Neue Homepage ist bald online', 0, 0, '2009-05-17 00:00:00', '2009-05-17 16:06:10')[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 5) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-17 16:06:10', '', 'home.html.erb', '', 1, 1, 1, 1, 6, '', 0, 'News Article \'Neue Homepage\' was added to the \'teaser\' container', 0, '/', '', 1, 0, '2009-05-17 16:06:10')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 6 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(4, 6, 'content', '2009-05-17 16:06:10', 1, 1, 1, 'HtmlBlock', '2009-05-17 16:06:10')[0m
  [4;35;1mConnector Load (0.2ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 6 and connectors.container = 'footer') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(5, 6, 'footer', '2009-05-17 16:06:10', 1, 1, 1, 'HtmlBlock', '2009-05-17 16:06:10')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 6 and connectors.container = 'quote') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.1ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 6, 'quote', '2009-05-17 16:06:10', 1, 1, 1, 'AbstractFileBlock', '2009-05-17 16:06:10')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 6 and connectors.container = 'teaser') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 6, 'teaser', '2009-05-17 16:06:10', 1, 1, 1, 'NewsArticle', '2009-05-17 16:06:10')[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = NULL) [0m
  [4;35;1mNewsArticle::Version Create (0.3ms)[0m   [0mINSERT INTO `news_article_versions` (`name`, `slug`, `attachment_id`, `updated_at`, `body`, `updated_by_id`, `published`, `created_by_id`, `version`, `category_id`, `attachment_version`, `summary`, `archived`, `version_comment`, `deleted`, `news_article_id`, `release_date`, `created_at`) VALUES('Neue Homepage', 'neue-homepage', NULL, '2009-05-17 16:06:10', '<div id=\"preamble\">\r\n<div class=\"sectionbody\">\r\n<div class=\"paragraph\">\r\n<p>This guide covers how to download and install a module for BrowserCMS. With BrowserCMS, modules are packaged as Ruby Gems, which contain the code to add new behavior to a BrowserCMS project. Installing a module consists of several steps, including:</p>\r\n</div>\r\n<div class=\"olist arabic\">\r\n<ol class=\"arabic\">\r\n <li>\r\n <p>Getting the Gem installed</p>\r\n </li>\r\n <li>\r\n <p>Telling BrowserCMS to use that Gem</p>\r\n </li>\r\n <li>\r\n <p>Pulling the module specific code into your project (like migrations)</p>\r\n </li>\r\n <li>\r\n <p>Running migrations</p>\r\n </li>\r\n</ol>\r\n</div>\r\n<div class=\"paragraph\">\r\n<p>Once you have done the above steps, you should have access to the Content blocks and portlets that each module provides, and you can add them to your pages.</p>\r\n</div>\r\n</div>\r\n</div>\r\n<h2 id=\"_installation\">1. Installation</h2>\r\n<div class=\"paragraph\">\r\n<p>This module assumes you are going to be building the module from source code, and installing to a project locally to your computer. Let&rsquo;s assume you want to install the News module, who&rsquo;s project name (and gem name) is <em>bcms_news</em>. If you want to install other modules, just substitute the name of the module you want for <em>bcms_news</em>.</p>\r\n</div>', 1, 0, 1, 1, NULL, NULL, 'Neue Homepage ist bald online', 0, 'Created', 0, 1, '2009-05-17 00:00:00', '2009-05-17 16:06:10')[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Load Including Associations (0.4ms)[0m   [0mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 0)) [0m
  [4;36;1mTagging Load (0.2ms)[0m   [0;1mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 1 AND `taggings`.taggable_type = 'NewsArticle') [0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Redirected to http://localhost:3000/
Completed in 51ms (DB: 11) | 302 Found [http://localhost/cms/news_articles]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:06:10) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (3.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.6ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.4ms)
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.6ms)
  [4;35;1mNewsArticle Load (0.3ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (9.5ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.5ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 103ms (View: 79, DB: 14) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:06:11) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:06:11) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.5ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (19.4ms)
Completed in 32ms (View: 22, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:06:29) [GET]
  Parameters: {"path"=>["news", "articles"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/news/articles') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/news/articles') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 5 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 5) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mPortlet Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mPortlet Load (0.5ms)[0m   [0;1mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 1) [0m
  [4;35;1mRecentNewsPortlet Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) [0m
..... Rendering connectable RecentNewsPortlet #1 
  [4;35;1mPortletAttribute Load (0.4ms)[0m   [0mSELECT * FROM `portlet_attributes` WHERE (`portlet_attributes`.portlet_id = 1) [0m
  [4;36;1mPortletAttribute Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `portlet_attributes`[0m
  [4;35;1mNewsArticle Load (0.3ms)[0m   [0mSELECT * FROM `news_articles` WHERE (news_articles.deleted = 0) ORDER BY release_date DESC LIMIT 5[0m
Rendered cms/pages/_edit_connector (18.8ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;35;1mSection Load (0.3ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 3)) AND (`section_nodes`.section_id = 3)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mPageTemplate Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (((`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb') AND (dynamic_views.deleted = 0)) AND (`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb')) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) LIMIT 1[0m
Exception: edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}
On line #17 of tmp/views/layouts/templates/default.html.erb

    14:       <p>BrowserCMS has been installed successfully.</p> 
    15: 
    16:       <h2>Getting Started</h2>
    17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
    18: 
    19:       <%= container :main %>
    20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'
Handling Exception: 
ActionView::TemplateError (edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}) on line #17 of tmp/views/layouts/templates/default.html.erb:
14:       <p>BrowserCMS has been installed successfully.</p> 
15: 
16:       <h2>Getting Started</h2>
17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
18: 
19:       <%= container :main %>
20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'

Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:06:29) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SectionNodesController#index (for 127.0.0.1 at 2009-05-17 18:06:47) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (root = 1) LIMIT 1[0m
Rendering template within layouts/cms/section_nodes
Rendering cms/section_nodes/index
Rendered cms/section_nodes/_node (2.1ms)
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) ORDER BY position[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) [0m
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (1.8ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) ORDER BY position[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (1.9ms)
Rendered cms/section_nodes/_page (7.4ms)
Rendered cms/section_nodes/_section_node (10.8ms)
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.5ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (6.1ms)
Rendered cms/section_nodes/_section_node (7.0ms)
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 4 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.2ms)
Rendered cms/section_nodes/_section_node (5.2ms)
Rendered cms/section_nodes/_section (30.6ms)
Rendered cms/section_nodes/_section_node (34.4ms)
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mGroup Load (0.2ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 1)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.2ms)
Rendered cms/section_nodes/_page (4.2ms)
Rendered cms/section_nodes/_section_node (5.2ms)
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
Rendered cms/section_nodes/_section_node (0.8ms)
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) [0m
  [4;35;1mGroup Load (0.2ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) ORDER BY position[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 5 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.4ms)
Rendered cms/section_nodes/_section_node (5.3ms)
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 6 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (4.0ms)
Rendered cms/section_nodes/_section_node (5.1ms)
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 7 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (4.5ms)
Rendered cms/section_nodes/_section_node (5.7ms)
Rendered cms/section_nodes/_section (20.0ms)
Rendered cms/section_nodes/_section_node (20.6ms)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (85.4ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 178ms (View: 160, DB: 12) | 200 OK [http://localhost/cms/sitemap]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:06:47) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SectionsController#edit (for 127.0.0.1 at 2009-05-17 18:06:54) [GET]
  Parameters: {"id"=>"3"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mGroupType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `group_types`[0m
  [4;36;1mSection Load Including Associations (0.7ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `group_types`.`id` AS t2_r0, `group_types`.`name` AS t2_r1, `group_types`.`guest` AS t2_r2, `group_types`.`cms_access` AS t2_r3, `group_types`.`created_at` AS t2_r4, `group_types`.`updated_at` AS t2_r5, `users`.`id` AS t3_r0, `users`.`login` AS t3_r1, `users`.`first_name` AS t3_r2, `users`.`last_name` AS t3_r3, `users`.`email` AS t3_r4, `users`.`crypted_password` AS t3_r5, `users`.`salt` AS t3_r6, `users`.`created_at` AS t3_r7, `users`.`updated_at` AS t3_r8, `users`.`expires_at` AS t3_r9, `users`.`remember_token` AS t3_r10, `users`.`remember_token_expires_at` AS t3_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `group_types` ON `group_types`.id = `groups`.group_type_id LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1 and group_types.cms_access = 1) [0m
Rendering template within layouts/cms/application
Rendering cms/sections/edit
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
  [4;35;1mGroup Load Including Associations (0.5ms)[0m   [0mSELECT `groups`.`id` AS t0_r0, `groups`.`name` AS t0_r1, `groups`.`code` AS t0_r2, `groups`.`group_type_id` AS t0_r3, `groups`.`created_at` AS t0_r4, `groups`.`updated_at` AS t0_r5, `group_types`.`id` AS t1_r0, `group_types`.`name` AS t1_r1, `group_types`.`guest` AS t1_r2, `group_types`.`cms_access` AS t1_r3, `group_types`.`created_at` AS t1_r4, `group_types`.`updated_at` AS t1_r5 FROM `groups` LEFT OUTER JOIN `group_types` ON `group_types`.id = `groups`.group_type_id WHERE (group_types.cms_access = 0) ORDER BY groups.name[0m
  [4;36;1mGroup Exists (0.2ms)[0m   [0;1mSELECT `groups`.id FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`id` = 1) AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
  [4;35;1mGroup Load Including Associations (0.4ms)[0m   [0mSELECT `groups`.`id` AS t0_r0, `groups`.`name` AS t0_r1, `groups`.`code` AS t0_r2, `groups`.`group_type_id` AS t0_r3, `groups`.`created_at` AS t0_r4, `groups`.`updated_at` AS t0_r5, `group_types`.`id` AS t1_r0, `group_types`.`name` AS t1_r1, `group_types`.`guest` AS t1_r2, `group_types`.`cms_access` AS t1_r3, `group_types`.`created_at` AS t1_r4, `group_types`.`updated_at` AS t1_r5 FROM `groups` LEFT OUTER JOIN `group_types` ON `group_types`.id = `groups`.group_type_id WHERE (group_types.cms_access = 1) ORDER BY groups.name[0m
  [4;36;1mGroup Exists (0.2ms)[0m   [0;1mSELECT `groups`.id FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`id` = 2) AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
  [4;35;1mGroup Exists (0.2ms)[0m   [0mSELECT `groups`.id FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`id` = 3) AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/sections/_form (10.1ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 42ms (View: 23, DB: 5) | 200 OK [http://localhost/cms/sections/3/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:06:55) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#edit (for 127.0.0.1 at 2009-05-17 18:07:08) [GET]
  Parameters: {"id"=>"5"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
Rendering template within layouts/cms/application
Rendering cms/pages/edit
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
  [4;35;1mPageTemplate Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendered cms/form_builder/_cms_drop_down (1.0ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/pages/_form (86.5ms)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 110ms (View: 99, DB: 2) | 200 OK [http://localhost/cms/pages/5/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:07:09) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#update (for 127.0.0.1 at 2009-05-17 18:07:16) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"5", "page"=>{"name"=>"Overview", "language"=>"", "template_file_name"=>"home.html.erb", "title"=>"", "lock_version"=>"0", "description"=>"", "archived"=>"0", "path"=>"/news/articles", "keywords"=>"", "hidden"=>"0", "cacheable"=>"0"}}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/articles' AND `pages`.id <> 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPortlet Load (0.2ms)[0m   [0;1mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 1) [0m
  [4;35;1mRecentNewsPortlet Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (33.9ms)[0m   [0;1mROLLBACK[0m
Handling Exception: undefined method `draft' for "Recent News Portlet 'Recent News Portlet'":RecentNewsPortlet
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:07:17) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#update (for 127.0.0.1 at 2009-05-17 18:07:32) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"5", "page"=>{"name"=>"Overview", "language"=>"", "template_file_name"=>"home.html.erb", "title"=>"", "lock_version"=>"0", "description"=>"", "archived"=>"0", "path"=>"/news/articles", "keywords"=>"", "hidden"=>"0", "cacheable"=>"0"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/articles' AND `pages`.id <> 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mPortlet Load (0.1ms)[0m   [0mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 1) [0m
  [4;36;1mRecentNewsPortlet Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `portlets`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
Handling Exception: undefined method `draft' for "Recent News Portlet 'Recent News Portlet'":RecentNewsPortlet
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:07:33) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#index (for 127.0.0.1 at 2009-05-17 18:07:35) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (((html_blocks.deleted = 0))) ORDER BY html_blocks.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.2ms)
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 52ms (View: 40, DB: 8) | 200 OK [http://localhost/cms/content_library]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:07:36) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DashboardController#index (for 127.0.0.1 at 2009-05-17 18:07:46) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (((`pages`.`published` = 0) AND (pages.deleted = 0)) AND (`pages`.`published` = 0)) ORDER BY updated_at desc[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `tasks`[0m
  [4;35;1mTask Load Including Associations (1.7ms)[0m   [0mSELECT `tasks`.`id` AS t0_r0, `tasks`.`assigned_by_id` AS t0_r1, `tasks`.`assigned_to_id` AS t0_r2, `tasks`.`page_id` AS t0_r3, `tasks`.`comment` AS t0_r4, `tasks`.`due_date` AS t0_r5, `tasks`.`completed_at` AS t0_r6, `tasks`.`created_at` AS t0_r7, `tasks`.`updated_at` AS t0_r8, `pages`.`id` AS t1_r0, `pages`.`version` AS t1_r1, `pages`.`lock_version` AS t1_r2, `pages`.`name` AS t1_r3, `pages`.`title` AS t1_r4, `pages`.`path` AS t1_r5, `pages`.`template_file_name` AS t1_r6, `pages`.`description` AS t1_r7, `pages`.`keywords` AS t1_r8, `pages`.`language` AS t1_r9, `pages`.`cacheable` AS t1_r10, `pages`.`hidden` AS t1_r11, `pages`.`published` AS t1_r12, `pages`.`deleted` AS t1_r13, `pages`.`archived` AS t1_r14, `pages`.`created_by_id` AS t1_r15, `pages`.`updated_by_id` AS t1_r16, `pages`.`created_at` AS t1_r17, `pages`.`updated_at` AS t1_r18 FROM `tasks` LEFT OUTER JOIN `pages` ON `pages`.id = `tasks`.page_id WHERE (((completed_at is null) AND (`tasks`.assigned_to_id = 1)) AND (`tasks`.assigned_to_id = 1)) ORDER BY tasks.due_date desc, pages.name[0m
Rendering template within layouts/cms/dashboard
Rendering cms/dashboard/index
Rendered cms/dashboard/_page_drafts (3.0ms)
Rendered cms/dashboard/_tasks (2.9ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 38ms (View: 24, DB: 5) | 200 OK [http://localhost/cms/dashboard]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:07:46) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:07:47) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.5ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.7ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (8.0ms)
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.3ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (7.5ms)
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (7.9ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.3ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 180ms (View: 160, DB: 11) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:07:47) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:07:48) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.6ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (20.3ms)
Completed in 32ms (View: 23, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#publish (for 127.0.0.1 at 2009-05-17 18:07:58) [PUT]
  Parameters: {"authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Publish (0.2ms)[0m   [0mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 6, `title` = '', `template_file_name` = 'home.html.erb', `keywords` = '', `published` = 1, `cacheable` = 1, `description` = '', `archived` = 0, `language` = '', `path` = '/', `name` = 'Home' WHERE `id` = 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY position, connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mNewsArticle::Version Update (0.2ms)[0m   [0;1mUPDATE `news_article_versions` SET `published` = 1, `updated_at` = '2009-05-17 16:07:58' WHERE `id` = 1[0m
  [4;35;1mNewsArticle Publish (0.2ms)[0m   [0mUPDATE `news_articles` SET `deleted` = 0, `version` = 1, `body` = '<div id=\"preamble\">\r\n<div class=\"sectionbody\">\r\n<div class=\"paragraph\">\r\n<p>This guide covers how to download and install a module for BrowserCMS. With BrowserCMS, modules are packaged as Ruby Gems, which contain the code to add new behavior to a BrowserCMS project. Installing a module consists of several steps, including:</p>\r\n</div>\r\n<div class=\"olist arabic\">\r\n<ol class=\"arabic\">\r\n <li>\r\n <p>Getting the Gem installed</p>\r\n </li>\r\n <li>\r\n <p>Telling BrowserCMS to use that Gem</p>\r\n </li>\r\n <li>\r\n <p>Pulling the module specific code into your project (like migrations)</p>\r\n </li>\r\n <li>\r\n <p>Running migrations</p>\r\n </li>\r\n</ol>\r\n</div>\r\n<div class=\"paragraph\">\r\n<p>Once you have done the above steps, you should have access to the Content blocks and portlets that each module provides, and you can add them to your pages.</p>\r\n</div>\r\n</div>\r\n</div>\r\n<h2 id=\"_installation\">1. Installation</h2>\r\n<div class=\"paragraph\">\r\n<p>This module assumes you are going to be building the module from source code, and installing to a project locally to your computer. Let&rsquo;s assume you want to install the News module, who&rsquo;s project name (and gem name) is <em>bcms_news</em>. If you want to install other modules, just substitute the name of the module you want for <em>bcms_news</em>.</p>\r\n</div>', `slug` = 'neue-homepage', `category_id` = NULL, `attachment_version` = NULL, `published` = 1, `release_date` = '2009-05-17 00:00:00', `summary` = 'Neue Homepage ist bald online', `archived` = 0, `attachment_id` = NULL, `name` = 'Neue Homepage' WHERE `id` = 1[0m
Could not publish, NoMethodError: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.publish
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/behaviors/attaching.rb:152:in `after_publish'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/behaviors/publishing.rb:91:in `publish!'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:182:in `transaction'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:188:in `transaction'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/behaviors/publishing.rb:62:in `publish!'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/behaviors/publishing.rb:50:in `publish'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/associations/association_proxy.rb:221:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/associations/association_proxy.rb:221:in `method_missing'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/models/page.rb:70:in `after_publish'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/models/page.rb:68:in `each'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/models/page.rb:68:in `after_publish'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/behaviors/publishing.rb:91:in `publish!'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:182:in `transaction'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/transactions.rb:188:in `transaction'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/behaviors/publishing.rb:62:in `publish!'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/behaviors/publishing.rb:50:in `publish'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/pages_controller.rb:70:in `send'
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/pages_controller.rb:70:in `publish'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1322:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1322:in `perform_action_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:617:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 17ms (DB: 4) | 302 Found [http://localhost/cms/pages/1/publish]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:07:58) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.3ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.4ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (8.4ms)
  [4;35;1mAbstractFileBlock Load (0.3ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.9ms)
  [4;35;1mNewsArticle Load (0.3ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (7.4ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.7ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 103ms (View: 79, DB: 12) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.5ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:07:59) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (2.2ms)
Rendered layouts/_cms_toolbar (1.2ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:07:59) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.4ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (22.6ms)
Completed in 36ms (View: 26, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:08:07) [GET]
  Parameters: {"mode"=>"view", "path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.6ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;36;1mNewsArticle Load (1.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.3ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable NewsArticle #1 v1
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 46ms (View: 30, DB: 8) | 200 OK [http://localhost/?mode=view]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:08:07) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:08:07) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.1ms)
Completed in 36ms (View: 26, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:08:12) [GET]
  Parameters: {"path"=>["news", "articles"]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/news/articles') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/news/articles') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 5 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 5) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPortlet Load (0.2ms)[0m   [0;1mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 1) [0m
  [4;35;1mRecentNewsPortlet Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
..... Rendering connectable RecentNewsPortlet #1 
  [4;36;1mPortletAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `portlet_attributes` WHERE (`portlet_attributes`.portlet_id = 1) [0m
  [4;35;1mPortletAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `portlet_attributes`[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (news_articles.deleted = 0) ORDER BY release_date DESC LIMIT 5[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.4ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 3)) AND (`section_nodes`.section_id = 3)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (((`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb') AND (dynamic_views.deleted = 0)) AND (`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb')) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) LIMIT 1[0m
Exception: edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}
On line #17 of tmp/views/layouts/templates/default.html.erb

    14:       <p>BrowserCMS has been installed successfully.</p> 
    15: 
    16:       <h2>Getting Started</h2>
    17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
    18: 
    19:       <%= container :main %>
    20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'
Handling Exception: 
ActionView::TemplateError (edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}) on line #17 of tmp/views/layouts/templates/default.html.erb:
14:       <p>BrowserCMS has been installed successfully.</p> 
15: 
16:       <h2>Getting Started</h2>
17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
18: 
19:       <%= container :main %>
20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'

Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:08:12) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#index (for 127.0.0.1 at 2009-05-17 18:08:15) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.4ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (((html_blocks.deleted = 0))) ORDER BY html_blocks.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.2ms)
  [4;35;1mHtmlBlock::Version Load (0.4ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.4ms)
Completed in 53ms (View: 40, DB: 8) | 200 OK [http://localhost/cms/content_library]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:08:15) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SectionNodesController#index (for 127.0.0.1 at 2009-05-17 18:08:18) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (root = 1) LIMIT 1[0m
Rendering template within layouts/cms/section_nodes
Rendering cms/section_nodes/index
Rendered cms/section_nodes/_node (0.2ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) ORDER BY position[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) [0m
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) ORDER BY position[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.4ms)
Rendered cms/section_nodes/_section_node (5.5ms)
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (4.0ms)
Rendered cms/section_nodes/_section_node (4.9ms)
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 4 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (83.3ms)
Rendered cms/section_nodes/_page (86.8ms)
Rendered cms/section_nodes/_section_node (87.7ms)
Rendered cms/section_nodes/_section (102.4ms)
Rendered cms/section_nodes/_section_node (103.3ms)
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 1)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (5.0ms)
Rendered cms/section_nodes/_section_node (6.3ms)
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
Rendered cms/section_nodes/_section_node (0.9ms)
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) [0m
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) ORDER BY position[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 5 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.3ms)
Rendered cms/section_nodes/_section_node (5.3ms)
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 6 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (4.5ms)
Rendered cms/section_nodes/_section_node (5.6ms)
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 7 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (4.4ms)
Rendered cms/section_nodes/_section_node (5.4ms)
Rendered cms/section_nodes/_section (20.4ms)
Rendered cms/section_nodes/_section_node (21.2ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 144ms (View: 129, DB: 11) | 200 OK [http://localhost/cms/sitemap]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:08:18) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#edit (for 127.0.0.1 at 2009-05-17 18:08:24) [GET]
  Parameters: {"id"=>"5"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
Rendering template within layouts/cms/application
Rendering cms/pages/edit
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
  [4;35;1mPageTemplate Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendered cms/form_builder/_cms_drop_down (0.9ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/pages/_form (6.7ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 19ms (View: 12, DB: 2) | 200 OK [http://localhost/cms/pages/5/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:08:24) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#update (for 127.0.0.1 at 2009-05-17 18:08:32) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"5", "page"=>{"name"=>"Overview", "language"=>"", "template_file_name"=>"home.html.erb", "title"=>"", "lock_version"=>"0", "description"=>"", "archived"=>"0", "path"=>"/news/articles", "keywords"=>"", "hidden"=>"0", "cacheable"=>"0"}}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/articles' AND `pages`.id <> 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPortlet Load (0.2ms)[0m   [0;1mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 1) [0m
  [4;35;1mRecentNewsPortlet Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
Handling Exception: undefined method `draft' for "Recent News Portlet 'Recent News Portlet'":RecentNewsPortlet
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.5ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:08:32) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#edit (for 127.0.0.1 at 2009-05-17 18:08:57) [GET]
  Parameters: {"id"=>"6"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
Rendering template within layouts/cms/application
Rendering cms/pages/edit
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
  [4;36;1mPageTemplate Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendered cms/form_builder/_cms_drop_down (0.9ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
Rendered cms/pages/_form (6.2ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 19ms (View: 12, DB: 2) | 200 OK [http://localhost/cms/pages/6/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:08:57) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#update (for 127.0.0.1 at 2009-05-17 18:09:06) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"6", "page"=>{"name"=>"Archive", "language"=>"", "template_file_name"=>"home.html.erb", "title"=>"", "lock_version"=>"0", "description"=>"", "archived"=>"0", "path"=>"/news/archive", "keywords"=>"", "hidden"=>"0", "cacheable"=>"0"}}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/archive' AND `pages`.id <> 6) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 6)) AND (`connectors`.page_id = 6)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mPortlet Load (0.2ms)[0m   [0mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 2) [0m
  [4;36;1mNewsArchivePortlet Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `portlets`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
Handling Exception: undefined method `draft' for "News Archive Portlet 'News Archive Portlet'":NewsArchivePortlet
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:09:06) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DashboardController#index (for 127.0.0.1 at 2009-05-17 18:09:12) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (((`pages`.`published` = 0) AND (pages.deleted = 0)) AND (`pages`.`published` = 0)) ORDER BY updated_at desc[0m
  [4;35;1mTask Load Including Associations (2.1ms)[0m   [0mSELECT `tasks`.`id` AS t0_r0, `tasks`.`assigned_by_id` AS t0_r1, `tasks`.`assigned_to_id` AS t0_r2, `tasks`.`page_id` AS t0_r3, `tasks`.`comment` AS t0_r4, `tasks`.`due_date` AS t0_r5, `tasks`.`completed_at` AS t0_r6, `tasks`.`created_at` AS t0_r7, `tasks`.`updated_at` AS t0_r8, `pages`.`id` AS t1_r0, `pages`.`version` AS t1_r1, `pages`.`lock_version` AS t1_r2, `pages`.`name` AS t1_r3, `pages`.`title` AS t1_r4, `pages`.`path` AS t1_r5, `pages`.`template_file_name` AS t1_r6, `pages`.`description` AS t1_r7, `pages`.`keywords` AS t1_r8, `pages`.`language` AS t1_r9, `pages`.`cacheable` AS t1_r10, `pages`.`hidden` AS t1_r11, `pages`.`published` AS t1_r12, `pages`.`deleted` AS t1_r13, `pages`.`archived` AS t1_r14, `pages`.`created_by_id` AS t1_r15, `pages`.`updated_by_id` AS t1_r16, `pages`.`created_at` AS t1_r17, `pages`.`updated_at` AS t1_r18 FROM `tasks` LEFT OUTER JOIN `pages` ON `pages`.id = `tasks`.page_id WHERE (((completed_at is null) AND (`tasks`.assigned_to_id = 1)) AND (`tasks`.assigned_to_id = 1)) ORDER BY tasks.due_date desc, pages.name[0m
Rendering template within layouts/cms/dashboard
Rendering cms/dashboard/index
Rendered cms/dashboard/_page_drafts (0.4ms)
Rendered cms/dashboard/_tasks (0.4ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 6, DB: 3) | 200 OK [http://localhost/cms/dashboard]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:09:12) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:09:13) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.6ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable NewsArticle #1 v1
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 47ms (View: 31, DB: 7) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:09:14) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:09:14) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (21.7ms)
Completed in 35ms (View: 26, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:09:24) [GET]
  Parameters: {"mode"=>"edit", "path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.8ms)
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (8.2ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.8ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.7ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 183ms (View: 164, DB: 11) | 200 OK [http://localhost/?mode=edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:09:24) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:09:24) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.0ms)
Completed in 36ms (View: 26, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#show (for 127.0.0.1 at 2009-05-17 18:09:27) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/show
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/blocks/_toolbar_for_member (5.2ms)
Rendered cms/blocks/_toolbar (8.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1)) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1)) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
..... Rendering connectable NewsArticle #1 v1
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 48ms (View: 39, DB: 3) | 200 OK [http://localhost/cms/news_articles/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:09:28) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:09:50) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.3ms)
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.7ms)
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.6ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mNewsArticle::Version Load (0.3ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.6ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (89.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (6.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 182ms (View: 162, DB: 12) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:09:50) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.3ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:09:50) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (21.4ms)
Completed in 34ms (View: 25, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:18:16) [GET]
  Parameters: {"path"=>["news", "articles"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/news/articles') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/news/articles') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 5 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 5) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mPortlet Load (0.2ms)[0m   [0mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 1) [0m
  [4;36;1mRecentNewsPortlet Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `portlets`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) [0m
..... Rendering connectable RecentNewsPortlet #1 
  [4;36;1mPortletAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `portlet_attributes` WHERE (`portlet_attributes`.portlet_id = 1) [0m
  [4;35;1mPortletAttribute Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `portlet_attributes`[0m
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (news_articles.deleted = 0) ORDER BY release_date DESC LIMIT 5[0m
Rendered cms/pages/_edit_connector (20.7ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 3)) AND (`section_nodes`.section_id = 3)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mPageTemplate Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (((`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb') AND (dynamic_views.deleted = 0)) AND (`dynamic_views`.`format` = 'html' AND `dynamic_views`.`name` = 'default' AND `dynamic_views`.`handler` = 'erb')) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) LIMIT 1[0m
Exception: edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}
On line #17 of tmp/views/layouts/templates/default.html.erb

    14:       <p>BrowserCMS has been installed successfully.</p> 
    15: 
    16:       <h2>Getting Started</h2>
    17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
    18: 
    19:       <%= container :main %>
    20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'
Handling Exception: 
ActionView::TemplateError (edit_cms_page_template_url failed to generate from {:action=>"edit", :controller=>"cms/dynamic_views", :id=>nil}, expected: {:action=>"edit", :controller=>"cms/dynamic_views"}, diff: {:id=>nil}) on line #17 of tmp/views/layouts/templates/default.html.erb:
14:       <p>BrowserCMS has been installed successfully.</p> 
15: 
16:       <h2>Getting Started</h2>
17:       <p>To start building your site, you can either <%= link_to "alter this template", edit_cms_page_template_path(PageTemplate.find_by_file_name("default.html.erb")) %> or <%= link_to "create a new one", new_cms_page_template_path %>.  You will be prompted to login with the credentials provided during the install process.  To change which template the pages use, you can click the 'Edit Properties' button above, and choose a different template. After all pages in the site, use the new template, you can safely delete this one.</p>
18: 
19:       <%= container :main %>
20:     </div>

    (eval):16:in `edit_cms_page_template_path'
    tmp/views/layouts/templates/default.html.erb:17
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    haml (2.1.0) lib/haml/helpers/action_view_mods.rb:14:in `render'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:61:in `render_page'
    browsercms (3.0.0) app/controllers/cms/content_controller.rb:198:in `check_access_to_page'
    haml (2.1.0) lib/sass/plugin/rails.rb:19:in `process'

Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:18:17) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#index (for 127.0.0.1 at 2009-05-17 18:19:26) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (((html_blocks.deleted = 0))) ORDER BY html_blocks.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.2ms)
  [4;35;1mHtmlBlock::Version Load (0.4ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 51ms (View: 39, DB: 8) | 200 OK [http://localhost/cms/content_library]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:19:27) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::UsersController#index (for 127.0.0.1 at 2009-05-17 18:19:30) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ((expires_at IS NULL OR expires_at >= '2009-05-17 16:19:30')) ORDER BY first_name, last_name, email LIMIT 0, 10[0m
  [4;35;1mUserGroupMembership Load (0.2ms)[0m   [0mSELECT `user_group_memberships`.* FROM `user_group_memberships` WHERE (`user_group_memberships`.user_id = 1) [0m
  [4;36;1mUserGroupMembership Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `user_group_memberships`[0m
Rendering template within layouts/cms/administration
Rendering cms/users/index
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT * FROM `groups` [0m
WARNING: Can't mass-assign these protected attributes: id
Rendered cms/users/_toolbar (3.9ms)
  [4;36;1mGroup Load (0.4ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `user_group_memberships` ON `groups`.id = `user_group_memberships`.group_id WHERE ((`user_group_memberships`.user_id = 1)) ORDER BY groups.name[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (2.1ms)
Rendered cms/shared/_admin_sidebar (2.5ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 51ms (View: 39, DB: 3) | 200 OK [http://localhost/cms/administration]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:19:30) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-17 18:19:31) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 40ms (View: 31, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:19:32) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PageRoutesController#index (for 127.0.0.1 at 2009-05-17 18:19:35) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageRoute Load (0.3ms)[0m   [0;1mSELECT * FROM `page_routes` ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/page_routes/index
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 22ms (View: 14, DB: 1) | 200 OK [http://localhost/cms/page_routes]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:19:36) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-17 18:19:44) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPagePartial Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mPagePartial Load (0.5ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PagePartial' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 22ms (View: 7, DB: 3) | 200 OK [http://localhost/cms/page_partials]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:19:44) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (1.3ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.3ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 10ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-17 18:19:48) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:19:48) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#index (for 127.0.0.1 at 2009-05-17 18:23:30) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.7ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.4ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (((html_blocks.deleted = 0))) ORDER BY html_blocks.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.3ms)
  [4;36;1mHtmlBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 131ms (View: 42, DB: 8) | 200 OK [http://localhost/cms/content_library]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:23:30) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#index (for 127.0.0.1 at 2009-05-17 18:23:33) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (((news_articles.deleted = 0))) ORDER BY news_articles.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.2ms)
  [4;35;1mNewsArticle::Version Load (0.3ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1)) [0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 29ms (View: 21, DB: 3) | 200 OK [http://localhost/cms/news_articles]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:23:34) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#index (for 127.0.0.1 at 2009-05-17 18:23:35) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (((news_articles.deleted = 0))) ORDER BY news_articles.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.3ms)
  [4;36;1mNewsArticle::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1)) [0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.4ms)
Completed in 30ms (View: 22, DB: 3) | 200 OK [http://localhost/cms/news_articles]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:23:36) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#edit (for 127.0.0.1 at 2009-05-17 18:23:45) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/edit
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/blocks/_toolbar_for_member (3.3ms)
Rendered cms/blocks/_toolbar (4.0ms)
Rendered cms/blocks/_hidden_fields (0.6ms)
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_date_picker (0.3ms)
  [4;36;1mCategoryType Load (0.3ms)[0m   [0;1mSELECT * FROM `category_types` WHERE (category_types.name = 'News Article') LIMIT 1[0m
  [4;35;1mCategory Load (0.3ms)[0m   [0mSELECT * FROM `categories` WHERE (((categories.parent_id is null) AND (`categories`.category_type_id = 1)) AND (`categories`.category_type_id = 1)) ORDER BY name[0m
Rendered cms/form_builder/_cms_drop_down (1.0ms)
Rendered cms/form_builder/_cms_text_area (0.3ms)
Rendered cms/form_builder/_cms_text_editor (1.1ms)
Rendered cms/form_builder/_cms_file_field (0.9ms)
  [4;36;1mTag Load (0.4ms)[0m   [0;1mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.id = `taggings`.tag_id WHERE ((`taggings`.taggable_type = 'NewsArticle') AND (`taggings`.taggable_id = 1)) ORDER BY tags.name[0m
Rendered cms/form_builder/_cms_tag_list (1.9ms)
Rendered cms/news_articles/_form (10.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'NewsArticle' and connectors.connectable_version = 1)) [0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.1ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 85ms (View: 76, DB: 4) | 200 OK [http://localhost/cms/news_articles/1/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:23:45) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.7ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 89ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SectionNodesController#index (for 127.0.0.1 at 2009-05-17 18:23:58) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (root = 1) LIMIT 1[0m
Rendering template within layouts/cms/section_nodes
Rendering cms/section_nodes/index
Rendered cms/section_nodes/_node (0.3ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) ORDER BY position[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) [0m
  [4;36;1mGroup Load (0.2ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 2) ORDER BY position[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 2) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 2 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.2ms)
Rendered cms/section_nodes/_section_node (5.3ms)
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 3) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (4.3ms)
Rendered cms/section_nodes/_section_node (5.2ms)
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 4) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 4 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 2)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.4ms)
Rendered cms/section_nodes/_page (3.9ms)
Rendered cms/section_nodes/_section_node (5.0ms)
Rendered cms/section_nodes/_section (19.8ms)
Rendered cms/section_nodes/_section_node (20.7ms)
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 1)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.2ms)
Rendered cms/section_nodes/_page (4.2ms)
Rendered cms/section_nodes/_section_node (5.1ms)
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
Rendered cms/section_nodes/_section_node (0.9ms)
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 3 AND `section_nodes`.node_type = 'Section') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) [0m
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.2ms)
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) ORDER BY position[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 5 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (4.0ms)
Rendered cms/section_nodes/_section_node (5.0ms)
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 6 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.2ms)
Rendered cms/section_nodes/_page (3.9ms)
Rendered cms/section_nodes/_section_node (4.8ms)
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 7 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `group_sections` ON `groups`.id = `group_sections`.group_id WHERE (`groups`.`code` = 'guest') AND ((`group_sections`.section_id = 3)) LIMIT 1[0m
Rendered cms/section_nodes/_node (0.3ms)
Rendered cms/section_nodes/_page (3.8ms)
Rendered cms/section_nodes/_section_node (4.7ms)
Rendered cms/section_nodes/_section (18.4ms)
Rendered cms/section_nodes/_section_node (19.1ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 58ms (View: 44, DB: 11) | 200 OK [http://localhost/cms/sitemap]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:23:58) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#edit (for 127.0.0.1 at 2009-05-17 18:24:14) [GET]
  Parameters: {"id"=>"7"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
Rendering template within layouts/cms/application
Rendering cms/pages/edit
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
  [4;35;1mPageTemplate Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendered cms/form_builder/_cms_drop_down (0.9ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
Rendered cms/pages/_form (6.5ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 19ms (View: 12, DB: 2) | 200 OK [http://localhost/cms/pages/7/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:24:14) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#update (for 127.0.0.1 at 2009-05-17 18:24:23) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"7", "page"=>{"name"=>"Article", "language"=>"", "template_file_name"=>"home.html.erb", "title"=>"", "lock_version"=>"0", "description"=>"", "archived"=>"0", "path"=>"/news/article", "keywords"=>"", "hidden"=>"0", "cacheable"=>"0"}}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/news/article' AND `pages`.id <> 7) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 7)) AND (`connectors`.page_id = 7)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPortlet Load (0.2ms)[0m   [0;1mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 3) [0m
  [4;35;1mNewsArticlePortlet Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
Handling Exception: undefined method `draft' for "News Article Portlet 'News Article Portlet'":NewsArticlePortlet
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:24:24) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 3, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#index (for 127.0.0.1 at 2009-05-17 18:25:11) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.4ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (((html_blocks.deleted = 0))) ORDER BY html_blocks.name LIMIT 0, 15[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/index
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.2ms)
  [4;35;1mHtmlBlock::Version Load (0.4ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 2 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 2) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 5 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 1 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 1) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 3 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 3) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(DISTINCT `pages`.id) AS count_all FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1) AND (pages.deleted = 0)) AND (connectors.connectable_id = 4 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (1.1ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 133ms (View: 120, DB: 8) | 200 OK [http://localhost/cms/content_library]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:25:11) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::UsersController#index (for 127.0.0.1 at 2009-05-17 18:25:15) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ((expires_at IS NULL OR expires_at >= '2009-05-17 16:25:15')) ORDER BY first_name, last_name, email LIMIT 0, 10[0m
  [4;35;1mUserGroupMembership Load (0.2ms)[0m   [0mSELECT `user_group_memberships`.* FROM `user_group_memberships` WHERE (`user_group_memberships`.user_id = 1) [0m
Rendering template within layouts/cms/administration
Rendering cms/users/index
  [4;36;1mGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `groups` [0m
WARNING: Can't mass-assign these protected attributes: id
Rendered cms/users/_toolbar (1.9ms)
  [4;35;1mGroup Load (0.4ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `user_group_memberships` ON `groups`.id = `user_group_memberships`.group_id WHERE ((`user_group_memberships`.user_id = 1)) ORDER BY groups.name[0m
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 9, DB: 2) | 200 OK [http://localhost/cms/administration]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:25:15) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-17 18:25:18) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://localhost/cms/page_templates]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:25:18) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#new (for 127.0.0.1 at 2009-05-17 18:25:23) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/new
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_drop_down (1.0ms)
Rendered cms/form_builder/_cms_text_area (0.4ms)
Rendered cms/dynamic_views/_form (4.9ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 21ms (View: 16, DB: 1) | 200 OK [http://localhost/cms/page_templates/new]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:25:23) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.4ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.6ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#create (for 127.0.0.1 at 2009-05-17 18:25:37) [POST]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "page_template"=>{"name"=>"Default", "format"=>"html", "body"=>"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n  <head>\r\n    <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n    <title><%= page_title %></title>\r\n    <%= yield :html_head %>\r\n  </head>\r\n  <body>\r\n    <%= cms_toolbar %>\r\n    <%= container :main %>\r\n  </body>\r\n</html>\r\n", "handler"=>"erb"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `dynamic_views` WHERE (`dynamic_views`.`name` = BINARY 'Default' AND `dynamic_views`.format = 'html' AND `dynamic_views`.handler = 'erb') AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/new
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.2ms)
Rendered cms/form_builder/_cms_drop_down (1.0ms)
Rendered cms/form_builder/_cms_text_area (0.3ms)
Rendered cms/dynamic_views/_form (4.2ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 20ms (View: 10, DB: 2) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:25:37) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#create (for 127.0.0.1 at 2009-05-17 18:25:46) [POST]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "page_template"=>{"name"=>"default", "format"=>"html", "body"=>"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n  <head>\r\n    <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n    <title><%= page_title %></title>\r\n    <%= yield :html_head %>\r\n  </head>\r\n  <body>\r\n    <%= cms_toolbar %>\r\n    <%= container :main %>\r\n  </body>\r\n</html>\r\n", "handler"=>"erb"}}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `dynamic_views` WHERE (`dynamic_views`.`name` = BINARY 'default' AND `dynamic_views`.format = 'html' AND `dynamic_views`.handler = 'erb') AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;36;1mPageTemplate::Version Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_view_versions`[0m
  [4;35;1mPageTemplate Create (0.3ms)[0m   [0mINSERT INTO `dynamic_views` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `handler`, `published`, `lock_version`, `type`, `created_by_id`, `version`, `archived`, `deleted`, `created_at`) VALUES('default', 'html', '2009-05-17 16:25:46', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n <head>\r\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n <title><%= page_title %></title>\r\n <%= yield :html_head %>\r\n </head>\r\n <body>\r\n <%= cms_toolbar %>\r\n <%= container :main %>\r\n </body>\r\n</html>\r\n', 1, 'erb', 0, 0, 'PageTemplate', 1, 1, 0, 0, '2009-05-17 16:25:46')[0m
  [4;36;1mPageTemplate::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = NULL) [0m
  [4;35;1mPageTemplate::Version Create (0.2ms)[0m   [0mINSERT INTO `dynamic_view_versions` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `dynamic_view_id`, `handler`, `published`, `type`, `created_by_id`, `version`, `archived`, `version_comment`, `deleted`, `created_at`) VALUES('default', 'html', '2009-05-17 16:25:46', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n <head>\r\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n <title><%= page_title %></title>\r\n <%= yield :html_head %>\r\n </head>\r\n <body>\r\n <%= cms_toolbar %>\r\n <%= container :main %>\r\n </body>\r\n</html>\r\n', 1, 3, 'erb', 0, NULL, 1, 1, 0, 'Created', 0, '2009-05-17 16:25:46')[0m
  [4;36;1mPageTemplate::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 3) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate::Version Update (0.2ms)[0m   [0mUPDATE `dynamic_view_versions` SET `published` = 1, `updated_at` = '2009-05-17 16:25:46' WHERE `id` = 5[0m
  [4;36;1mPageTemplate Publish (0.2ms)[0m   [0;1mUPDATE `dynamic_views` SET `deleted` = 0, `handler` = 'erb', `version` = 1, `body` = '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n <head>\r\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n <title><%= page_title %></title>\r\n <%= yield :html_head %>\r\n </head>\r\n <body>\r\n <%= cms_toolbar %>\r\n <%= container :main %>\r\n </body>\r\n</html>\r\n', `published` = 1, `archived` = 0, `format` = 'html', `name` = 'default' WHERE `id` = 3[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/cms/page_templates
Completed in 21ms (DB: 5) | 302 Found [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-17 18:25:46) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (3.2ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 10, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:25:46) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.3ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DashboardController#index (for 127.0.0.1 at 2009-05-17 18:25:50) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (((`pages`.`published` = 0) AND (pages.deleted = 0)) AND (`pages`.`published` = 0)) ORDER BY updated_at desc[0m
  [4;36;1mTask Load Including Associations (2.0ms)[0m   [0;1mSELECT `tasks`.`id` AS t0_r0, `tasks`.`assigned_by_id` AS t0_r1, `tasks`.`assigned_to_id` AS t0_r2, `tasks`.`page_id` AS t0_r3, `tasks`.`comment` AS t0_r4, `tasks`.`due_date` AS t0_r5, `tasks`.`completed_at` AS t0_r6, `tasks`.`created_at` AS t0_r7, `tasks`.`updated_at` AS t0_r8, `pages`.`id` AS t1_r0, `pages`.`version` AS t1_r1, `pages`.`lock_version` AS t1_r2, `pages`.`name` AS t1_r3, `pages`.`title` AS t1_r4, `pages`.`path` AS t1_r5, `pages`.`template_file_name` AS t1_r6, `pages`.`description` AS t1_r7, `pages`.`keywords` AS t1_r8, `pages`.`language` AS t1_r9, `pages`.`cacheable` AS t1_r10, `pages`.`hidden` AS t1_r11, `pages`.`published` AS t1_r12, `pages`.`deleted` AS t1_r13, `pages`.`archived` AS t1_r14, `pages`.`created_by_id` AS t1_r15, `pages`.`updated_by_id` AS t1_r16, `pages`.`created_at` AS t1_r17, `pages`.`updated_at` AS t1_r18 FROM `tasks` LEFT OUTER JOIN `pages` ON `pages`.id = `tasks`.page_id WHERE (((completed_at is null) AND (`tasks`.assigned_to_id = 1)) AND (`tasks`.assigned_to_id = 1)) ORDER BY tasks.due_date desc, pages.name[0m
Rendering template within layouts/cms/dashboard
Rendering cms/dashboard/index
Rendered cms/dashboard/_page_drafts (0.5ms)
Rendered cms/dashboard/_tasks (0.4ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 6, DB: 3) | 200 OK [http://localhost/cms/dashboard]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-17 18:25:51) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:25:53) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.4ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.3ms)
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.6ms)
  [4;35;1mNewsArticle Load (0.3ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (7.5ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.8ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (90.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 181ms (View: 161, DB: 11) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:25:53) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:25:53) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.3ms)
Completed in 36ms (View: 27, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:25:56) [GET]
  Parameters: {"path"=>["news", "articles"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/news/articles') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/news/articles') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 5 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 5) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPortlet Load (0.2ms)[0m   [0;1mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 1) [0m
  [4;35;1mRecentNewsPortlet Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 5)) AND (`connectors`.page_id = 5)) [0m
..... Rendering connectable RecentNewsPortlet #1 
  [4;35;1mPortletAttribute Load (0.4ms)[0m   [0mSELECT * FROM `portlet_attributes` WHERE (`portlet_attributes`.portlet_id = 1) [0m
  [4;36;1mPortletAttribute Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `portlet_attributes`[0m
  [4;35;1mNewsArticle Load (0.3ms)[0m   [0mSELECT * FROM `news_articles` WHERE (news_articles.deleted = 0) ORDER BY release_date DESC LIMIT 5[0m
Rendered cms/pages/_edit_connector (97.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 5) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 5) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 5)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 131ms (View: 113, DB: 9) | 200 OK [http://localhost/news/articles]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:25:56) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:25:56) [GET]
  Parameters: {"page_version"=>"2", "mode"=>"edit", "amp"=>nil, "page_id"=>"5", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.7ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = '2')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 5 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 5) AND ((completed_at is null) AND (`tasks`.page_id = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 5) AND ((completed_at is null) AND (`tasks`.page_id = 5)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 5) AND ((completed_at is null) AND (`tasks`.page_id = 5)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (22.1ms)
Completed in 36ms (View: 25, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=5&amp;page_toolbar=1&amp;page_version=2]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show_page_route (for 127.0.0.1 at 2009-05-17 18:26:08) [GET]
  Parameters: {"slug"=>"neue-homepage", "month"=>"05", "_page_route_id"=>"1", "day"=>"17", "year"=>"2009"}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageRoute Load (0.3ms)[0m   [0mSELECT * FROM `page_routes` WHERE (`page_routes`.`id` = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mNewsArticle Load (0.3ms)[0m   [0mSELECT * FROM `news_articles` WHERE ((((news_articles.slug = 'neue-homepage') AND (news_articles.release_date >= '2009-05-17 00:00:00' AND news_articles.release_date < '2009-05-18 00:00:00')) AND (news_articles.deleted = 0)) AND ((news_articles.slug = 'neue-homepage') AND (news_articles.release_date >= '2009-05-17 00:00:00' AND news_articles.release_date < '2009-05-18 00:00:00'))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/news/article') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 7 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE ((((news_articles.slug = 'neue-homepage') AND (news_articles.release_date >= '2009-05-17 00:00:00' AND news_articles.release_date < '2009-05-18 00:00:00')) AND (news_articles.deleted = 0)) AND ((news_articles.slug = 'neue-homepage') AND (news_articles.release_date >= '2009-05-17 00:00:00' AND news_articles.release_date < '2009-05-18 00:00:00'))) LIMIT 1[0m
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 7) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 7)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPortlet Load (0.2ms)[0m   [0;1mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 3) [0m
  [4;35;1mNewsArticlePortlet Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 7)) AND (`connectors`.page_id = 7)) [0m
..... Rendering connectable NewsArticlePortlet #3 
  [4;35;1mPortletAttribute Load (0.4ms)[0m   [0mSELECT * FROM `portlet_attributes` WHERE (`portlet_attributes`.portlet_id = 3) [0m
  [4;36;1mPortletAttribute Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `portlet_attributes`[0m
Rendered cms/pages/_edit_connector (99.4ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.8ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 7) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 7)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 7) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 7)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (6.0ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 135ms (View: 113, DB: 9) | 200 OK [http://localhost/news/articles/2009/05/17/neue-homepage]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:26:08) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:26:08) [GET]
  Parameters: {"page_version"=>"2", "mode"=>"edit", "amp"=>nil, "page_id"=>"7", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = '2')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 7 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 7) AND ((completed_at is null) AND (`tasks`.page_id = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 7) AND ((completed_at is null) AND (`tasks`.page_id = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 7) AND ((completed_at is null) AND (`tasks`.page_id = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 7) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 7) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (21.6ms)
Completed in 34ms (View: 25, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=7&amp;page_toolbar=1&amp;page_version=2]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:26:17) [GET]
  Parameters: {"path"=>["news", "archive"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/news/archive') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/news/archive') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 6 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/default
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 6) AND ((`connectors`.`page_version` = 2) AND (`connectors`.page_id = 6)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mPortlet Load (0.2ms)[0m   [0;1mSELECT * FROM `portlets` WHERE (`portlets`.`id` = 2) [0m
  [4;35;1mNewsArchivePortlet Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `portlets`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 6)) AND (`connectors`.page_id = 6)) [0m
..... Rendering connectable NewsArchivePortlet #2 
  [4;35;1mPortletAttribute Load (0.4ms)[0m   [0mSELECT * FROM `portlet_attributes` WHERE (`portlet_attributes`.portlet_id = 2) [0m
  [4;36;1mPortletAttribute Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `portlet_attributes`[0m
  [4;35;1mNewsArticle Load (0.3ms)[0m   [0mSELECT * FROM `news_articles` WHERE (news_articles.deleted = 0) ORDER BY release_date desc[0m
Rendered cms/pages/_edit_connector (21.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 6) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 6)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 6) AND (((`connectors`.`page_version` = 2 AND `connectors`.`container` = 'main')) AND (`connectors`.page_id = 6)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 133ms (View: 115, DB: 9) | 200 OK [http://localhost/news/archive]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-17 18:26:17) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-17 18:26:17) [GET]
  Parameters: {"page_version"=>"2", "mode"=>"edit", "amp"=>nil, "page_id"=>"6", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = '2')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 6 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 6) AND ((completed_at is null) AND (`tasks`.page_id = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 6) AND ((completed_at is null) AND (`tasks`.page_id = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 6) AND ((completed_at is null) AND (`tasks`.page_id = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 6) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6 AND (`page_versions`.`version` = 2)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 6) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (20.8ms)
Completed in 35ms (View: 24, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=6&amp;page_toolbar=1&amp;page_version=2]
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (249.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (39.9ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (240.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (201.8ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (187.6ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (239.1ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
  [4;36;1mPageRoute Columns (11.5ms)[0m   [0;1mSHOW FIELDS FROM `page_routes`[0m
  [4;35;1mPageRouteRequirement Columns (28.8ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mPageRouteRequirement Load (16.0ms)[0m   [0;1mSELECT * FROM `page_route_options` WHERE (`page_route_options`.page_route_id = 1) AND ( (`page_route_options`.`type` = 'PageRouteRequirement' ) ) [0m
  [4;35;1mPageRouteCondition Columns (13.5ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mPageRouteCondition Load (53.6ms)[0m   [0;1mSELECT * FROM `page_route_options` WHERE (`page_route_options`.page_route_id = 1) AND ( (`page_route_options`.`type` = 'PageRouteCondition' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:03:46) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Columns (111.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (86.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mGroup Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `groups`[0m
  [4;35;1mPermission Load Including Associations (102.7ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Columns (15.3ms)[0m   [0;1mSHOW FIELDS FROM `redirects`[0m
  [4;35;1mRedirect Load (4.7ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (15.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `pages`[0m
  [4;36;1mPage::Version Load (2.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `page_versions`[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mSectionNode Load (1.5ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSectionNode Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `section_nodes`[0m
  [4;35;1mSection Columns (12.8ms)[0m   [0mSHOW FIELDS FROM `sections`[0m
  [4;36;1mSection Load (18.8ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (22.9ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (19.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mConnector Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `connectors`[0m
  [4;36;1mHtmlBlock Columns (14.8ms)[0m   [0;1mSHOW FIELDS FROM `html_blocks`[0m
  [4;35;1mHtmlBlock Load (108.1ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (20.6ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `html_block_versions`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (61.6ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.4ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (176.2ms)
  [4;35;1mHtmlBlock Load (0.4ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (9.6ms)
  [4;36;1mAbstractFileBlock Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `file_blocks`[0m
  [4;35;1mAbstractFileBlock Load (15.4ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `file_blocks`[0m
  [4;35;1mImageBlock::Version Load (18.7ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mImageBlock::Version Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `file_block_versions`[0m
  [4;35;1mAttachment Columns (33.6ms)[0m   [0mSHOW FIELDS FROM `attachments`[0m
  [4;36;1mAttachment Load (20.4ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (1.5ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment::Version Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `attachment_versions`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (23.6ms)
  [4;35;1mNewsArticle Columns (15.3ms)[0m   [0mSHOW FIELDS FROM `news_articles`[0m
  [4;36;1mNewsArticle Load (15.6ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (1.5ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mNewsArticle::Version Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `news_article_versions`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (15.8ms)
  [4;36;1mSectionNode Load (0.5ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (13.1ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (10.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 1637ms (View: 407, DB: 786) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:03:48) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (10.2ms)
Rendered layouts/_cms_toolbar (13.6ms)
Rendered layouts/cms/_footer (1.2ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:03:48) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (23.6ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (101.5ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (204.1ms)
Completed in 308ms (View: 171, DB: 128) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:06:52) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (5.7ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (8.2ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.8ms)
  [4;36;1mAbstractFileBlock Load (11.0ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.6ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.5ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (7.0ms)
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 193ms (View: 83, DB: 29) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:06:53) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.8ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:06:53) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.7ms)
Completed in 115ms (View: 105, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:07:15) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.6ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.5ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (8.2ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.7ms)
  [4;35;1mAbstractFileBlock Load (0.3ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.9ms)
  [4;35;1mNewsArticle Load (0.3ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (7.5ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 101ms (View: 80, DB: 11) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:07:15) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (1.3ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:07:15) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.3ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.0ms)
Completed in 36ms (View: 27, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:08:40) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.7ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (7.3ms)
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mNewsArticle Load (0.2ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
..... Rendering connectable NewsArticle #1 v1
Rendered cms/pages/_edit_connector (7.5ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 6 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 100ms (View: 80, DB: 11) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:08:40) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.3ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.8ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:08:41) [GET]
  Parameters: {"page_version"=>"6", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '6')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.9ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.4ms)
Completed in 37ms (View: 26, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=6]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ConnectorsController#destroy (for 127.0.0.1 at 2009-05-18 15:09:08) [DELETE]
  Parameters: {"_redirect_to"=>"/", "authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o=", "id"=>"16"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.`id` = 16) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mNewsArticle Load (0.2ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mSQL (13.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (57.7ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.6ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) AND (news_articles.deleted = 0) [0m
  [4;36;1mNewsArticle::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mPage::Version Create (42.1ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-18 13:09:08', '', 'home.html.erb', '', 1, 1, 1, 1, 7, '', 0, 'News Article \'Neue Homepage\' was removed from the \'teaser\' container', 0, '/', '', 1, 0, '2009-05-18 13:09:08')[0m
  [4;35;1mConnector Load (13.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 7 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (121.0ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(4, 7, 'content', '2009-05-18 13:09:08', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:09:08')[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 7 and connectors.container = 'footer') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(5, 7, 'footer', '2009-05-18 13:09:08', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:09:08')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 7 and connectors.container = 'quote') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 7, 'quote', '2009-05-18 13:09:08', 1, 1, 1, 'AbstractFileBlock', '2009-05-18 13:09:08')[0m
  [4;35;1mConnector Load (0.2ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 7 and connectors.container = 'teaser') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 7, 'teaser', '2009-05-18 13:09:08', 1, 1, 1, 'NewsArticle', '2009-05-18 13:09:08')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`connectable_version` = 1 AND `connectors`.`position` = 1 AND `connectors`.`connectable_id` = 1 AND `connectors`.`connectable_type` = 'NewsArticle' AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position LIMIT 1[0m
  [4;35;1mConnector Update (113.0ms)[0m   [0mUPDATE `connectors` SET position = (position - 1) WHERE (connectors.page_id = 1 and connectors.page_version = 7 and connectors.container = 'teaser' AND position > 1) [0m
  [4;36;1mConnector Update (34.1ms)[0m   [0;1mUPDATE `connectors` SET `position` = NULL, `updated_at` = '2009-05-18 13:09:08' WHERE `id` = 20[0m
  [4;35;1mConnector Destroy (11.7ms)[0m   [0mDELETE FROM `connectors` WHERE `id` = 20[0m
  [4;36;1mSQL (50.5ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 503ms (DB: 464) | 302 Found [http://localhost/cms/connectors/16?_redirect_to=%2F]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:09:08) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (1.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.6ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.6ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (8.0ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.9ms)
  [4;35;1mAbstractFileBlock Load (0.3ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (7.1ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.5ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.3ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 164ms (View: 143, DB: 12) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:09:08) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.7ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.4ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:09:08) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.4ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (22.7ms)
Completed in 35ms (View: 26, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SessionsController#destroy (for 127.0.0.1 at 2009-05-18 15:09:56) [DELETE]
  Parameters: {"authenticity_token"=>"V1gozI0KXG/Eq8sY0QFALAqVz9YsX00LP4tB4vEnw9o="}
Redirected to http://localhost:3000/
Completed in 4ms (DB: 0) | 302 Found [http://localhost/cms/logout]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:09:56) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mGuestUser Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT * FROM `groups` WHERE (`groups`.`code` = 'guest') LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
..... Displaying live version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND ((((`pages`.`published` = 1 AND `pages`.`archived` = 0)) AND (pages.deleted = 0)) AND ((`pages`.`published` = 1 AND `pages`.`archived` = 0))) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Exists (0.2ms)[0m   [0;1mSELECT `sections`.id FROM `sections` INNER JOIN `group_sections` ON `sections`.id = `group_sections`.section_id WHERE (`sections`.`id` = 1) AND ((`group_sections`.group_id = 1)) LIMIT 1[0m
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable NewsArticle #1 v1
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Completed in 56ms (View: 29, DB: 8) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:10:05) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mGroup Load (0.3ms)[0m   [0mSELECT * FROM `groups` WHERE (`groups`.`code` = 'guest') LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
..... Displaying live version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND ((((`pages`.`published` = 1 AND `pages`.`archived` = 0)) AND (pages.deleted = 0)) AND ((`pages`.`published` = 1 AND `pages`.`archived` = 0))) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Exists (0.2ms)[0m   [0;1mSELECT `sections`.id FROM `sections` INNER JOIN `group_sections` ON `sections`.id = `group_sections`.section_id WHERE (`sections`.`id` = 1) AND ((`group_sections`.group_id = 1)) LIMIT 1[0m
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 6) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (`news_articles`.`id` = 1) [0m
  [4;35;1mNewsArticle::Version Load (0.2ms)[0m   [0mSELECT * FROM `news_article_versions` WHERE (`news_article_versions`.news_article_id = 1 AND (`news_article_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable NewsArticle #1 v1
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Completed in 40ms (View: 28, DB: 6) | 200 OK [http://localhost.dev/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HomeController#index (for 127.0.0.1 at 2009-05-18 15:10:18) [GET]
Redirected to http://localhost:3000/cms/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 1ms (DB: 0) | 302 Found [http://localhost/cms]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SessionsController#new (for 127.0.0.1 at 2009-05-18 15:10:18) [GET]
Rendering template within layouts/cms/login
Rendering cms/sessions/new
Rendered layouts/cms/_footer (0.1ms)
Completed in 25ms (View: 24, DB: 0) | 200 OK [http://localhost/cms/login]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SessionsController#create (for 127.0.0.1 at 2009-05-18 15:10:29) [POST]
  Parameters: {"commit"=>"LOGIN", "authenticity_token"=>"BdUwN6ybhnR+s2R3oZvFXvBBlXd31eUSBpB8XrFhLzQ=", "login"=>"cmsadmin", "password"=>"cmsadmin"}
  [4;35;1mUser Load (29.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`login` = 'cmsadmin') LIMIT 1[0m
Redirected to http://localhost:3000/cms
Completed in 47ms (DB: 30) | 302 Found [http://localhost/cms/login]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HomeController#index (for 127.0.0.1 at 2009-05-18 15:10:30) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (1.2ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Redirected to http://localhost:3000/
Completed in 10ms (DB: 2) | 302 Found [http://localhost/cms]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:10:30) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.6ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (20.6ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.5ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;36;1mHtmlBlock Load (0.6ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.4ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 141ms (View: 103, DB: 28) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:10:30) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (1.2ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.8ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (2.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:10:30) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.4ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 6)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (19.8ms)
Completed in 33ms (View: 23, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#publish (for 127.0.0.1 at 2009-05-18 15:10:33) [PUT]
  Parameters: {"authenticity_token"=>"BdUwN6ybhnR+s2R3oZvFXvBBlXd31eUSBpB8XrFhLzQ=", "id"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage Publish (13.1ms)[0m   [0;1mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 7, `title` = '', `template_file_name` = 'home.html.erb', `keywords` = '', `published` = 1, `cacheable` = 1, `description` = '', `archived` = 0, `language` = '', `path` = '/', `name` = 'Home' WHERE `id` = 1[0m
  [4;35;1mPage Load (14.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY position, connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 45ms (DB: 31) | 302 Found [http://localhost/cms/pages/1/publish]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:10:33) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.9ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 45ms (View: 28, DB: 8) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:10:33) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.7ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.4ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:10:33) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.8ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (25.0ms)
Completed in 39ms (View: 30, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SessionsController#destroy (for 127.0.0.1 at 2009-05-18 15:10:37) [DELETE]
  Parameters: {"authenticity_token"=>"BdUwN6ybhnR+s2R3oZvFXvBBlXd31eUSBpB8XrFhLzQ="}
Redirected to http://localhost:3000/
Completed in 1ms (DB: 0) | 302 Found [http://localhost/cms/logout]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:10:37) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `groups` WHERE (`groups`.`code` = 'guest') LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
  [4;36;1mRedirect Load (0.1ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT count(*) AS count_all FROM `permissions` INNER JOIN `group_permissions` ON `permissions`.id = `group_permissions`.permission_id WHERE (name in ('edit_content','publish_content','administrate')) AND ((`group_permissions`.group_id = 1)) [0m
..... Displaying live version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND ((((`pages`.`published` = 1 AND `pages`.`archived` = 0)) AND (pages.deleted = 0)) AND ((`pages`.`published` = 1 AND `pages`.`archived` = 0))) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Exists (0.2ms)[0m   [0mSELECT `sections`.id FROM `sections` INNER JOIN `group_sections` ON `sections`.id = `group_sections`.section_id WHERE (`sections`.`id` = 1) AND ((`group_sections`.group_id = 1)) LIMIT 1[0m
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (20.4ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;35;1mAbstractFileBlock Load (0.3ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;35;1mSectionNode Load (0.7ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.3ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Completed in 60ms (View: 28, DB: 27) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HomeController#index (for 127.0.0.1 at 2009-05-18 15:13:20) [GET]
Redirected to http://localhost:3000/cms/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 1ms (DB: 0) | 302 Found [http://localhost/cms]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SessionsController#new (for 127.0.0.1 at 2009-05-18 15:13:20) [GET]
Rendering template within layouts/cms/login
Rendering cms/sessions/new
Rendered layouts/cms/_footer (0.1ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://localhost/cms/login]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::SessionsController#create (for 127.0.0.1 at 2009-05-18 15:13:32) [POST]
  Parameters: {"commit"=>"LOGIN", "authenticity_token"=>"3PU1JbTj9nAZVBUny6A3JPh5vXnjWm1Szo5N+PLdeHs=", "login"=>"cmsadmin", "password"=>"cmsadmin"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`login` = 'cmsadmin') LIMIT 1[0m
Redirected to http://localhost:3000/cms
Completed in 3ms (DB: 1) | 302 Found [http://localhost/cms/login]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HomeController#index (for 127.0.0.1 at 2009-05-18 15:13:32) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (1.2ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Redirected to http://localhost:3000/
Completed in 5ms (DB: 2) | 302 Found [http://localhost/cms]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:13:32) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (1.3ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.9ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.5ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 43ms (View: 24, DB: 8) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:13:32) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.3ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.2ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:13:32) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (37.5ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.3ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (62.8ms)
Completed in 77ms (View: 29, DB: 41) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::UsersController#index (for 127.0.0.1 at 2009-05-18 15:13:41) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mUser Load (12.2ms)[0m   [0mSELECT * FROM `users` WHERE ((expires_at IS NULL OR expires_at >= '2009-05-18 13:13:41')) ORDER BY first_name, last_name, email LIMIT 0, 10[0m
  [4;36;1mUserGroupMembership Load (0.4ms)[0m   [0;1mSELECT `user_group_memberships`.* FROM `user_group_memberships` WHERE (`user_group_memberships`.user_id = 1) [0m
  [4;35;1mUserGroupMembership Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_group_memberships`[0m
Rendering template within layouts/cms/administration
Rendering cms/users/index
  [4;36;1mGroup Load (11.3ms)[0m   [0;1mSELECT * FROM `groups` [0m
WARNING: Can't mass-assign these protected attributes: id
Rendered cms/users/_toolbar (15.2ms)
  [4;35;1mGroup Load (12.8ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `user_group_memberships` ON `groups`.id = `user_group_memberships`.group_id WHERE ((`user_group_memberships`.user_id = 1)) ORDER BY groups.name[0m
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered cms/shared/_admin_sidebar (2.0ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 95ms (View: 47, DB: 39) | 200 OK [http://localhost/cms/administration]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:13:41) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Columns (54.4ms)[0m   [0;1mSHOW FIELDS FROM `content_types`[0m
  [4;35;1mContentType Load (41.7ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (20.5ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 153ms (View: 20, DB: 118) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-18 15:13:44) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (15.0ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.5ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 113ms (View: 90, DB: 16) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:13:44) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#edit (for 127.0.0.1 at 2009-05-18 15:13:47) [GET]
  Parameters: {"id"=>"2"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (28.9ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`id` = 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/edit
Rendered cms/form_builder/_cms_text_field (1.7ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_drop_down (2.4ms)
Rendered cms/form_builder/_cms_text_area (1.7ms)
Rendered cms/dynamic_views/_form (18.0ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 64ms (View: 30, DB: 30) | 200 OK [http://localhost/cms/page_templates/2/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:13:47) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#update (for 127.0.0.1 at 2009-05-18 15:14:49) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"3PU1JbTj9nAZVBUny6A3JPh5vXnjWm1Szo5N+PLdeHs=", "id"=>"2", "page_template"=>{"name"=>"home", "format"=>"html", "body"=>"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n\t<%= stylesheet_link_tag 'compiled/screen.css', :media => 'screen, projection' %>\r\n\t<%= stylesheet_link_tag 'compiled/print.css', :media => 'print' %>\r\n\r\n\r\n\t<title>Smile-Effect</title>\r\n\t<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n\t<%= cms_toolbar %>\r\n<div id=\"background\"></div>\t\t\t\r\n\t<div id=\"branding-container\">\r\n\t\t<div id=\"header\">\r\n\t\t\t<h1>Smile-Effect</h1>\r\n\t\t\t<%= render_menu %>\r\n\t\t</div>\r\n\t\t<div id=\"teaser\">\r\n\t\t\t<%= container :teaser %>\r\n\t\t</div>\r\n\t\t<div id=\"content\">\r\n\t\t\t<%= container :content %>\r\n\t\t</div>\r\n\t\t<div id=\"related\">\t\t\r\n\t\t\t<%= container :related %>\r\n\t\t</div>\r\n\t\t<div id=\"footer\">\r\n\t\t\t<%= container :footer %>\t\r\n\t\t</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n", "handler"=>"erb"}}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`id` = 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `dynamic_views` WHERE (`dynamic_views`.`name` = BINARY 'home' AND `dynamic_views`.format = 'html' AND `dynamic_views`.handler = 'erb' AND `dynamic_views`.id <> 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;36;1mPageTemplate::Version Load (55.0ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate::Version Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `dynamic_view_versions`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate::Version Create (0.3ms)[0m   [0mINSERT INTO `dynamic_view_versions` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `dynamic_view_id`, `handler`, `published`, `type`, `created_by_id`, `version`, `archived`, `version_comment`, `deleted`, `created_at`) VALUES('home', 'html', '2009-05-18 13:14:49', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n	<%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n	<%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n	<title>Smile-Effect</title>\r\n	<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n	<%= cms_toolbar %>\r\n<div id=\"background\"></div>			\r\n	<div id=\"branding-container\">\r\n		<div id=\"header\">\r\n			<h1>Smile-Effect</h1>\r\n			<%= render_menu %>\r\n		</div>\r\n		<div id=\"teaser\">\r\n			<%= container :teaser %>\r\n		</div>\r\n		<div id=\"content\">\r\n			<%= container :content %>\r\n		</div>\r\n		<div id=\"related\">		\r\n			<%= container :related %>\r\n		</div>\r\n		<div id=\"footer\">\r\n			<%= container :footer %>	\r\n		</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n', 1, 2, 'erb', 1, NULL, 1, 3, 0, 'Changed body', 0, '2009-05-18 13:14:49')[0m
  [4;36;1mPageTemplate::Version Load (9.2ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate Publish (0.4ms)[0m   [0mUPDATE `dynamic_views` SET `deleted` = 0, `handler` = 'erb', `version` = 3, `body` = '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n	<%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n	<%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n	<title>Smile-Effect</title>\r\n	<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n	<%= cms_toolbar %>\r\n<div id=\"background\"></div>			\r\n	<div id=\"branding-container\">\r\n		<div id=\"header\">\r\n			<h1>Smile-Effect</h1>\r\n			<%= render_menu %>\r\n		</div>\r\n		<div id=\"teaser\">\r\n			<%= container :teaser %>\r\n		</div>\r\n		<div id=\"content\">\r\n			<%= container :content %>\r\n		</div>\r\n		<div id=\"related\">		\r\n			<%= container :related %>\r\n		</div>\r\n		<div id=\"footer\">\r\n			<%= container :footer %>	\r\n		</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n', `published` = 1, `archived` = 0, `format` = 'html', `name` = 'home' WHERE `id` = 2[0m
  [4;36;1mSQL (5.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/cms/page_templates
Completed in 90ms (DB: 74) | 302 Found [http://localhost/cms/page_templates/2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-18 15:14:49) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered cms/shared/_admin_sidebar (0.3ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 97ms (View: 92, DB: 1) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:14:49) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:14:51) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.6ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 43ms (View: 28, DB: 6) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:14:52) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:14:52) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (1.1ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.4ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.5ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (24.6ms)
Completed in 39ms (View: 28, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::UsersController#index (for 127.0.0.1 at 2009-05-18 15:15:17) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ((expires_at IS NULL OR expires_at >= '2009-05-18 13:15:17')) ORDER BY first_name, last_name, email LIMIT 0, 10[0m
  [4;35;1mUserGroupMembership Load (0.2ms)[0m   [0mSELECT `user_group_memberships`.* FROM `user_group_memberships` WHERE (`user_group_memberships`.user_id = 1) [0m
Rendering template within layouts/cms/administration
Rendering cms/users/index
  [4;36;1mGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `groups` [0m
WARNING: Can't mass-assign these protected attributes: id
Rendered cms/users/_toolbar (2.0ms)
  [4;35;1mGroup Load (0.4ms)[0m   [0mSELECT `groups`.* FROM `groups` INNER JOIN `user_group_memberships` ON `groups`.id = `user_group_memberships`.group_id WHERE ((`user_group_memberships`.user_id = 1)) ORDER BY groups.name[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 9, DB: 2) | 200 OK [http://localhost/cms/administration]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:15:17) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.8ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-18 15:15:19) [GET]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://localhost/cms/page_templates]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:15:19) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#edit (for 127.0.0.1 at 2009-05-18 15:15:21) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`id` = 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/edit
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_drop_down (1.0ms)
Rendered cms/form_builder/_cms_text_area (0.5ms)
Rendered cms/dynamic_views/_form (4.1ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 10, DB: 1) | 200 OK [http://localhost/cms/page_templates/2/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:15:22) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#update (for 127.0.0.1 at 2009-05-18 15:15:41) [PUT]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"3PU1JbTj9nAZVBUny6A3JPh5vXnjWm1Szo5N+PLdeHs=", "id"=>"2", "page_template"=>{"name"=>"home", "format"=>"html", "body"=>"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n\t<%= stylesheet_link_tag 'compiled/screen.css', :media => 'screen, projection' %>\r\n\t<%= stylesheet_link_tag 'compiled/print.css', :media => 'print' %>\r\n\r\n\r\n\t<title>Smile-Effect</title>\r\n\t<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n\t<%= cms_toolbar %>\r\n<div id=\"background\">\t\t\t\r\n\t<div id=\"branding-container\">\r\n\t\t<div id=\"header\">\r\n\t\t\t<h1>Smile-Effect</h1>\r\n\t\t\t<%= render_menu %>\r\n\t\t</div>\r\n\t\t<div id=\"teaser\">\r\n\t\t\t<%= container :teaser %>\r\n\t\t</div>\r\n\t\t<div id=\"content\">\r\n\t\t\t<%= container :content %>\r\n\t\t</div>\r\n\t\t<div id=\"related\">\t\t\r\n\t\t\t<%= container :related %>\r\n\t\t</div>\r\n\t\t<div id=\"footer\">\r\n\t\t\t<%= container :footer %>\t\r\n\t\t</div>\r\n</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n", "handler"=>"erb"}}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPageTemplate Load (0.3ms)[0m   [0;1mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`id` = 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `dynamic_views` WHERE (`dynamic_views`.`name` = BINARY 'home' AND `dynamic_views`.format = 'html' AND `dynamic_views`.handler = 'erb' AND `dynamic_views`.id <> 2) AND (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) [0m
  [4;35;1mPageTemplate::Version Load (0.3ms)[0m   [0mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate::Version Create (0.3ms)[0m   [0mINSERT INTO `dynamic_view_versions` (`name`, `format`, `updated_at`, `body`, `updated_by_id`, `dynamic_view_id`, `handler`, `published`, `type`, `created_by_id`, `version`, `archived`, `version_comment`, `deleted`, `created_at`) VALUES('home', 'html', '2009-05-18 13:15:41', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n	<%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n	<%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n	<title>Smile-Effect</title>\r\n	<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n	<%= cms_toolbar %>\r\n<div id=\"background\">			\r\n	<div id=\"branding-container\">\r\n		<div id=\"header\">\r\n			<h1>Smile-Effect</h1>\r\n			<%= render_menu %>\r\n		</div>\r\n		<div id=\"teaser\">\r\n			<%= container :teaser %>\r\n		</div>\r\n		<div id=\"content\">\r\n			<%= container :content %>\r\n		</div>\r\n		<div id=\"related\">		\r\n			<%= container :related %>\r\n		</div>\r\n		<div id=\"footer\">\r\n			<%= container :footer %>	\r\n		</div>\r\n</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n', 1, 2, 'erb', 1, NULL, 1, 4, 0, 'Changed body', 0, '2009-05-18 13:15:41')[0m
  [4;36;1mPageTemplate::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `dynamic_view_versions` WHERE (`dynamic_view_versions`.dynamic_view_id = 2) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPageTemplate Publish (0.3ms)[0m   [0mUPDATE `dynamic_views` SET `deleted` = 0, `handler` = 'erb', `version` = 4, `body` = '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n<head>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n\r\n	<%= stylesheet_link_tag \'compiled/screen.css\', :media => \'screen, projection\' %>\r\n	<%= stylesheet_link_tag \'compiled/print.css\', :media => \'print\' %>\r\n\r\n\r\n	<title>Smile-Effect</title>\r\n	<%= yield :html_head %>\r\n</head>\r\n<body id=\"home\" class=\"home-page\">\r\n	<%= cms_toolbar %>\r\n<div id=\"background\">			\r\n	<div id=\"branding-container\">\r\n		<div id=\"header\">\r\n			<h1>Smile-Effect</h1>\r\n			<%= render_menu %>\r\n		</div>\r\n		<div id=\"teaser\">\r\n			<%= container :teaser %>\r\n		</div>\r\n		<div id=\"content\">\r\n			<%= container :content %>\r\n		</div>\r\n		<div id=\"related\">		\r\n			<%= container :related %>\r\n		</div>\r\n		<div id=\"footer\">\r\n			<%= container :footer %>	\r\n		</div>\r\n</div>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n', `published` = 1, `archived` = 0, `format` = 'html', `name` = 'home' WHERE `id` = 2[0m
  [4;36;1mSQL (11.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/cms/page_templates
Completed in 26ms (DB: 14) | 302 Found [http://localhost/cms/page_templates/2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::DynamicViewsController#index (for 127.0.0.1 at 2009-05-18 15:15:41) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPageTemplate Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (dynamic_views.deleted = 0) AND ( (`dynamic_views`.`type` = 'PageTemplate' ) ) ORDER BY name LIMIT 0, 15[0m
Rendering template within layouts/cms/administration
Rendering cms/dynamic_views/index
Rendered layouts/cms/_head (1.6ms)
Rendered layouts/_cms_toolbar (79.1ms)
Rendered cms/shared/_admin_sidebar (0.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 95ms (View: 86, DB: 2) | 200 OK [http://localhost/cms/page_templates]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:15:41) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:15:44) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (19.8ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #4 v1
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 69ms (View: 32, DB: 27) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:15:44) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:15:44) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (81.4ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.5ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.2ms)
Completed in 116ms (View: 106, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:16:06) [GET]
  Parameters: {"mode"=>"edit", "path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.6ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.4ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.9ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 83ms (View: 65, DB: 10) | 200 OK [http://localhost/?mode=edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:16:06) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:16:06) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (25.5ms)
Completed in 39ms (View: 29, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-18 15:16:15) [GET]
  Parameters: {"connect_to_container"=>"teaser", "connect_to_page_id"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;35;1mContentTypeGroup Columns (40.2ms)[0m   [0mSHOW FIELDS FROM `content_type_groups`[0m
  [4;36;1mContentType Load Including Associations (12.5ms)[0m   [0;1mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 81ms (View: 20, DB: 54) | 200 OK [http://localhost/cms/content_types?connect_to_container=teaser&connect_to_page_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:16:15) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#new (for 127.0.0.1 at 2009-05-18 15:16:17) [GET]
  Parameters: {"html_block"=>{"connect_to_container"=>"teaser", "connect_to_page_id"=>"1"}}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mHtmlBlock Load (22.8ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (html_blocks.deleted = 0) ORDER BY html_blocks.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (2.4ms)
Rendered cms/blocks/_toolbar (7.5ms)
Rendered cms/blocks/_hidden_fields (2.5ms)
Rendered cms/form_builder/_cms_text_field (0.4ms)
Rendered cms/form_builder/_cms_text_editor (3.4ms)
  [4;35;1mTagging Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `taggings`[0m
Rendered cms/form_builder/_cms_tag_list (11.0ms)
Rendered cms/html_blocks/_form (21.1ms)
Rendered layouts/cms/_head (1.9ms)
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mContentTypeGroup Load (0.4ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 205ms (View: 83, DB: 29) | 200 OK [http://localhost/cms/html_blocks/new?html_block%5Bconnect_to_container%5D=teaser&html_block%5Bconnect_to_page_id%5D=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:16:18) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:16:59) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (16.8ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.5ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (8.4ms)
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (85.7ms)
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.5ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (7.3ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.5ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.1ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 186ms (View: 150, DB: 27) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.6ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:16:59) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.3ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.1ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:16:59) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (21.7ms)
Completed in 38ms (View: 27, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-18 15:17:50) [GET]
  Parameters: {"connect_to_container"=>"teaser", "connect_to_page_id"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.4ms)[0m   [0;1mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;35;1mContentType Load Including Associations (0.5ms)[0m   [0mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.2ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 36ms (View: 9, DB: 2) | 200 OK [http://localhost/cms/content_types?connect_to_container=teaser&connect_to_page_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:17:50) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:19:32) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (1.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.6ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.5ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.4ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (8.2ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (8.1ms)
  [4;36;1mAbstractFileBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.7ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.7ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.7ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 89ms (View: 67, DB: 11) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:19:32) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:19:32) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.7ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (122.7ms)
Completed in 137ms (View: 126, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:19:49) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage::Version Load (0.2ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mSection Load Including Associations (0.5ms)[0m   [0;1mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #4 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (37.6ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.5ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (6.5ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 7 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.0ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 226ms (View: 170, DB: 48) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:19:49) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (2.1ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:19:50) [GET]
  Parameters: {"page_version"=>"7", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '7')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (21.7ms)
Completed in 34ms (View: 25, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=7]
  [4;36;1mSQL (1.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ConnectorsController#destroy (for 127.0.0.1 at 2009-05-18 15:23:18) [DELETE]
  Parameters: {"_redirect_to"=>"/", "authenticity_token"=>"3PU1JbTj9nAZVBUny6A3JPh5vXnjWm1Szo5N+PLdeHs=", "id"=>"17"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mConnector Load (0.2ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.`id` = 17) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mHtmlBlock Load (15.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 7) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 4) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 4 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-18 13:23:18', '', 'home.html.erb', '', 1, 1, 1, 1, 8, '', 0, 'Html Block \'Wilkommensgruß\' was removed from the \'content\' container', 0, '/', '', 1, 0, '2009-05-18 13:23:18')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 8 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(4, 8, 'content', '2009-05-18 13:23:18', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:23:18')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 8 and connectors.container = 'footer') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(5, 8, 'footer', '2009-05-18 13:23:18', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:23:18')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 8 and connectors.container = 'quote') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 8, 'quote', '2009-05-18 13:23:18', 1, 1, 1, 'AbstractFileBlock', '2009-05-18 13:23:18')[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`connectable_version` = 1 AND `connectors`.`position` = 1 AND `connectors`.`connectable_id` = 4 AND `connectors`.`connectable_type` = 'HtmlBlock' AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position LIMIT 1[0m
  [4;35;1mConnector Update (0.2ms)[0m   [0mUPDATE `connectors` SET position = (position - 1) WHERE (connectors.page_id = 1 and connectors.page_version = 8 and connectors.container = 'content' AND position > 1) [0m
  [4;36;1mConnector Update (0.2ms)[0m   [0;1mUPDATE `connectors` SET `position` = NULL, `updated_at` = '2009-05-18 13:23:18' WHERE `id` = 21[0m
  [4;35;1mConnector Destroy (0.1ms)[0m   [0mDELETE FROM `connectors` WHERE `id` = 21[0m
  [4;36;1mSQL (17.8ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 68ms (DB: 41) | 302 Found [http://localhost/cms/connectors/17?_redirect_to=%2F]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:23:18) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 8)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 8) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.9ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.7ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 8 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.9ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 71ms (View: 54, DB: 9) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:23:18) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (1.2ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:23:18) [GET]
  Parameters: {"page_version"=>"8", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '8')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (20.6ms)
Completed in 33ms (View: 24, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=8]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-18 15:23:24) [GET]
  Parameters: {"connect_to_container"=>"content", "connect_to_page_id"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;36;1mContentType Load Including Associations (0.4ms)[0m   [0;1mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 13ms (View: 8, DB: 2) | 200 OK [http://localhost/cms/content_types?connect_to_container=content&connect_to_page_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:23:24) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.4ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 9ms (View: 2, DB: 2) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#new (for 127.0.0.1 at 2009-05-18 15:23:26) [GET]
  Parameters: {"html_block"=>{"connect_to_container"=>"content", "connect_to_page_id"=>"1"}}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (html_blocks.deleted = 0) ORDER BY html_blocks.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.2ms)
Rendered cms/blocks/_hidden_fields (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_editor (1.0ms)
Rendered cms/form_builder/_cms_tag_list (1.0ms)
Rendered cms/html_blocks/_form (3.2ms)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 106ms (View: 99, DB: 3) | 200 OK [http://localhost/cms/html_blocks/new?html_block%5Bconnect_to_container%5D=content&html_block%5Bconnect_to_page_id%5D=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:23:26) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 9ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#create (for 127.0.0.1 at 2009-05-18 15:24:30) [POST]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"3PU1JbTj9nAZVBUny6A3JPh5vXnjWm1Szo5N+PLdeHs=", "html_block"=>{"name"=>"Marketing intro", "connect_to_container"=>"content", "lock_version"=>"0", "tag_list"=>"", "content"=>"<p><big>Marketing(Konzepte, Kampagnen, Promotion, Verkaufsf&ouml;rderung, Vertrieb) </big></p>\r\n<p><br />\r\nMit Ziel &amp; Erfolg</p>\r\n<p><br />\r\nUnser Motto:&quot;smile sells!&quot; - Damit stehen wir f&uuml;r gezielte, strategische <br />\r\nMarketingkonzepte mit geringem Streuverlust und echtem Mehrwert f&uuml;r unsere <br />\r\nAuftraggeber und ihre potentiellen Kunden. <br />\r\nWir bieten vollen Service von der Konzeptionierung bis zur Durchf&uuml;hrung. Optimale <br />\r\nBetreuung, dezidierte Steuerung, Erfolgskontrolle und Reportings. <br />\r\nEigene Produkte:Planungs-, Steuerungs- und Reportingtools mit eigenem Zugang <br />\r\nf&uuml;r unsere Kunden zur optimalen Kontrolle laufender Projekte. <br />\r\n&nbsp;</p>", "connect_to_page_id"=>"1"}, "dhtml_selector"=>""}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mHtmlBlock Create (14.9ms)[0m   [0mINSERT INTO `html_blocks` (`name`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `archived`, `content`, `deleted`, `created_at`) VALUES('Marketing intro', '2009-05-18 13:24:30', 1, 0, 0, 1, 1, 0, '<p><big>Marketing(Konzepte, Kampagnen, Promotion, Verkaufsf&ouml;rderung, Vertrieb) </big></p>\r\n<p><br />\r\nMit Ziel &amp; Erfolg</p>\r\n<p><br />\r\nUnser Motto:&quot;smile sells!&quot; - Damit stehen wir f&uuml;r gezielte, strategische <br />\r\nMarketingkonzepte mit geringem Streuverlust und echtem Mehrwert f&uuml;r unsere <br />\r\nAuftraggeber und ihre potentiellen Kunden. <br />\r\nWir bieten vollen Service von der Konzeptionierung bis zur Durchf&uuml;hrung. Optimale <br />\r\nBetreuung, dezidierte Steuerung, Erfolgskontrolle und Reportings. <br />\r\nEigene Produkte:Planungs-, Steuerungs- und Reportingtools mit eigenem Zugang <br />\r\nf&uuml;r unsere Kunden zur optimalen Kontrolle laufender Projekte. <br />\r\n&nbsp;</p>', 0, '2009-05-18 13:24:30')[0m
  [4;36;1mPage Load (2.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 8) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-18 13:24:30', '', 'home.html.erb', '', 1, 1, 1, 1, 9, '', 0, 'Html Block \'Marketing intro\' was added to the \'content\' container', 0, '/', '', 1, 0, '2009-05-18 13:24:30')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 9 and connectors.container = 'footer') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(5, 9, 'footer', '2009-05-18 13:24:30', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:24:30')[0m
  [4;35;1mConnector Load (0.2ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 9 and connectors.container = 'quote') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 9, 'quote', '2009-05-18 13:24:30', 1, 1, 1, 'AbstractFileBlock', '2009-05-18 13:24:30')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 9 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(6, 9, 'content', '2009-05-18 13:24:30', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:24:30')[0m
  [4;36;1mHtmlBlock::Version Load (15.7ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = NULL) [0m
  [4;35;1mHtmlBlock::Version Create (0.3ms)[0m   [0mINSERT INTO `html_block_versions` (`name`, `html_block_id`, `updated_at`, `updated_by_id`, `published`, `created_by_id`, `version`, `archived`, `version_comment`, `content`, `deleted`, `created_at`) VALUES('Marketing intro', 6, '2009-05-18 13:24:30', 1, 0, 1, 1, 0, 'Created', '<p><big>Marketing(Konzepte, Kampagnen, Promotion, Verkaufsf&ouml;rderung, Vertrieb) </big></p>\r\n<p><br />\r\nMit Ziel &amp; Erfolg</p>\r\n<p><br />\r\nUnser Motto:&quot;smile sells!&quot; - Damit stehen wir f&uuml;r gezielte, strategische <br />\r\nMarketingkonzepte mit geringem Streuverlust und echtem Mehrwert f&uuml;r unsere <br />\r\nAuftraggeber und ihre potentiellen Kunden. <br />\r\nWir bieten vollen Service von der Konzeptionierung bis zur Durchf&uuml;hrung. Optimale <br />\r\nBetreuung, dezidierte Steuerung, Erfolgskontrolle und Reportings. <br />\r\nEigene Produkte:Planungs-, Steuerungs- und Reportingtools mit eigenem Zugang <br />\r\nf&uuml;r unsere Kunden zur optimalen Kontrolle laufender Projekte. <br />\r\n&nbsp;</p>', 0, '2009-05-18 13:24:30')[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Load Including Associations (1.0ms)[0m   [0mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 6 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 6 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0)) [0m
  [4;36;1mTagging Load (38.1ms)[0m   [0;1mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 6 AND `taggings`.taggable_type = 'HtmlBlock') [0m
  [4;35;1mSQL (15.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
Redirected to http://localhost:3000/
Completed in 126ms (DB: 93) | 302 Found [http://localhost/cms/html_blocks]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:24:31) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 9)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.6ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 9) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #6 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.5ms)
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.5ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.4ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (91.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.3ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 9 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.1ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 168ms (View: 151, DB: 10) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:24:31) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.7ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:24:31) [GET]
  Parameters: {"page_version"=>"9", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '9')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.5ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (19.7ms)
Completed in 32ms (View: 22, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=9]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-18 15:24:38) [GET]
  Parameters: {"connect_to_container"=>"content", "connect_to_page_id"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;35;1mContentType Load Including Associations (0.5ms)[0m   [0mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 13ms (View: 8, DB: 2) | 200 OK [http://localhost/cms/content_types?connect_to_container=content&connect_to_page_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:24:38) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.2ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 8ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#new (for 127.0.0.1 at 2009-05-18 15:24:40) [GET]
  Parameters: {"html_block"=>{"connect_to_container"=>"content", "connect_to_page_id"=>"1"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.8ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (html_blocks.deleted = 0) ORDER BY html_blocks.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.2ms)
Rendered cms/blocks/_hidden_fields (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_editor (1.0ms)
Rendered cms/form_builder/_cms_tag_list (1.1ms)
Rendered cms/html_blocks/_form (3.4ms)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 27ms (View: 20, DB: 3) | 200 OK [http://localhost/cms/html_blocks/new?html_block%5Bconnect_to_container%5D=content&html_block%5Bconnect_to_page_id%5D=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:24:40) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#create (for 127.0.0.1 at 2009-05-18 15:25:21) [POST]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"3PU1JbTj9nAZVBUny6A3JPh5vXnjWm1Szo5N+PLdeHs=", "html_block"=>{"name"=>"web intro", "connect_to_container"=>"content", "lock_version"=>"0", "tag_list"=>"", "content"=>"<p><big>Web(Analysen, Konzepte, Programmierung, Design, Hosting, Pflege) </big></p>\r\n<p><br />\r\nMit Effizienz &amp; Knowhow</p>\r\n<p><br />\r\nDurch unsere jahrelange Erfahrung geschult, vertreten wir bei unseren Konzepten <br />\r\ndas KISS-Prinzip (Keep it stupid and simple!). Im Fokus stehen dabei Usability und <br />\r\neine klare Struktur Ihrer Webseite, um Ihre Kommunikation effizient zu <br />\r\ntransportieren und dabei die Kosten an keiner Stelle aufzubl&auml;hen. Neben technischer <br />\r\nPerfektion sehen wir darin die grundlegendsten Erfolgsfaktoren f&uuml;r Ihre <br />\r\nInternetpr&auml;senz. <br />\r\nEigene Produkte:CMS Implementierung, Shopsysteme, Webapplikationen, <br />\r\nTemplates, Server-Technologie.</p>", "connect_to_page_id"=>"1"}, "dhtml_selector"=>""}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mHtmlBlock Create (0.2ms)[0m   [0;1mINSERT INTO `html_blocks` (`name`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `archived`, `content`, `deleted`, `created_at`) VALUES('web intro', '2009-05-18 13:25:21', 1, 0, 0, 1, 1, 0, '<p><big>Web(Analysen, Konzepte, Programmierung, Design, Hosting, Pflege) </big></p>\r\n<p><br />\r\nMit Effizienz &amp; Knowhow</p>\r\n<p><br />\r\nDurch unsere jahrelange Erfahrung geschult, vertreten wir bei unseren Konzepten <br />\r\ndas KISS-Prinzip (Keep it stupid and simple!). Im Fokus stehen dabei Usability und <br />\r\neine klare Struktur Ihrer Webseite, um Ihre Kommunikation effizient zu <br />\r\ntransportieren und dabei die Kosten an keiner Stelle aufzubl&auml;hen. Neben technischer <br />\r\nPerfektion sehen wir darin die grundlegendsten Erfolgsfaktoren f&uuml;r Ihre <br />\r\nInternetpr&auml;senz. <br />\r\nEigene Produkte:CMS Implementierung, Shopsysteme, Webapplikationen, <br />\r\nTemplates, Server-Technologie.</p>', 0, '2009-05-18 13:25:21')[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 9) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-18 13:25:21', '', 'home.html.erb', '', 1, 1, 1, 1, 10, '', 0, 'Html Block \'web intro\' was added to the \'content\' container', 0, '/', '', 1, 0, '2009-05-18 13:25:21')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 10 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (46.1ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(6, 10, 'content', '2009-05-18 13:25:21', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:25:21')[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 10 and connectors.container = 'footer') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(5, 10, 'footer', '2009-05-18 13:25:21', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:25:21')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 10 and connectors.container = 'quote') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (17.0ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 10, 'quote', '2009-05-18 13:25:21', 1, 1, 1, 'AbstractFileBlock', '2009-05-18 13:25:21')[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 10 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.2ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(7, 10, 'content', '2009-05-18 13:25:21', 1, 1, 2, 'HtmlBlock', '2009-05-18 13:25:21')[0m
  [4;36;1mHtmlBlock::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = NULL) [0m
  [4;35;1mHtmlBlock::Version Create (0.3ms)[0m   [0mINSERT INTO `html_block_versions` (`name`, `html_block_id`, `updated_at`, `updated_by_id`, `published`, `created_by_id`, `version`, `archived`, `version_comment`, `content`, `deleted`, `created_at`) VALUES('web intro', 7, '2009-05-18 13:25:21', 1, 0, 1, 1, 0, 'Created', '<p><big>Web(Analysen, Konzepte, Programmierung, Design, Hosting, Pflege) </big></p>\r\n<p><br />\r\nMit Effizienz &amp; Knowhow</p>\r\n<p><br />\r\nDurch unsere jahrelange Erfahrung geschult, vertreten wir bei unseren Konzepten <br />\r\ndas KISS-Prinzip (Keep it stupid and simple!). Im Fokus stehen dabei Usability und <br />\r\neine klare Struktur Ihrer Webseite, um Ihre Kommunikation effizient zu <br />\r\ntransportieren und dabei die Kosten an keiner Stelle aufzubl&auml;hen. Neben technischer <br />\r\nPerfektion sehen wir darin die grundlegendsten Erfolgsfaktoren f&uuml;r Ihre <br />\r\nInternetpr&auml;senz. <br />\r\nEigene Produkte:CMS Implementierung, Shopsysteme, Webapplikationen, <br />\r\nTemplates, Server-Technologie.</p>', 0, '2009-05-18 13:25:21')[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Load Including Associations (0.4ms)[0m   [0mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 7 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 7 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0)) [0m
  [4;36;1mTagging Load (0.2ms)[0m   [0;1mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 7 AND `taggings`.taggable_type = 'HtmlBlock') [0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7) ORDER BY version desc LIMIT 1[0m
Redirected to http://localhost:3000/
Completed in 185ms (DB: 72) | 302 Found [http://localhost/cms/html_blocks]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:25:21) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.7ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 10)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.6ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 10) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #6 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #7 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (8.5ms)
  [4;36;1mAbstractFileBlock Load (0.5ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mAttachment::Version Load (0.2ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.6ms)
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 10 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (7.8ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 98ms (View: 77, DB: 12) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:25:21) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;36;1mAttachment Load (0.2ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:25:22) [GET]
  Parameters: {"page_version"=>"10", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.7ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '10')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mPage::Version Load (0.5ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mPage::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.3ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mTask Load (0.3ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (22.5ms)
Completed in 37ms (View: 27, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=10]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-18 15:25:29) [GET]
  Parameters: {"connect_to_container"=>"content", "connect_to_page_id"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.6ms)[0m   [0mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;36;1mContentType Load Including Associations (0.5ms)[0m   [0;1mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 14ms (View: 8, DB: 2) | 200 OK [http://localhost/cms/content_types?connect_to_container=content&connect_to_page_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:25:29) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#new (for 127.0.0.1 at 2009-05-18 15:25:31) [GET]
  Parameters: {"html_block"=>{"connect_to_container"=>"content", "connect_to_page_id"=>"1"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (html_blocks.deleted = 0) ORDER BY html_blocks.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (0.6ms)
Rendered cms/blocks/_toolbar (1.3ms)
Rendered cms/blocks/_hidden_fields (0.4ms)
Rendered cms/form_builder/_cms_text_field (0.3ms)
Rendered cms/form_builder/_cms_text_editor (1.0ms)
Rendered cms/form_builder/_cms_tag_list (1.1ms)
Rendered cms/html_blocks/_form (3.2ms)
Rendered layouts/cms/_head (1.5ms)
Rendered layouts/_cms_toolbar (1.1ms)
  [4;35;1mContentTypeGroup Load (0.3ms)[0m   [0mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;36;1mContentTypeGroup Load (0.2ms)[0m   [0;1mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mContentType Load (0.3ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 28ms (View: 21, DB: 3) | 200 OK [http://localhost/cms/html_blocks/new?html_block%5Bconnect_to_container%5D=content&html_block%5Bconnect_to_page_id%5D=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:25:31) [GET]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::HtmlBlocksController#create (for 127.0.0.1 at 2009-05-18 15:26:06) [POST]
  Parameters: {"commit"=>"Save", "authenticity_token"=>"3PU1JbTj9nAZVBUny6A3JPh5vXnjWm1Szo5N+PLdeHs=", "html_block"=>{"name"=>"design intro", "connect_to_container"=>"content", "lock_version"=>"0", "tag_list"=>"", "content"=>"<p><big>Design &amp; Konzeptionvon Werbemedien (Print, Online, Illustrationen, Skizzen) </big></p>\r\n<p><br />\r\nMit Leidenschaft &amp; Liebe</p>\r\n<p><br />\r\nBei unserer modernen und zielgruppenaffinen Gestaltungen beherzigen wir ebenso <br />\r\ndas KISS-Prinzip (s. o.) zu Gunsten Ihrer kommunizierenden Botschaft. Dazu bieten <br />\r\nwir viel Leidenschaft und Liebe, was besonders in kleinen Details und liebevoll <br />\r\ngestalteten Grafiken zum Ausdruck kommt. Bei uns wird auch tats&auml;chlich noch <br />\r\ngezeichnet! <br />\r\n&nbsp;</p>", "connect_to_page_id"=>"1"}, "dhtml_selector"=>""}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'HtmlBlock') LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mHtmlBlock Create (0.2ms)[0m   [0mINSERT INTO `html_blocks` (`name`, `updated_at`, `updated_by_id`, `published`, `lock_version`, `created_by_id`, `version`, `archived`, `content`, `deleted`, `created_at`) VALUES('design intro', '2009-05-18 13:26:06', 1, 0, 0, 1, 1, 0, '<p><big>Design &amp; Konzeptionvon Werbemedien (Print, Online, Illustrationen, Skizzen) </big></p>\r\n<p><br />\r\nMit Leidenschaft &amp; Liebe</p>\r\n<p><br />\r\nBei unserer modernen und zielgruppenaffinen Gestaltungen beherzigen wir ebenso <br />\r\ndas KISS-Prinzip (s. o.) zu Gunsten Ihrer kommunizierenden Botschaft. Dazu bieten <br />\r\nwir viel Leidenschaft und Liebe, was besonders in kleinen Details und liebevoll <br />\r\ngestalteten Grafiken zum Ausdruck kommt. Bei uns wird auch tats&auml;chlich noch <br />\r\ngezeichnet! <br />\r\n&nbsp;</p>', 0, '2009-05-18 13:26:06')[0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `pages` WHERE (`pages`.`path` = BINARY '/' AND `pages`.id <> 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 10) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mAbstractFileBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;35;1mImageBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Create (0.2ms)[0m   [0;1mINSERT INTO `page_versions` (`name`, `updated_at`, `title`, `template_file_name`, `language`, `updated_by_id`, `published`, `page_id`, `created_by_id`, `version`, `description`, `archived`, `version_comment`, `deleted`, `path`, `keywords`, `cacheable`, `hidden`, `created_at`) VALUES('Home', '2009-05-18 13:26:06', '', 'home.html.erb', '', 1, 1, 1, 1, 11, '', 0, 'Html Block \'design intro\' was added to the \'content\' container', 0, '/', '', 1, 0, '2009-05-18 13:26:06')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 11 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.2ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(6, 11, 'content', '2009-05-18 13:26:06', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:26:06')[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 11 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.1ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(7, 11, 'content', '2009-05-18 13:26:06', 1, 1, 2, 'HtmlBlock', '2009-05-18 13:26:06')[0m
  [4;35;1mConnector Load (0.2ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 11 and connectors.container = 'footer') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.1ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(5, 11, 'footer', '2009-05-18 13:26:06', 1, 1, 1, 'HtmlBlock', '2009-05-18 13:26:06')[0m
  [4;35;1mConnector Load (0.2ms)[0m   [0mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 11 and connectors.container = 'quote') ORDER BY position DESC LIMIT 1[0m
  [4;36;1mConnector Create (0.1ms)[0m   [0;1mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(1, 11, 'quote', '2009-05-18 13:26:06', 1, 1, 1, 'AbstractFileBlock', '2009-05-18 13:26:06')[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mConnector Load (0.3ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (connectors.page_id = 1 and connectors.page_version = 11 and connectors.container = 'content') ORDER BY position DESC LIMIT 1[0m
  [4;35;1mConnector Create (0.1ms)[0m   [0mINSERT INTO `connectors` (`connectable_id`, `page_version`, `container`, `updated_at`, `page_id`, `connectable_version`, `position`, `connectable_type`, `created_at`) VALUES(8, 11, 'content', '2009-05-18 13:26:06', 1, 1, 3, 'HtmlBlock', '2009-05-18 13:26:06')[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = NULL) [0m
  [4;35;1mHtmlBlock::Version Create (0.2ms)[0m   [0mINSERT INTO `html_block_versions` (`name`, `html_block_id`, `updated_at`, `updated_by_id`, `published`, `created_by_id`, `version`, `archived`, `version_comment`, `content`, `deleted`, `created_at`) VALUES('design intro', 8, '2009-05-18 13:26:06', 1, 0, 1, 1, 0, 'Created', '<p><big>Design &amp; Konzeptionvon Werbemedien (Print, Online, Illustrationen, Skizzen) </big></p>\r\n<p><br />\r\nMit Leidenschaft &amp; Liebe</p>\r\n<p><br />\r\nBei unserer modernen und zielgruppenaffinen Gestaltungen beherzigen wir ebenso <br />\r\ndas KISS-Prinzip (s. o.) zu Gunsten Ihrer kommunizierenden Botschaft. Dazu bieten <br />\r\nwir viel Leidenschaft und Liebe, was besonders in kleinen Details und liebevoll <br />\r\ngestalteten Grafiken zum Ausdruck kommt. Bei uns wird auch tats&auml;chlich noch <br />\r\ngezeichnet! <br />\r\n&nbsp;</p>', 0, '2009-05-18 13:26:06')[0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Load Including Associations (0.4ms)[0m   [0mSELECT `pages`.`id` AS t0_r0, `pages`.`version` AS t0_r1, `pages`.`lock_version` AS t0_r2, `pages`.`name` AS t0_r3, `pages`.`title` AS t0_r4, `pages`.`path` AS t0_r5, `pages`.`template_file_name` AS t0_r6, `pages`.`description` AS t0_r7, `pages`.`keywords` AS t0_r8, `pages`.`language` AS t0_r9, `pages`.`cacheable` AS t0_r10, `pages`.`hidden` AS t0_r11, `pages`.`published` AS t0_r12, `pages`.`deleted` AS t0_r13, `pages`.`archived` AS t0_r14, `pages`.`created_by_id` AS t0_r15, `pages`.`updated_by_id` AS t0_r16, `pages`.`created_at` AS t0_r17, `pages`.`updated_at` AS t0_r18, `connectors`.`id` AS t1_r0, `connectors`.`page_id` AS t1_r1, `connectors`.`page_version` AS t1_r2, `connectors`.`connectable_id` AS t1_r3, `connectors`.`connectable_type` AS t1_r4, `connectors`.`connectable_version` AS t1_r5, `connectors`.`container` AS t1_r6, `connectors`.`position` AS t1_r7, `connectors`.`created_at` AS t1_r8, `connectors`.`updated_at` AS t1_r9 FROM `pages` LEFT OUTER JOIN `connectors` ON connectors.page_id = pages.id WHERE (((connectors.connectable_id = 8 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0) AND (pages.deleted = 0)) AND (connectors.connectable_id = 8 and connectors.connectable_type = 'HtmlBlock' and connectors.connectable_version = 0)) [0m
  [4;36;1mTagging Load (0.2ms)[0m   [0;1mSELECT * FROM `taggings` WHERE (`taggings`.taggable_id = 8 AND `taggings`.taggable_type = 'HtmlBlock') [0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8) ORDER BY version desc LIMIT 1[0m
Redirected to http://localhost:3000/
Completed in 44ms (DB: 9) | 302 Found [http://localhost/cms/html_blocks]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:26:06) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.4ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.8ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.7ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (3.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.4ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.7ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.6ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 11) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #6 v1
Rendered cms/pages/_edit_connector (7.9ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #7 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #8 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (8.8ms)
  [4;35;1mAbstractFileBlock Load (0.3ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (87.9ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.4ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (9.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.0ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.3ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 197ms (View: 170, DB: 17) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:26:07) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.3ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.3ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:26:07) [GET]
  Parameters: {"page_version"=>"11", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '11')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 7)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (24.6ms)
Completed in 37ms (View: 28, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=11]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::PagesController#publish (for 127.0.0.1 at 2009-05-18 15:26:14) [PUT]
  Parameters: {"authenticity_token"=>"3PU1JbTj9nAZVBUny6A3JPh5vXnjWm1Szo5N+PLdeHs=", "id"=>"1"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.6ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mPage Publish (0.3ms)[0m   [0mUPDATE `pages` SET `hidden` = 0, `deleted` = 0, `version` = 11, `title` = '', `template_file_name` = 'home.html.erb', `keywords` = '', `published` = 1, `cacheable` = 1, `description` = '', `archived` = 0, `language` = '', `path` = '/', `name` = 'Home' WHERE `id` = 1[0m
  [4;36;1mPage Load (74.6ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mConnector Load (0.5ms)[0m   [0mSELECT * FROM `connectors` WHERE (((`connectors`.`page_version` = 11) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) ORDER BY position, connectors.container, connectors.position[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Update (0.3ms)[0m   [0;1mUPDATE `html_block_versions` SET `published` = 1, `updated_at` = '2009-05-18 13:26:14' WHERE `id` = 6[0m
  [4;35;1mHtmlBlock Publish (0.3ms)[0m   [0mUPDATE `html_blocks` SET `deleted` = 0, `content` = '<p><big>Marketing(Konzepte, Kampagnen, Promotion, Verkaufsf&ouml;rderung, Vertrieb) </big></p>\r\n<p><br />\r\nMit Ziel &amp; Erfolg</p>\r\n<p><br />\r\nUnser Motto:&quot;smile sells!&quot; - Damit stehen wir f&uuml;r gezielte, strategische <br />\r\nMarketingkonzepte mit geringem Streuverlust und echtem Mehrwert f&uuml;r unsere <br />\r\nAuftraggeber und ihre potentiellen Kunden. <br />\r\nWir bieten vollen Service von der Konzeptionierung bis zur Durchf&uuml;hrung. Optimale <br />\r\nBetreuung, dezidierte Steuerung, Erfolgskontrolle und Reportings. <br />\r\nEigene Produkte:Planungs-, Steuerungs- und Reportingtools mit eigenem Zugang <br />\r\nf&uuml;r unsere Kunden zur optimalen Kontrolle laufender Projekte. <br />\r\n&nbsp;</p>', `version` = 1, `published` = 1, `archived` = 0, `name` = 'Marketing intro' WHERE `id` = 6[0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Update (0.2ms)[0m   [0;1mUPDATE `html_block_versions` SET `published` = 1, `updated_at` = '2009-05-18 13:26:14' WHERE `id` = 7[0m
  [4;35;1mHtmlBlock Publish (0.2ms)[0m   [0mUPDATE `html_blocks` SET `deleted` = 0, `content` = '<p><big>Web(Analysen, Konzepte, Programmierung, Design, Hosting, Pflege) </big></p>\r\n<p><br />\r\nMit Effizienz &amp; Knowhow</p>\r\n<p><br />\r\nDurch unsere jahrelange Erfahrung geschult, vertreten wir bei unseren Konzepten <br />\r\ndas KISS-Prinzip (Keep it stupid and simple!). Im Fokus stehen dabei Usability und <br />\r\neine klare Struktur Ihrer Webseite, um Ihre Kommunikation effizient zu <br />\r\ntransportieren und dabei die Kosten an keiner Stelle aufzubl&auml;hen. Neben technischer <br />\r\nPerfektion sehen wir darin die grundlegendsten Erfolgsfaktoren f&uuml;r Ihre <br />\r\nInternetpr&auml;senz. <br />\r\nEigene Produkte:CMS Implementierung, Shopsysteme, Webapplikationen, <br />\r\nTemplates, Server-Technologie.</p>', `version` = 1, `published` = 1, `archived` = 0, `name` = 'web intro' WHERE `id` = 7[0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8) ORDER BY version desc LIMIT 1[0m
  [4;36;1mHtmlBlock::Version Update (0.2ms)[0m   [0;1mUPDATE `html_block_versions` SET `published` = 1, `updated_at` = '2009-05-18 13:26:14' WHERE `id` = 8[0m
  [4;35;1mHtmlBlock Publish (0.2ms)[0m   [0mUPDATE `html_blocks` SET `deleted` = 0, `content` = '<p><big>Design &amp; Konzeptionvon Werbemedien (Print, Online, Illustrationen, Skizzen) </big></p>\r\n<p><br />\r\nMit Leidenschaft &amp; Liebe</p>\r\n<p><br />\r\nBei unserer modernen und zielgruppenaffinen Gestaltungen beherzigen wir ebenso <br />\r\ndas KISS-Prinzip (s. o.) zu Gunsten Ihrer kommunizierenden Botschaft. Dazu bieten <br />\r\nwir viel Leidenschaft und Liebe, was besonders in kleinen Details und liebevoll <br />\r\ngestalteten Grafiken zum Ausdruck kommt. Bei uns wird auch tats&auml;chlich noch <br />\r\ngezeichnet! <br />\r\n&nbsp;</p>', `version` = 1, `published` = 1, `archived` = 0, `name` = 'design intro' WHERE `id` = 8[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 182ms (DB: 81) | 302 Found [http://localhost/cms/pages/1/publish]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:26:14) [GET]
  Parameters: {"path"=>[]}
Caching is disabled
  [4;35;1mUser Load (3.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.3ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 11) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #6 v1
Rendered cms/pages/_edit_connector (7.6ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #7 v1
Rendered cms/pages/_edit_connector (7.2ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #8 v1
Rendered cms/pages/_edit_connector (8.0ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.1ms)
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.5ms)
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.1ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.4ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (14.8ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.4ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.0ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 116ms (View: 91, DB: 15) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:26:15) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.7ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.3ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.4ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.2ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:26:15) [GET]
  Parameters: {"page_version"=>"11", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '11')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (23.5ms)
Completed in 36ms (View: 27, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=11]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:26:20) [GET]
  Parameters: {"mode"=>"view", "path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.3ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.5ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.4ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 11) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #6 v1
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #7 v1
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #8 v1
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;36;1mHtmlBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable HtmlBlock #5 v1
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
..... Rendering connectable ImageBlock #1 v1
  [4;35;1mSectionNode Load (0.3ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.2ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.3ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 49ms (View: 34, DB: 8) | 200 OK [http://localhost/?mode=view]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:26:20) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.2ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.2ms)
Rendered layouts/_cms_toolbar (0.8ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:26:20) [GET]
  Parameters: {"page_version"=>"11", "mode"=>"view", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.5ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '11')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (21.8ms)
Completed in 38ms (View: 27, DB: 3) | 200 OK [http://localhost/cms/toolbar?mode=view&amp;page_id=1&amp;page_toolbar=1&amp;page_version=11]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:26:29) [GET]
  Parameters: {"mode"=>"edit", "path"=>[]}
Caching is disabled
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.9ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mRedirect Load (0.2ms)[0m   [0mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/') LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.2ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/') AND (pages.deleted = 0) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.3ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mPage::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;35;1mSection Load Including Associations (0.7ms)[0m   [0mSELECT `sections`.`id` AS t0_r0, `sections`.`name` AS t0_r1, `sections`.`path` AS t0_r2, `sections`.`root` AS t0_r3, `sections`.`hidden` AS t0_r4, `sections`.`created_at` AS t0_r5, `sections`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `sections` LEFT OUTER JOIN `group_sections` ON (`sections`.`id` = `group_sections`.`section_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_sections`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
Not Caching, user is logged in
Rendering template within layouts/templates/home
Rendering cms/content/show
  [4;36;1mConnector Load (0.5ms)[0m   [0;1mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND ((`connectors`.`page_version` = 11) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;35;1mHtmlBlock Load (14.8ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) [0m
  [4;36;1mHtmlBlock::Version Load (0.5ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.2ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #6 v1
Rendered cms/pages/_edit_connector (8.4ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) [0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #7 v1
Rendered cms/pages/_edit_connector (8.1ms)
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) [0m
  [4;36;1mHtmlBlock::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;35;1mHtmlBlock Load (0.3ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #8 v1
Rendered cms/pages/_edit_connector (8.7ms)
  [4;36;1mHtmlBlock Load (0.3ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) [0m
  [4;35;1mHtmlBlock::Version Load (0.2ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
  [4;36;1mHtmlBlock Load (0.2ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
..... Rendering connectable HtmlBlock #5 v1
Rendered cms/pages/_edit_connector (7.9ms)
  [4;35;1mAbstractFileBlock Load (0.2ms)[0m   [0mSELECT * FROM `file_blocks` WHERE (`file_blocks`.`id` = 1) [0m
  [4;36;1mImageBlock::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mAttachment Load (0.2ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;36;1mAttachment::Version Load (0.2ms)[0m   [0;1mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `file_block_versions` WHERE (`file_block_versions`.file_block_id = 1 AND (`file_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `attachment_versions` WHERE (`attachment_versions`.attachment_id = 1 AND (`attachment_versions`.`version` = 1)) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `connectors` WHERE ((((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'quote')) AND (`connectors`.page_id = 1)) AND (`connectors`.page_id = 1)) [0m
..... Rendering connectable ImageBlock #1 v1
Rendered cms/pages/_edit_connector (6.6ms)
  [4;35;1mSectionNode Load (0.2ms)[0m   [0mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 1) [0m
  [4;36;1mSection Load (0.1ms)[0m   [0;1mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `attachments` WHERE (`attachments`.`id` = 1) AND (attachments.deleted = 0) [0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (((section_nodes.node_type IN ('Section','Page','Link')) AND (`section_nodes`.section_id = 1)) AND (`section_nodes`.section_id = 1)) ORDER BY section_nodes.position[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 3) [0m
  [4;36;1mSectionNode Load (0.2ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.section_id = 3) AND ((section_nodes.node_type IN ('Link','Page')) AND (`section_nodes`.section_id = 3)) LIMIT 1[0m
  [4;35;1mPage Load (0.2ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 5) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.3ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'teaser')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (5.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'content')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 6) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 6) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 7) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 7) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 8) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 8) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (14.5ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'related')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
Rendered cms/pages/_edit_container (4.6ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mConnector Load (0.4ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mHtmlBlock::Version Load (0.3ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `connectors` WHERE (`connectors`.page_id = 1) AND (((`connectors`.`page_version` = 11 AND `connectors`.`container` = 'footer')) AND (`connectors`.page_id = 1)) ORDER BY connectors.container, connectors.position[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_blocks` WHERE (`html_blocks`.`id` = 5) AND (html_blocks.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5 AND (`html_block_versions`.`version` = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `html_block_versions` WHERE (`html_block_versions`.html_block_id = 5) ORDER BY version desc LIMIT 1[0m
Rendered cms/pages/_edit_container (8.5ms)
Filter chain halted as [:check_access_to_page] rendered_or_redirected.
Completed in 131ms (View: 95, DB: 28) | 200 OK [http://localhost/?mode=edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentController#show (for 127.0.0.1 at 2009-05-18 15:26:29) [GET]
  Parameters: {"path"=>["stylesheets", "cms", "page.css"]}
Caching is disabled
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.5ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mRedirect Load (0.3ms)[0m   [0;1mSELECT * FROM `redirects` WHERE (`redirects`.`from_path` = '/stylesheets/cms/page.css') LIMIT 1[0m
  [4;35;1mAttachment Load (0.3ms)[0m   [0mSELECT * FROM `attachments` WHERE (`attachments`.`file_path` = '/stylesheets/cms/page.css') AND ((((`attachments`.`published` = 1 AND `attachments`.`archived` = 0)) AND (attachments.deleted = 0)) AND ((`attachments`.`published` = 1 AND `attachments`.`archived` = 0))) LIMIT 1[0m
..... Displaying draft version of page
  [4;36;1mPage Load (0.7ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`path` = '/stylesheets/cms/page.css') AND (pages.deleted = 0) LIMIT 1[0m
Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
/Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/app/controllers/cms/content_controller.rb:180:in `check_access_to_page'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:178:in `evaluate_method'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/callbacks.rb:166:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:225:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:629:in `run_before_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:615:in `call_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Users/andrebruehl/.gem/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.1.0/lib/sass/plugin/rails.rb:19:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/head.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/methodoverride.rb:24:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `synchronize'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/lock.rb:11:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:46:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `each'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/urlmap.rb:40:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/content_length.rb:13:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/chunked.rb:15:in `call'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:61:in `process'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:159:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:158:in `process_client'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:285:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `initialize'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `new'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.4/lib/mongrel.rb:268:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb:34:in `run'
/Users/andrebruehl/.gem/ruby/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3
Handling Exception: You have a nil object when you didn't expect it!
The error occurred while evaluating nil.as_of_draft_version
Rendering template within layouts/cms/application
Rendering cms/shared/error (internal_server_error)
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (0.9ms)
Rendered layouts/cms/_footer (0.1ms)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ToolbarController#index (for 127.0.0.1 at 2009-05-18 15:26:29) [GET]
  Parameters: {"page_version"=>"11", "mode"=>"edit", "amp"=>nil, "page_id"=>"1", "page_toolbar"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mPage Load (0.4ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.3ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = '11')) LIMIT 1[0m
Rendering template within layouts/cms/toolbar
Rendering cms/toolbar/index
Rendered layouts/_cms_toolbar (1.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mPage::Version Load (0.4ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mPage::Version Load (0.4ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mSectionNode Load (0.3ms)[0m   [0;1mSELECT * FROM `section_nodes` WHERE (`section_nodes`.node_id = 1 AND `section_nodes`.node_type = 'Page') LIMIT 1[0m
  [4;35;1mSection Load (0.2ms)[0m   [0mSELECT * FROM `sections` WHERE (`sections`.`id` = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mTask Load (0.3ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `tasks` WHERE (`tasks`.page_id = 1) AND ((completed_at is null) AND (`tasks`.page_id = 1)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `pages` WHERE (`pages`.`id` = 1) AND (pages.deleted = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1 AND (`page_versions`.`version` = 11)) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `page_versions` WHERE (`page_versions`.page_id = 1) ORDER BY version desc LIMIT 1[0m
Rendered layouts/_page_toolbar (27.4ms)
Completed in 42ms (View: 32, DB: 4) | 200 OK [http://localhost/cms/toolbar?mode=edit&amp;page_id=1&amp;page_toolbar=1&amp;page_version=11]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::ContentTypesController#index (for 127.0.0.1 at 2009-05-18 15:26:35) [GET]
  Parameters: {"connect_to_container"=>"related", "connect_to_page_id"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.6ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.4ms)[0m   [0mSELECT * FROM `content_types` ORDER BY name[0m
Rendering template within layouts/cms/application
Rendering cms/content_types/index
  [4;36;1mContentType Load Including Associations (0.6ms)[0m   [0;1mSELECT `content_types`.`id` AS t0_r0, `content_types`.`name` AS t0_r1, `content_types`.`content_type_group_id` AS t0_r2, `content_types`.`priority` AS t0_r3, `content_types`.`created_at` AS t0_r4, `content_types`.`updated_at` AS t0_r5, `content_type_groups`.`id` AS t1_r0, `content_type_groups`.`name` AS t1_r1, `content_type_groups`.`created_at` AS t1_r2, `content_type_groups`.`updated_at` AS t1_r3 FROM `content_types` LEFT OUTER JOIN `content_type_groups` ON `content_type_groups`.id = `content_types`.content_type_group_id WHERE (content_type_groups.name != 'Categorization') ORDER BY content_types.priority, content_types.name[0m
Rendered layouts/cms/_head (1.4ms)
Rendered layouts/_cms_toolbar (1.0ms)
Rendered layouts/cms/_footer (0.1ms)
Completed in 15ms (View: 10, DB: 2) | 200 OK [http://localhost/cms/content_types?connect_to_container=related&connect_to_page_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:26:36) [GET]
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.4ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.2ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;36;1mTag Load (0.1ms)[0m   [0;1mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::NewsArticlesController#new (for 127.0.0.1 at 2009-05-18 15:26:49) [GET]
  Parameters: {"news_article"=>{"connect_to_container"=>"related", "connect_to_page_id"=>"1"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;36;1mPermission Load Including Associations (0.5ms)[0m   [0;1mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;35;1mContentType Load (0.4ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'NewsArticle') LIMIT 1[0m
  [4;36;1mNewsArticle Load (0.3ms)[0m   [0;1mSELECT * FROM `news_articles` WHERE (news_articles.deleted = 0) ORDER BY news_articles.id DESC LIMIT 1[0m
Rendering template within layouts/cms/content_library
Rendering cms/blocks/new
Rendered cms/blocks/_toolbar_for_collection (0.7ms)
Rendered cms/blocks/_toolbar (1.5ms)
Rendered cms/blocks/_hidden_fields (0.5ms)
Rendered cms/form_builder/_cms_text_field (0.5ms)
Rendered cms/form_builder/_cms_date_picker (14.6ms)
  [4;35;1mCategoryType Load (25.8ms)[0m   [0mSELECT * FROM `category_types` WHERE (category_types.name = 'News Article') LIMIT 1[0m
  [4;36;1mCategoryType Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `category_types`[0m
  [4;35;1mCategory Load (24.4ms)[0m   [0mSELECT * FROM `categories` WHERE (((categories.parent_id is null) AND (`categories`.category_type_id = 1)) AND (`categories`.category_type_id = 1)) ORDER BY name[0m
Rendered cms/form_builder/_cms_drop_down (1.3ms)
Rendered cms/form_builder/_cms_text_area (0.4ms)
Rendered cms/form_builder/_cms_text_editor (1.0ms)
Rendered cms/form_builder/_cms_file_field (3.4ms)
Rendered cms/form_builder/_cms_tag_list (1.4ms)
Rendered cms/news_articles/_form (86.5ms)
Rendered layouts/cms/_head (2.6ms)
Rendered layouts/_cms_toolbar (1.0ms)
  [4;36;1mContentTypeGroup Load (0.3ms)[0m   [0;1mSELECT * FROM `content_type_groups` ORDER BY content_type_groups.id[0m
  [4;35;1mContentTypeGroup Load (0.2ms)[0m   [0mSELECT * FROM `content_type_groups` WHERE (`content_type_groups`.`id` = 3) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 1) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.3ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 2) ORDER BY content_types.id[0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `content_types` WHERE (`content_types`.content_type_group_id = 3) ORDER BY content_types.id[0m
Rendered layouts/cms/_footer (0.1ms)
Completed in 122ms (View: 58, DB: 55) | 200 OK [http://localhost/cms/news_articles/new?news_article%5Bconnect_to_container%5D=related&news_article%5Bconnect_to_page_id%5D=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing Cms::TagsController#index to js (for 127.0.0.1 at 2009-05-18 15:26:49) [GET]
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) LIMIT 1[0m
  [4;35;1mPermission Load Including Associations (0.4ms)[0m   [0mSELECT `permissions`.`id` AS t0_r0, `permissions`.`name` AS t0_r1, `permissions`.`full_name` AS t0_r2, `permissions`.`description` AS t0_r3, `permissions`.`for_module` AS t0_r4, `permissions`.`created_at` AS t0_r5, `permissions`.`updated_at` AS t0_r6, `groups`.`id` AS t1_r0, `groups`.`name` AS t1_r1, `groups`.`code` AS t1_r2, `groups`.`group_type_id` AS t1_r3, `groups`.`created_at` AS t1_r4, `groups`.`updated_at` AS t1_r5, `users`.`id` AS t2_r0, `users`.`login` AS t2_r1, `users`.`first_name` AS t2_r2, `users`.`last_name` AS t2_r3, `users`.`email` AS t2_r4, `users`.`crypted_password` AS t2_r5, `users`.`salt` AS t2_r6, `users`.`created_at` AS t2_r7, `users`.`updated_at` AS t2_r8, `users`.`expires_at` AS t2_r9, `users`.`remember_token` AS t2_r10, `users`.`remember_token_expires_at` AS t2_r11 FROM `permissions` LEFT OUTER JOIN `group_permissions` ON (`permissions`.`id` = `group_permissions`.`permission_id`) LEFT OUTER JOIN `groups` ON (`groups`.`id` = `group_permissions`.`group_id`) LEFT OUTER JOIN `user_group_memberships` ON (`groups`.`id` = `user_group_memberships`.`group_id`) LEFT OUTER JOIN `users` ON (`users`.`id` = `user_group_memberships`.`user_id`) WHERE (users.id = 1) [0m
  [4;36;1mContentType Load (0.2ms)[0m   [0;1mSELECT * FROM `content_types` WHERE (`content_types`.`name` = 'Tag') LIMIT 1[0m
  [4;35;1mTag Load (0.1ms)[0m   [0mSELECT * FROM `tags` LIMIT 0, 15[0m
Completed in 7ms (View: 2, DB: 1) | 200 OK [http://localhost/cms/tags.js]
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/action_view/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/base.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/connection_adapters/abstract/schema_statements.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_record/errors.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/active_support/cache/file_store.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/hash.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/integer.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/nil.rb
~~ Loading extensions from /Library/Ruby/Gems/1.8/gems/browsercms-3.0.0/lib/cms/extensions/string.rb
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mDynamicView Load (0.4ms)[0m   [0mSELECT * FROM `dynamic_views` WHERE (`dynamic_views`.`deleted` = 0) [0m
  [4;36;1mDynamicView Columns (70.5ms)[0m   [0;1mSHOW FIELDS FROM `dynamic_views`[0m
  [4;35;1mPageTemplate Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `dynamic_views`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mPageRoute Load (0.3ms)[0m   [0mSELECT * FROM `page_routes` ORDER BY page_routes.name[0m
  [4;36;1mPageRoute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `page_routes`[0m
  [4;35;1mPageRouteRequirement Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mPageRouteRequirement Load (0.9ms)[0m   [0;1mSELECT * FROM `page_route_options` WHERE (`page_route_options`.page_route_id = 1) AND ( (`page_route_options`.`type` = 'PageRouteRequirement' ) ) [0m
  [4;35;1mPageRouteCondition Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `page_route_options`[0m
  [4;36;1mPageRouteCondition Load (1.0ms)[0m   [0;1mSELECT * FROM `page_route_options` WHERE (`page_route_options`.page_route_id = 1) AND ( (`page_route_options`.`type` = 'PageRouteCondition' ) ) [0m
